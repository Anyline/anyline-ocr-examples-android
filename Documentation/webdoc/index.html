<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.anyline.io/download/'>Get the Anyline&reg SDK</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <!-- Content is split up in multiple files listed above, which can be found in the includes directory -->

<h1 id="introduction">Introduction</h1>

<p>Anyline provides an easy-to-use SDK for applications to enable Optical Character Recognition (OCR) on mobile devices.
This API contains a <a href="#getting-started">Quick Start Guide</a> for all supported platforms, a detailed description of the <a href="#configuration">Configuration</a>, as well as descriptions and examples for all available <a href="#modules">Modules</a>.<br/></p>

<h3 id="supported-platforms">Supported Platforms</h3>

<ul>
<li>Android</li>
<li>iOS</li>
<li>WP / Windows Phone Edition (available now upon request! <a href="mailto:sales@anyline.io">Please mail us now</a>)</li>
</ul>

<h3 id="extensions">Extensions</h3>

<ul>
<li><a href="#cordova-plugin">Cordova Plugin</a></li>
<li><a href="#xamarin-setup-guide">Xamarin</a> - Availabe for Android and iOS.</li>
</ul>

<h3 id="smart-glasses">Smart Glasses</h3>

<ul>
<li><a href=https://developers.google.com/glass/>Google Glass</a></li>
<li><a href='https://tech.moverio.epson.com/en/work/'>Epson BT2000</a> </li>
</ul>

<p>First prototypes for both glasses are available on request. The versions include one additional module requiring a special license which cannot be acquired via our customer portal. For more information and a trial license please <a href="https://www.anyline.io/support-request/">contact</a> us.</p>

<h3 id="available-modules">Available Modules</h3>

<ul>
<li><a href="#barcodeModule"><strong>Barcode:</strong></a>  Scan 23 types of international barcode &amp; QR code formats.</li>
<li><a href="#energyModule"><strong>Energy:</strong></a> Scan meter readings of various electric, gas, and water meters.</li>
<li><a href="#mrzModule"><strong>MRZ:</strong></a>  Reliable scanning of data from passports&rsquo; and IDs&rsquo; machine readable zones (MRZ)</li>
<li><a href="#documentModule"><strong>Document:</strong></a> Detects document outlines and delivers a high-resolution image</li>
<li><a href="#ordercodeModule"><strong>Order Code:</strong></a>  Scan an alphanumeric order code - only available for smart glasses</li>
<li><a href="#anylineOcrModule"><strong>Anyline OCR:</strong></a> Create a custom use case with LINE or GRID recognition</li>
</ul>

          <h1 id="getting-started">Getting Started</h1>

<p>This section helps you to get started with the Anyline SDK and provides a brief description of the files included in SDK bundle as well as a requirement description and a Quick Start Guide for all available platforms.</p>

<h2 id="obtaining-an-anyline-sdk-license-key">Obtaining an Anyline SDK License Key</h2>

<p>The best way to use Anyline is to purchase your personal license in our <a href="https://www.anyline.io/store/">Anyline Store</a>. Each key is bound to a specific application by the Bundle Identifier (iOS) or the applicationId (Android).</p>

<h3 id="ios-bundle-identifier">iOS Bundle Identifier</h3>

<p>The iOS Bundle Identifier is best found in Xcode in the Project Overview / General.</p>

<p><img alt="BundleIDiOS" src="images/bundleIDiOS.png" /></p>

<h3 id="android-applicationid">Android ApplicationId</h3>

<p>The Android applicationId is found in the build.gradle file as android / defaultConfig / applicationId.</p>

<p><img alt="BundleIDAndroid" src="images/bundleIDAndroid.png" /></p>

<p>If you do not use the applicationId in your build.gradle file you may use the package name shown in the AndroidManifest.xml.</p>

<p><img alt="BundleIdAndroid2" src="images/bundleIDAndroid2.png" /></p>

          <h2 id="android-getting-started">Android Getting Started</h2>

<p>The Android bundle contains the following parts:</p>

<ul>
<li><strong>Anyline-Font:</strong>         contains a beautiful Machine-Readable Font to delight computers and humans alike</li>
<li><strong>AnylineSDK:</strong>           contains the anyline-android-release.aar library</li>
<li><strong>AnylineSDKExamples:</strong>   contains a simple app where an example for each module is implemented - it can be installed right away</li>
<li><strong>Documentation:</strong>        contains the java doc for the anyline-sdk, and this web documentation</li>
<li><strong>LICENSE:</strong>              third party license agreements</li>
<li><strong>README:</strong>               contains a quick start - setup and module description</li>
<li><strong>RELEASE_NOTES:</strong>        information about any changes</li>
</ul>

<h3 id="sample-data">Sample Data</h3>

<p>In order to try out our examples app yourself, you can download <a href="https://anylinewebsiteresource.blob.core.windows.net/wordpressmedia/2016/08/Examples-Sheet-Anyline-3.6.pdf">this file</a> with test images or scan things in the real world ;)</p>

<h3 id="requirements">Requirements</h3>

<ul>
<li>Android device with SDK &gt;= 15</li>
<li>decent camera functionality (recommended: 720p and adequate auto focus)</li>
</ul>

<h3 id="quick-start-guide">Quick Start Guide</h3>

<h4 id="1-add-anylinesdk-as-dependency">1. Add AnylineSDK as dependency</h4>

<h5 id="via-maven">Via Maven</h5>

<blockquote>
<p>Add AnylineSDK to the dependencies in build.gradle</p>
</blockquote>
<pre class="highlight groovy"><code><span class="c1">//root section of the file
</span><span class="n">repositories</span> <span class="o">{</span>
    <span class="c1">//add the anyline maven repo
</span>    <span class="n">maven</span> <span class="o">{</span> <span class="n">url</span> <span class="s1">'https://anylinesdk.blob.core.windows.net/maven/'</span><span class="o">}</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="c1">//add the anyline sdk as dependency (maybe adapt version name)
</span>    <span class="n">compile</span> <span class="s1">'io.anyline:anylinesdk:3.7.0@aar'</span>
    <span class="c1">//... your other dependencies
</span><span class="o">}</span>
</code></pre>

<aside class="notice">
<b>Epson specific</b>
<br/>
To run Anyline for Epson BT2000 you have to integrate a specific Anyline SDK version.
Therefore change the line in dependecies as follows: 
<br/><br/>
compile &lsquo;io.anyline:anylinesdk:3.3.0-epson@aar&rsquo;
</aside>

<h6 id="newline">&NewLine;</h6>

<h5 id="or-via-local-copy-of-the-aar">Or via local copy of the aar</h5>

<p>Copy the .aar to the libs directory of your project (app/libs) and adapt build.gradle.</p>

<blockquote>
<p>Add AnylineSDK to the dependencies in build.gradle</p>
</blockquote>
<pre class="highlight groovy"><code><span class="c1">//root section of the file
</span><span class="n">repositories</span> <span class="o">{</span>
    <span class="n">flatDir</span> <span class="o">{</span>
        <span class="n">dirs</span> <span class="s1">'libs'</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="n">dependencies</span> <span class="o">{</span>
    <span class="n">compile</span><span class="o">(</span><span class="nl">name:</span><span class="s1">'anylinesdk-3.7.0'</span><span class="o">,</span> <span class="nl">ext:</span><span class="s1">'aar'</span><span class="o">)</span>
    <span class="c1">//... your other dependencies
</span><span class="o">}</span>
</code></pre>

<aside class="notice">
<b>Epson specific</b>
<br/>
To integrate the Epson specific Anyline SDK adapt the line in dependecies as follows:
<br/><br/>
compile(name:'anylinesdk-3.3.0-epson&rsquo;, ext:'aar&rsquo;)
</aside>

<h6 id="newline">&NewLine;</h6>

<h4 id="2-limit-the-build-to-the-provided-architectures">2. Limit the build to the provided architectures</h4>

<p>We currently only provide our SDK for the architectures armeabi-v7a and x86.
This is sufficient to support most devices (none known for which this is not sufficient)
and it keeps the file size smaller. To further reduce the file size it is possible to generate and submit two separate apks
see this <a href="http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits">user guide</a> for more details.
If other dependencies or your own native code include builds for more architectures, system load errors will occur.</p>

<blockquote>
<p>To limit the build to the two architectures you can add a ndk filter to your build.gradle:</p>
</blockquote>
<pre class="highlight groovy"><code><span class="n">android</span> <span class="o">{</span>
    <span class="o">....</span>
    <span class="n">defaultConfig</span> <span class="o">{</span>
        <span class="o">....</span>
        <span class="n">ndk</span> <span class="o">{</span>
            <span class="n">abiFilters</span> <span class="s2">"armeabi-v7a"</span><span class="o">,</span> <span class="s2">"x86"</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>

<blockquote>
<p>depending on the gradle plugin version you may need add the following in your gradle.properties</p>
</blockquote>
<pre class="highlight plaintext"><code>android.useDeprecatedNdk=true
</code></pre>

<blockquote>
<p>(Note that the old NDK integration may be deprecated, but the new NDK integration is experimental)</p>
</blockquote>

<h6 id="newline">&NewLine;</h6>

<h4 id="3-provide-a-config-file-json-or-xml">3. Provide a config file (json or xml)</h4>

<blockquote>
<p>Example barcode_view_config.json:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"captureResolution"</span><span class="p">:</span><span class="s2">"720p"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cutout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"maxWidthPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80%"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ratioFromSize"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FFFFFF"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"outerColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"outerAlpha"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="nt">"flash"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bottom_right"</span><span class="w">
     </span><span class="p">},</span><span class="w">
     </span><span class="nt">"beepOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
     </span><span class="nt">"vibrateOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
     </span><span class="nt">"blinkAnimationOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
     </span><span class="nt">"cancelOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The config file enables a quick and easy adaption of the &ldquo;Scan-View&rdquo;. You can either provide a json-file or use the XML-attributes in the layout file itself.
A detailed description of all available attributes can be found in <a href="#anyline-config">Anyline Config</a></p>

<aside class="notice">
<b>Epson specific</b>
<br/>
The Epson BT2000 has no flash or vibration alarm integrated. Hence, all settings regarding flash and 'vibrateOnResult&rsquo; will be ignored. Furthermore the Epson has no built-in speakers, therefore the 'beepOnResult&rsquo; will only be played when the headset is connected
</aside>

<h6 id="json">JSON</h6>

<p>This config file must be located in the <strong>assets</strong> folder of your Android project.</p>

<p>Some of the most important config options may be:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>captureResolution</td>
<td>the preferred camera preview size</td>
</tr>
<tr>
<td>cutout</td>
<td>defining which area of the preview will be &ldquo;cutout&rdquo; (analyzed to find bar/QR code)</td>
</tr>
<tr>
<td>flash</td>
<td>defines the flash mode, where to place the flash symbol, etc.</td>
</tr>
<tr>
<td>beepOnResult</td>
<td>enables sound on successful scanning process (for modules only)</td>
</tr>
<tr>
<td>vibrateOnResult</td>
<td>provides haptic feedback for a successful scanning process (for modules only)</td>
</tr>
<tr>
<td>blinkOnResult</td>
<td>visual feedback for a successful scanning process (for modules only)</td>
</tr>
<tr>
<td>cancelOnResult</td>
<td>if true, the scanning process will be stopped after one result and needs to be restarted manually (for modules only)</td>
</tr>
</tbody></table>

<h6 id="xml">XML</h6>
<pre class="highlight xml"><code><span class="nt">&lt;RelativeLayout</span>
     <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
     <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
     <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
     <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;at.nineyards.anyline.modules.energy.EnergyScanView</span>
        <span class="na">android:id=</span><span class="s">"@+id/energy_scan_view"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
        <span class="na">app:cutout_alignment=</span><span class="s">"top"</span>
        <span class="na">app:cutout_style=</span><span class="s">"rect"</span>
        <span class="na">app:cutout_outside_color=</span><span class="s">"#55000000"</span>
        <span class="na">app:cutout_offset_y=</span><span class="s">"120"</span>
        <span class="na">app:cutout_rect_corner_radius_in_dp=</span><span class="s">"4"</span>
        <span class="na">app:cutout_stroke_width_in_dp=</span><span class="s">"2"</span>
        <span class="na">app:cutout_stroke_color=</span><span class="s">"#FFFFFF"</span>
        <span class="na">app:flash_mode=</span><span class="s">"manual"</span>
        <span class="na">app:flash_alignment=</span><span class="s">"bottom_right"</span>
        <span class="na">app:beep_on_result=</span><span class="s">"true"</span>
        <span class="na">app:vibrate_on_result=</span><span class="s">"true"</span>
        <span class="na">app:blink_animation_on_result=</span><span class="s">"true"</span>
        <span class="na">app:cancel_on_result=</span><span class="s">"true"</span>
     <span class="nt">/&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span>
</code></pre>

<p>Alternatively to a json config, it is also possible to configure the view (EnergyScanView, MrzScanView, BarcodeScanView) using XML-attributes in the layout-file.</p>

<h6 id="newline">&NewLine;</h6>

<h4 id="4-add-your-license">4. Add your license</h4>

<p>Add your license to your string resources (can be a separate xml file).</p>
<pre class="highlight plaintext"><code>&lt;string name="anyline_license_key" translatable="false"&gt;
    icaCo34adsfasdferJBAerisdlfkjerj1234adsflkerhlakherDAdfjlafherGs\n
    h4ll0we1t7h1s1sno74r34ll1c3n53yO00asdfkaer455alksdfASDSlallernde\n
    YXRmb3JtIjogWyAiQW5kcm9pZCIgXSwgInNjb3BlIjogWyAiQUxMIiBdLCAidG9s\n
    icaCo34adsfasdferJBAerisdlfkjerj1234adsflkerhlakherDAdfjlafherGs\n
    cHhoTm9UZ0g1cys3M2dhUW1SMUpXblJLWEhFeE02eHRNWHpaNEViWXdXODFmWmRl\n
    YXRmb3JtIjogWyAiQW5kcm9pZCIgXSwgInNjb3BlIjogWyAiQUxMIiBdLCAidG9s\n
    c0xjNEwzbjBLV0tnOG80NzdGSHA3OHUydWFVCkRqUUU4S0RWK240RkFVZ3FnUHg5\n
    icaCo34adsfasdferJBAerisdlfkjerj1234adsflkerhlakherDAdfjlafherGs\n
    aWNldnRTZEU2Q3hkYldZUVdpQjNkUXFqckxuWW0vaE1CSEx2OHRUdWpyN09MWDhC\n
    h4ll0we1t7h1s1sno74r34ll1c3n53yO00asdfkaer455alksdfASDSlallernde\n
    icaCo34adsfasdferJBAerisdlfkjerj1234adsflkerhlakherDAdfjlafherGs\n
    SEptQVE9PQo=\n
&lt;/string&gt;
</code></pre>

<h4 id="5-init-anyline-in-your-activity">5. Init Anyline in your Activity</h4>

<p>There are module specific options - take a look at the description of the desired module to get more detailed information.</p>

<h4 id="6-enjoy-scanning-and-have-fun">6. Enjoy scanning and have fun :)</h4>

          <h2 id="ios-getting-started">iOS Getting Started</h2>

<ul>
<li><strong>Framework:</strong>        contains the Anyline.framework and AnylineResources.bundle</li>
<li><strong>Documentation:</strong>    contains a html and docset version of an appledoc style interface documentation</li>
<li><strong>AnylineExamples:</strong>  contains a simple app where each module is implemented - it can be installed right away</li>
<li><strong>LICENSE:</strong>          third party license agreements</li>
<li><strong>RELEASE_NOTES</strong>     information about any changes</li>
</ul>

<h3 id="sample-data">Sample Data</h3>

<p>In order to try out our examples app yourself, you can download  <a href="https://anylinewebsiteresource.blob.core.windows.net/wordpressmedia/2016/05/Anyline-3.5-Scan-Examples.pdf">this file</a> with test images or scan things in the real world ;)  </p>

<h3 id="requirements">Requirements</h3>

<ul>
<li>minimum iOS 7.0</li>
<li>minimum iPhone4s</li>
</ul>

<h3 id="quick-start-ios-setup">Quick Start iOS - Setup</h3>

<h4 id="1-with-cocoapods">1. With Cocoapods</h4>

<p>Simply add <em>pod &lsquo;Anyline&rsquo;, &rsquo;~&gt; 3.6&rsquo;</em> to your Podfile and run <em>pod install</em> or <em>pod update</em>.
(Please make sure you are on the latest version of CocoaPods)</p>

<p>You&rsquo;re all done and can jump to point 3.1. </p>

<h5 id="or-via-local-copy-of-the-anyline-framework-amp-anylineresources-bundle">Or via local copy of the Anyline.framework &amp; AnylineResources.bundle #####</h5>

<p>Simply drag &amp; drop Anyline.framework &amp; AnylineResources.bundle into your project tree.
<img alt="Add Frameworks" src="images/AddFramework.jpg" /></p>

<p>In the import screen select <em>Copy items if needed</em> and <em>Create groups</em> and add the files to your target.
<img alt="Copy Frameworks" src="images/CopyFramework.jpg" /></p>

<h4 id="2-linking-frameworks">2. Linking Frameworks</h4>

<p>After the framework and bundle got imported go to your project inspector. In the <em>Build Phases</em> tab, add the following libraries:</p>

<ul>
<li>libc++.tbd</li>
<li>libz.tbd</li>
<li>AssetsLibrary.framework</li>
</ul>

<p>After adding the libraries, it should look like this (notice the AnylineResources bundle, if its not in <em>Copy Bundle Resources</em> add it):
<img alt="Link Frameworks" src="images/LinkFrameworks.png" /></p>

<h4 id="3-linker-flags">3. Linker Flags</h4>

<aside class="notice">
<b>This changed from -ObjC to -all_load in Aynline SDK version 3.6</b>
</aside>

<p>In your project inspector switch to the <em>Build Settings</em> tab  and search for <em>Other Linker Flags</em>. Select
<em>Other - Other Linker Flags</em> and add <em>-all_load</em>.
This flag causes the linker to load every object file in the library that defines an Objective-C class or category.</p>

<p><img alt="Linker Flags" src="images/LinkerFlags.jpg" /></p>

<h5 id="3-1-bitcode">3.1 Bitcode</h5>

<p>Bitcode needs to be disabled. Just search for &ldquo;<em>Bit</em>&rdquo; and set <em>Enable Bitcode</em> to <em>No</em>.</p>

<blockquote>
<p>Bitcode is an intermediate representation of a compiled program. Apps you upload to iTunes Connect that contain bitcode will be compiled and linked on the App Store. Including bitcode will allow Apple to re-optimize your app binary in the future without the need to submit a new version of your app to the store.</p>
</blockquote>

<p><img alt="Linker Flags" src="images/iOS_build_bitcode.png" /></p>

<p><a href="https://developer.apple.com/library/prerelease/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html">Apple Documentation on Bitcode</a></p>

<h4 id="4-init-an-anylinemoduleview-in-your-viewcontroller-or-storyboard">4. Init an AnylineModuleView in your ViewController or Storyboard</h4>

<p>There are module specific options - take a look at the description of the desired module to get more detailed information.</p>

<h4 id="5-enjoy-scanning-and-have-fun">5. Enjoy scanning and have fun :)</h4>

          <h2 id="cordova-plugin">Cordova Plugin</h2>

<p>The Cordova bundle contains the following parts:</p>

<ul>
<li><strong>anylinesdk-plugin:</strong>      contains the anylinesdk cordova-plugin that can be added to your project</li>
<li><strong>example:</strong>    a simple cordova example project, demonstrating how the anylinesdk cordova-plugin can be used</li>
<li><strong>PLUGIN_USAGE:</strong>     quick start guide</li>
</ul>

<h3 id="requirements">Requirements</h3>

<h4 id="android">Android</h4>

<ul>
<li>Android device with SDK &gt;= 15</li>
<li>decent camera functionality (recommended: 720p and adequate auto focus)</li>
</ul>

<h4 id="ios">iOS</h4>

<ul>
<li>minimum iOS 7.0</li>
<li>minimum iPhone4s</li>
</ul>

<h3 id="quick-start-cordova-setup">Quick Start Cordova - Setup</h3>

<p>This is just a simple setup guide to integrate the anylinesdk-plugin in an existing Cordova project.<br/>
For more information about Cordova, how to use plugins, etc. see <a target="_blank" href="https://cordova.apache.org/">https://cordova.apache.org/</a>.</p>

<h6 id="1-add-the-anylinesdk-plugin-to-your-existing-cordova-project">1. Add the anylinesdk-plugin to your existing cordova project</h6>
<pre class="highlight plaintext"><code>cordova plugin add PATH_TO_DIR/anylinesdk-plugin/
</code></pre>

<p>Copy the <i>anylinesdk-plugin</i> folder and add the plugin to your Cordova project. Make sure you have added at least on of the platforms (Android, iOS) to your project.</p>

<p>Or use plugman. E.g. for android:  </p>
<pre class="highlight plaintext"><code>plugman install --platform android --project platforms/android --plugin PATH_TO_DIR/anylinesdk-plugin
</code></pre>

<h6 id="2-copy-the-js-files-or-create-custom-js-file">2. Copy the js-files or create custom js-file</h6>

<p>The <i>example</i> project provides sample scripts which are optimized for each module. The js-files can be found in <i>example/www/js/</i>.<p/>
You can either reuse those sample scripts or create your own and adapt them to your needs. <br/>
Just make sure the script is called in the <i>index.html</i> of the Cordova project.<p/></p>
<pre class="highlight plaintext"><code>cordova.exec(onResult, onError, "AnylineSDK", scanMode, config);
</code></pre>

<p><p/>
<a name="cordova-example"></a>
Basically, there is one simple exec-call to the AnylineSDK with the following parameters:</p>

<ul>
<li><b>onResult</b>: a function that is called on a scan result</li>
<li><b>onError</b>: a function that is called on error or when the user canceled the scanning</li>
<li><b>AnylineSDK</b>: add this <em>string</em> to make sure the anyline-sdk plugin is called</li>
<li><b>scanMode</b>: &ldquo;<i>MRZ</i>&rdquo;, &ldquo;<i>BARCODE</i>&rdquo;, &ldquo;<i>ANYLINE_OCR</i>&rdquo;, &ldquo;<i>ELECTRIC_METER</i>&rdquo;, &ldquo;<i>GAS_METER</i>&rdquo; (more Energy modes can be found <a href="#energyModule">here</a>)</li>
<li><b>config</b>: an array

<ul>
<li><b>config[0]</b>: the license key</li>
<li><b>config[1]</b>: the <a href="#anyline-config">json config</a> for the view, passed as json-array</li>
</ul></li>
</ul>

<blockquote>
<p>Example for <strong>config</strong> from MRZ:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
    </span><span class="s2">"YOUR_LICENSE_KEY"</span><span class="p">,</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="nt">"captureResolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1080p"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cutout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"maxWidthPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90%"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"maxHeightPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90%"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"top_half"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
            </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FFFFFF"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"outerColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"outerAlpha"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"flash"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bottom_right"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"beepOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"vibrateOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"blinkAnimationOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cancelOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<h6 id="3-run-your-cordova-project-enjoy-scanning-and-have-fun">3. Run your cordova project: Enjoy scanning and have fun :)</h6>

          <h1 id="xamarin-setup-guide">Xamarin Setup Guide</h1>

<p>The Anyline SDK is available for both Xamarin.Android and Xamarin.iOS. Each mobile platform has their own Anyline Xamarin SDK and can be used very similar to the regular Anyline bundles for Android and iOS. Please refer to our API Reference for platform-specific documentation.</p>

<h2 id="xamarin-android">Xamarin.Android</h2>

<p>The Anyline Xamarin SDK provides the functionality of our Android SDK in C# to make Android integration in Xamarin as easy as possible. This section helps you to setup your Xamarin.Android project and start scanning right away!</p>

<h3 id="requirements">Requirements</h3>

<p>To use the Anyline SDK for Xamarin.Android you need:</p>

<ul>
<li>A Xamarin account (If you work with Visual Studio, you need at least a Xamarin business account. Check out the <a href="https://xamarin.com/">Xamarin website</a> for detailed information.)</li>
<li>An Android device with SDK &gt;= 17</li>
<li>Decent camera functionality (recommended: 720p and adequate auto focus)</li>
<li>Xamarin Studio or Visual Studio</li>
<li>An Anyline license which you can generate <a href="http://portal.anyline.io/">here</a> after purchasing our SDK in the <a href="https://www.anyline.io/store/">store</a>.</li>
</ul>

<p>The Android bundle contains the following parts:</p>

<ul>
<li><strong>AnylineXamarinSDK.Droid.dll:</strong> contains the Anyline SDK Library</li>
<li><strong>AnylineXamarinApp.Droid:</strong> contains a simple app where an example for each module is implemented - it can be installed right away</li>
<li><strong>LICENSE:</strong> third party license agreements</li>
<li><strong>README:</strong> contains a quick start - setup and module description</li>
</ul>

<h3 id="quick-start-xamarin-android-setup">Quick Start Xamarin Android - Setup</h3>

<p>In this section we will go through the basic process of creating and configuring a simple Anyline scanning application in Xamarin.Android. If you are not yet familiar with Xamarin.Android, follow <a href="https://developer.xamarin.com/guides/android/getting_started/hello,android/hello,android_quickstart/">this</a> guide to develop an understanding of the fundamentals of Android application development with Xamarin.</p>

<h4 id="1-create-a-new-xamarin-android-project">1. Create a new Xamarin.Android Project</h4>

<p>If you are using Visual Studio, click <code class="prettyprint">File</code> &gt; <code class="prettyprint">New Project...</code>, select <code class="prettyprint">Visual C#</code> &gt; <code class="prettyprint">Android</code> and create a new Blank App.</p>

<p><img alt="XamarinAndroidCreateVS" src="images/xamarinAndroidCreateVS.png" /></p>

<p>If you are using Xamarin Studio, click <code class="prettyprint">New Solution...</code> and create an Android App.</p>

<p><img alt="XamarinAndroidCreateXS" src="images/xamarinAndroidCreateXS.png" /></p>

<h4 id="2-generate-license-key">2. Generate license key</h4>

<p>Obtaining a license key is already described <a href="#obtaining-an-anyline-sdk-license-key">here</a>. To generate a license key for your application, refer to the <code class="prettyprint">package name</code> of your Xamarin.Android project. </p>

<ul>
<li><strong>Visual Studio</strong></li>
</ul>

<p><img alt="XamarinAndroidPackageVS" src="images/xamarinAndroidPackageVS.png" /></p>

<ul>
<li><strong>Xamarin Studio</strong></li>
</ul>

<p><img alt="XamarinAndroidPackageXS" src="images/xamarinAndroidPackageXS.png" /></p>

<h4 id="3-add-anylinexamarinsdk-droid-as-reference">3. Add AnylineXamarinSDK.Droid as reference</h4>

<p>To access the functionality of our SDK, simply add the <code class="prettyprint">AnylineXamarinSDK.Droid.dll</code> file as a reference. </p>

<p><strong>Visual Studio:</strong></p>

<ul>
<li>right-click the <em>References</em> node in your project tree</li>
<li>click <em>Add reference&hellip;</em></li>
<li>click <em>Browse&hellip;</em> and locate the <em>AnylineXamarinSDK.Droid.dll</em> file</li>
</ul>

<p><strong>Xamarin Studio:</strong></p>

<ul>
<li>right-click the <em>References</em> node in your project tree</li>
<li>click <em>Edit references&hellip;</em></li>
<li>navigate to the <em>.Net Assembly</em> tab</li>
<li>click <em>Browse&hellip;</em> to locate the <em>AnylineXamarinSDK.Droid.dll</em> file</li>
</ul>

<p>The SDK should now be visible as a reference and your project tree should somewhat look like this:</p>

<p><img alt="XamarinAndroidReference" src="images/xamarinAndroidReference.png" /></p>

<h4 id="4-set-minimum-android-target">4. Set minimum Android target</h4>

<p>In the <code class="prettyprint">Application</code> settings of your project, set the minimum version of your Android target to <code class="prettyprint">API level 17</code>.</p>

<p><img alt="XamarinAndroidTarget" src="images/xamarinAndroidTarget.png" /></p>

<h4 id="5-add-necessary-permissions-and-features">5. Add necessary permissions and features</h4>

<p>The scanning activity needs the following permissions and features:</p>

<ul>
<li>Permissions

<ul>
<li>CAMERA</li>
<li>VIBRATE</li>
<li>WRITE_EXTERNAL_STORAGE</li>
<li>READ_EXTERNAL_STORAGE</li>
</ul></li>
<li>Features

<ul>
<li>android.hardware.camera</li>
<li>android.hardware.camera.flash</li>
<li>android.hardware.camera.autofocus</li>
</ul></li>
</ul>

<p>So let&rsquo;s add them in our AndroidManifest.xml in our Properties node.</p>

<blockquote>
<p>in AndroidManifest.xml</p>
</blockquote>
<pre class="highlight xml"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
  <span class="na">package=</span><span class="s">"AT.Nineyards.AnylineXamarinExample"</span>
  <span class="na">android:versionCode=</span><span class="s">"1"</span> <span class="na">android:versionName=</span><span class="s">"1.0"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;uses-sdk</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;application</span> <span class="na">android:label=</span><span class="s">"AnylineExampleAndroid"</span> <span class="na">android:icon=</span><span class="s">"@drawable/Icon"</span><span class="nt">&gt;&lt;/application&gt;</span>
  <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.CAMERA"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.VIBRATE"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.WRITE_EXTERNAL_STORAGE"</span> <span class="na">android:maxSdkVersion=</span><span class="s">"18"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">"android.permission.READ_EXTERNAL_STORAGE"</span> <span class="na">android:maxSdkVersion=</span><span class="s">"18"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;uses-feature</span> <span class="na">android:name=</span><span class="s">"android.hardware.camera"</span> <span class="na">android:required=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;uses-feature</span> <span class="na">android:name=</span><span class="s">"android.hardware.camera.flash"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;uses-feature</span> <span class="na">android:name=</span><span class="s">"android.hardware.camera.autofocus"</span> <span class="na">android:required=</span><span class="s">"false"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/manifest&gt;</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<h4 id="6-add-a-scan-view">6. Add a Scan View</h4>

<ul>
<li>Open the Main.axml file in your Resources/Layout node.</li>
<li>Switch from the <code class="prettyprint">Design</code> tab to the <code class="prettyprint">Source</code> tab.</li>
<li>Edit the XML Code as shown in the code example</li>
</ul>

<blockquote>
<p>The XML code should look somewhat like this</p>
</blockquote>
<pre class="highlight xml"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span>
    <span class="na">android:layout_width=</span><span class="s">"fill_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"fill_parent"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;Button</span>
        <span class="na">android:id=</span><span class="s">"@+id/MyButton"</span>
        <span class="na">android:layout_width=</span><span class="s">"fill_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
        <span class="na">android:text=</span><span class="s">"@string/Hello"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<blockquote>
<p>Remove the button and add a scan view instead. Edit the XML code as follows:</p>
</blockquote>
<pre class="highlight xml"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:orientation=</span><span class="s">"vertical"</span>
    <span class="na">android:layout_width=</span><span class="s">"fill_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"fill_parent"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;at.nineyards.anyline.modules.barcode.BarcodeScanView</span>
        <span class="na">android:id=</span><span class="s">"@+id/AnylineScanView"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<p>If you switch back from to the <code class="prettyprint">Design</code> tab, the user interface should look like this:</p>

<p><img alt="XamarinAndroidDesign" src="images/xamarinAndroidDesign.png" /></p>

<p>You now have added a Barcode scan view to your activity. However, depending on which scanning type you want to implement, choose one of these module-specific views:</p>

<ul>
<li>Barcode scanning: 

<ul>
<li>at.nineyards.anyline.modules.barcode.BarcodeScanView</li>
</ul></li>
<li>Energy meter scanning:

<ul>
<li>at.nineyards.anyline.modules.energy.EnergyScanView</li>
</ul></li>
<li>MRZ and passport scanning:

<ul>
<li>at.nineyards.anyline.modules.mrz.MrzScanView</li>
</ul></li>
</ul>

<p>Because we named the element &ldquo;AnylineScanview&rdquo; (<code class="prettyprint">android:id=&quot;@+id/AnylineScanView&quot;</code> in the XML code), this element is added automatically to the Resource.Designer.cs class when the project is being built. </p>

<h4 id="7-provide-a-configuration-to-the-scan-view">7. Provide a configuration to the scan view</h4>

<p>You can adapt your scan view easily by either adding a .json file or using XML-attributes in the layout file (e.g. Main.axml).
In this example, let&rsquo;s create a .json file and fill it with properties:</p>

<p>Visual Studio:</p>

<ul>
<li>In your Assets treenode, right-click on the folder and select <code class="prettyprint">Add</code> &gt; <code class="prettyprint">New Item..</code></li>
<li>Choose <code class="prettyprint">Visual C#</code> &gt; <code class="prettyprint">Text File</code> and name it &ldquo;scanConfig.json&rdquo;</li>
</ul>

<p>Xamarin Studio:</p>

<ul>
<li>In your Assets treenode, right-click on the folder and select <code class="prettyprint">Add</code> &gt; <code class="prettyprint">New File...</code></li>
<li>Choose <code class="prettyprint">Misc</code> &gt; <code class="prettyprint">Empty Text File</code> and name it &ldquo;scanConfig.json&rdquo;</li>
</ul>

<p>Make sure that the build action for this file is <code class="prettyprint">AndroidAsset</code>.</p>

<p>Now open the file and paste the code from the following example</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"captureResolution"</span><span class="p">:</span><span class="s2">"720p"</span><span class="p">,</span><span class="w">

  </span><span class="nt">"cutout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"maxWidthPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80%"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"top_half"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ratioFromSize"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"00AFFE"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outerColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outerAlpha"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"flash"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bottom_right"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"beepOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"vibrateOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"blinkAnimationOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cancelOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h6 id="newline">&NewLine;</h6>

<p>Follow <a href="#anyline-config">this guide</a> for detailed information about the configuration.</p>

<h4 id="8-implement-the-scan-view">8. Implement the scan view</h4>

<p>Now we are ready to implement the scan view in our activity. Add a <code class="prettyprint">using</code> statement for our module-specific scan view in our <code class="prettyprint">MainActivity.cs</code>.</p>
<pre class="highlight csharp"><code><span class="c1">// for barcode scanning
</span><span class="k">using</span> <span class="nn">AT.Nineyards.Anyline.Modules.Barcode</span><span class="p">;</span>

<span class="c1">// for energy meter scanning
</span><span class="k">using</span> <span class="nn">AT.Nineyards.Anyline.Modules.Energy</span><span class="p">;</span>

<span class="c1">// for MRZ scanning
</span><span class="k">using</span> <span class="nn">AT.Nineyards.Anyline.Modules.MRZ</span><span class="p">;</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<p>Have a look at the code outline of our activity in the following code example:</p>

<blockquote>
<p>Activity outline</p>
</blockquote>
<pre class="highlight csharp"><code><span class="k">namespace</span> <span class="nn">AnylineExampleAndroid</span>
<span class="p">{</span>
    <span class="p">[</span><span class="nf">Activity</span><span class="p">(</span><span class="n">Label</span> <span class="p">=</span> <span class="s">"AnylineExampleAndroid"</span><span class="p">,</span> <span class="n">MainLauncher</span> <span class="p">=</span> <span class="k">true</span><span class="p">,</span> <span class="n">Icon</span> <span class="p">=</span> <span class="s">"@drawable/icon"</span><span class="p">)]</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="n">Activity</span>
    <span class="p">{</span>
        <span class="c1">// A member variable that is our scan view
</span>        <span class="n">BarcodeScanView</span> <span class="n">scanView</span><span class="p">;</span>

        <span class="c1">// Setup our scan view here
</span>        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">bundle</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

        <span class="c1">// If the application state passes from "Resumed" to "Paused", this method is invoked
</span>        <span class="c1">// scanView.CancelScanning(); and scanView.ReleaseCameraInBackground(); should be called here
</span>        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnPause</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

        <span class="c1">// This method is invoked if the application state changes from "Paused" or "Started" to "Resumed"
</span>        <span class="c1">// scanView.StartScanning(); should be called here
</span>        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnResume</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

        <span class="c1">// If the back-button is pressed, invoke this method
</span>        <span class="c1">// To close your application, call the Finish(); method here
</span>        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnBackPressed</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<p>The following methods have to be implemented in order to use the scan view:</p>

<ul>
<li>in <code class="prettyprint">OnCreate</code> we&rsquo;ll set up our scan view, load a configuration and initialize it with the license key that we generated earlier.</li>
</ul>

<blockquote>
<p>OnCreate</p>
</blockquote>
<pre class="highlight csharp"><code><span class="c1">// Setup our scan view here
</span><span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnCreate</span><span class="p">(</span><span class="n">Bundle</span> <span class="n">bundle</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">base</span><span class="p">.</span><span class="nf">OnCreate</span><span class="p">(</span><span class="n">bundle</span><span class="p">);</span>

    <span class="c1">// Set our view from the "main" layout resource
</span>    <span class="nf">SetContentView</span><span class="p">(</span><span class="n">Resource</span><span class="p">.</span><span class="n">Layout</span><span class="p">.</span><span class="n">Main</span><span class="p">);</span>

    <span class="c1">// allocate the element we defined earlier in our Main.axml
</span>    <span class="n">scanView</span> <span class="p">=</span> <span class="n">FindViewById</span><span class="p">&lt;</span><span class="n">BarcodeScanView</span><span class="p">&gt;(</span><span class="n">Resource</span><span class="p">.</span><span class="n">Id</span><span class="p">.</span><span class="n">AnylineScanView</span><span class="p">);</span>

    <span class="c1">// Load config from the .json file
</span>    <span class="c1">// We don't need this, if we define our configuration in the XML code
</span>    <span class="n">scanView</span><span class="p">.</span><span class="nf">SetConfigFromAsset</span><span class="p">(</span><span class="s">"scanConfig.json"</span><span class="p">);</span>

    <span class="c1">// Initialize with our license key and our result listener
</span>    <span class="c1">// Important: use the license key for your app package
</span>    <span class="n">scanView</span><span class="p">.</span><span class="nf">InitAnyline</span><span class="p">(&lt;</span><span class="n">INSERT</span> <span class="n">YOUR</span> <span class="n">LICENSE</span> <span class="n">KEY</span> <span class="n">HERE</span><span class="p">&gt;,</span> <span class="k">this</span><span class="p">);</span>

    <span class="c1">// Don't stop scanning when a result is found
</span>    <span class="n">scanView</span><span class="p">.</span><span class="nf">SetCancelOnResult</span><span class="p">(</span><span class="k">false</span><span class="p">);</span>

    <span class="c1">// Register event that shows if the camera is initialized
</span>    <span class="n">scanView</span><span class="p">.</span><span class="n">CameraOpened</span> <span class="p">+=</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span> 
        <span class="n">Log</span><span class="p">.</span><span class="nf">Debug</span><span class="p">(</span><span class="s">"Camera"</span><span class="p">,</span> <span class="s">"Camera opened successfully. Frame resolution "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="n">Width</span> <span class="p">+</span> <span class="s">" x "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="n">Height</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="c1">// Register event that shows if the camera returns an error
</span>    <span class="n">scanView</span><span class="p">.</span><span class="n">CameraError</span> <span class="p">+=</span> <span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="n">Log</span><span class="p">.</span><span class="nf">Error</span><span class="p">(</span><span class="s">"Camera"</span><span class="p">,</span> <span class="s">"OnCameraError: "</span> <span class="p">+</span> <span class="n">e</span><span class="p">.</span><span class="n">Event</span><span class="p">.</span><span class="n">Message</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<aside class="notice">
<b>InitAnyline</b> takes the license key and a module-specific result listener as arguments. A convenient way is to store the license key in a <b>const String</b> and let the activity implement the interface of the result listener, then passing <b>this</b> as second argument.
</aside>

<h6 id="newline">&NewLine;</h6>

<ul>
<li>In <code class="prettyprint">OnResume</code>, we finally start scanning.</li>
</ul>

<blockquote>
<p>OnResume</p>
</blockquote>
<pre class="highlight csharp"><code><span class="c1">// This method is invoked if the application state changes from "Paused" or "Started" to "Resumed"
</span><span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnResume</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">base</span><span class="p">.</span><span class="nf">OnResume</span><span class="p">();</span>
    <span class="n">scanView</span><span class="p">.</span><span class="nf">StartScanning</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<h4 id="9-handle-results">9. Handle Results</h4>

<p>Each of the Anyline modules uses a module-specific scan view that uses the camera of your mobile device and provides real-time scan results via a module-specific listener.</p>

<p>The easiest way to make use of that listener is to implement the interface of the listener in your scan activity like this:</p>

<blockquote>
<p>Implement a Result Listener depending on the module (IBarcodeResultListener, IEnergyResultListener or IMrzResultListener)</p>
</blockquote>
<pre class="highlight csharp"><code><span class="na">[Activity(Label = "AnylineExampleAndroid", MainLauncher = true, Icon = "@drawable/icon")]</span>
<span class="k">public</span> <span class="k">class</span> <span class="nc">MainActivity</span> <span class="p">:</span> <span class="n">Activity</span><span class="p">,</span> <span class="n">IBarcodeResultListener</span> <span class="c1">// or any other module-specific listener, depending on your scan module
</span><span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<p>The interface can be implemented by right-clicking on the ResultListener Interface and selecting <code class="prettyprint">Implement Interface</code>. A method will be generated that is called each time our scan view is scanning and reporting a result.</p>

<blockquote>
<p>OnResult of the Barcode ResultListener</p>
</blockquote>
<pre class="highlight csharp"><code><span class="c1">// Each time, a result is found, this method is invoked
</span><span class="k">public</span> <span class="k">void</span> <span class="nf">OnResult</span><span class="p">(</span><span class="kt">string</span> <span class="n">result</span><span class="p">,</span> <span class="n">AT</span><span class="p">.</span><span class="n">Nineyards</span><span class="p">.</span><span class="n">Anyline</span><span class="p">.</span><span class="n">Models</span><span class="p">.</span><span class="n">AnylineImage</span> <span class="n">resultImage</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Show a short Toast message if a result is found
</span>    <span class="n">Toast</span><span class="p">.</span><span class="nf">MakeText</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">result</span><span class="p">,</span> <span class="n">ToastLength</span><span class="p">.</span><span class="n">Short</span><span class="p">).</span><span class="nf">Show</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<p>&nbsp;</p>

<h4 id="10-test-your-app-on-an-android-device">10. Test your app on an Android device</h4>

<p>Build your project and deploy your application on your Android device. For module-specific documentation, please check <a href="#modules">this section</a> for more information. </p>

<h4 id="11-enjoy-scanning-and-have-fun">11. Enjoy scanning and have fun :)</h4>

<h2 id="xamarin-ios">Xamarin.iOS</h2>

<p>The Anyline Xamarin SDK provides the functionality of our iOS SDK in C# to make iOS integration in Xamarin as easy as possible. This section provides a step-by-step guide to set up a Xamarin.iOS project in Visual Studio and start scanning right away!</p>

<h3 id="requirements">Requirements</h3>

<p>To use the Anyline SDK for Xamarin.iOS you need:</p>

<ul>
<li>A Xamarin account (For Visual Studio, you need at least a Xamarin business account. Check out the <a href="https://xamarin.com/">Xamarin website</a> for detailed information.)</li>
<li>An Anyline license which you can generate <a href="http://portal.anyline.io/">here</a> after purchasing our SDK in the <a href="https://www.anyline.io/store/">store</a>.</li>
<li>An iOS device

<ul>
<li>Minimum iOS 7.0</li>
<li>Minimum iPhone4s</li>
</ul></li>
<li>A Mac Build Host (Windows Only - For more information, please check out <a href="http://developer.xamarin.com/guides/ios/getting_started/installation/windows/">this guide</a> on how to install Xamarin.iOS on Windows.</li>
<li>An Apple developer account and your device set up for development: Please check out <a href="http://developer.xamarin.com/guides/ios/getting_started/installation/device_provisioning/">this guide</a> for detailed information.</li>
</ul>

<p>The iOS bundle contains the following parts:</p>

<ul>
<li><strong>AnylineXamarinSDK.iOS.dll:</strong> contains the Anyline SDK Library</li>
<li><strong>AnylineResources.bundle:</strong> contains the necessary resources for your project</li>
<li><strong>AnylineXamarinApp.iOS:</strong> contains a simple app where each module is implemented - it can be installed right away</li>
<li><strong>LICENSE:</strong> third party license agreements</li>
<li><strong>README:</strong> contains a quick start - setup</li>
</ul>

<h3 id="quick-start-xamarin-ios-setup">Quick Start Xamarin iOS - Setup</h3>

<p>In this section we will go through the basic process of creating and configuring a simple Anyline scanning application in Xamarin.iOS. If you are not yet familiar with Xamarin.iOS, follow <a href="https://developer.xamarin.com/guides/ios/getting_started/">this</a> guide to develop an understanding of the fundamentals of iOS application development with Xamarin.</p>

<h4 id="1-create-a-new-xamarin-ios-project">1. Create a new Xamarin.iOS Project</h4>

<p>In Visual Studio, click <code class="prettyprint">File</code> &gt; <code class="prettyprint">New Project...</code>, select <code class="prettyprint">Visual C#</code> &gt; <code class="prettyprint">iOS</code> &gt; <code class="prettyprint">iPhone</code> and create a new Single View App for iPhone.</p>

<p><img alt="XamariniOSCreate" src="images/xamariniOSCreate.png" /></p>

<p>Make sure your build host is up and running and pair Visual Studio with the build host. If you have any troubles with this step, please refer to <a href="https://developer.xamarin.com/guides/ios/getting_started/installation/windows/troubleshooting/">this guide</a>.</p>

<h6 id="newline">&NewLine;</h6>

<h4 id="2-generate-license-key">2. Generate license key</h4>

<p>To generate a license key for your application, refer to the <code class="prettyprint">bundle identifier</code> of your Xamarin.iOS project and follow this <a href="#obtaining-an-anyline-sdk-license-key">guide</a> to get a valid license key.</p>

<p><img alt="XamariniOSBundle" src="images/xamariniOSBundle.png" /></p>

<h4 id="3-add-anyline-sdk">3. Add Anyline SDK</h4>

<p>In the project view, right-click on the <code class="prettyprint">References</code> node, select <code class="prettyprint">Add Reference...</code> and locate the <code class="prettyprint">AnylineXamarinSDK.iOS.dll</code>.</p>

<p>When added, the SDK should be visible in the solution explorer and look like this:</p>

<p><img alt="XamariniOSSDK" src="images/xamariniOSSDK.png" /></p>

<h6 id="newline">&NewLine;</h6>

<h4 id="4-add-anylineresources-bundle">4. Add AnylineResources.bundle</h4>

<p>Simply drag and drop the AnylineResources.bundle folder into the <code class="prettyprint">Resources</code> node of your project. The project structure should now look like this:</p>

<p><img alt="XamariniOSResource" src="images/xamariniOSResource.png" /></p>

<h6 id="newline">&NewLine;</h6>

<h6 id="newline">&NewLine;</h6>

<h4 id="5-implement-the-anyline-scan-view">5. Implement the Anyline Scan View</h4>

<p>Since we created a Single View App, Visual Studio automatically created a Storyboard and a View Controller for us. By default, the Storyboard is named <code class="prettyprint">MainStoryboard.storyboard</code> and the View Controller is named <code class="prettyprint">RootViewController</code>.</p>

<p>Let&rsquo;s have a look at the code structure of the <code class="prettyprint">RootViewController</code>.</p>

<ul>
<li>In <em>ViewDidLoad</em>, we set up the Scan View and add it to the View of the ViewController.</li>
<li>In <em>ViewDidAppear</em>, we start scanning for results.</li>
<li>In <em>ViewWillDissapear</em>, we stop scanning.</li>
<li>In <em>ViewDidDissapear</em>, we unregister any event handlers and dispose/remove our Scan View so there are no circular dependencies left.</li>
</ul>

<blockquote>
<p>RootViewController.cs</p>
</blockquote>
<pre class="highlight csharp"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Drawing</span><span class="p">;</span>

<span class="k">using</span> <span class="nn">Foundation</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UIKit</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">AnylineExampleiOS</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">RootViewController</span> <span class="p">:</span> <span class="n">UIViewController</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="nf">RootViewController</span><span class="p">(</span><span class="n">IntPtr</span> <span class="n">handle</span><span class="p">)</span> <span class="p">:</span> <span class="k">base</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">DidReceiveMemoryWarning</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ViewDidLoad</span><span class="p">()</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ViewWillAppear</span><span class="p">(</span><span class="kt">bool</span> <span class="n">animated</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ViewDidAppear</span><span class="p">(</span><span class="kt">bool</span> <span class="n">animated</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ViewWillDisappear</span><span class="p">(</span><span class="kt">bool</span> <span class="n">animated</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ViewDidDisappear</span><span class="p">(</span><span class="kt">bool</span> <span class="n">animated</span><span class="p">)</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<p>To access the classes and methods of the Anyline SDK, simply add the following <code class="prettyprint">using</code> statement.</p>
<pre class="highlight csharp"><code><span class="k">using</span> <span class="nn">AnylineXamarinSDK.iOS</span><span class="p">;</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<h6 id="newline">&NewLine;</h6>

<h5 id="create-and-set-up-a-scan-view">Create and set up a Scan View</h5>

<p>There are three module-specific Scan Views available:</p>

<ul>
<li><strong>AnylineBarcodeModuleView</strong> for barcode scanning</li>
<li><strong>AnylineEnergyModuleView</strong> for power meter and gas meter scanning</li>
<li><strong>AnylineMRZModuleView</strong> for MRZ and passport scanning</li>
</ul>

<p>In this example, we implement <em>Barcode</em> scanning.</p>

<ul>
<li><p>Create a member variable <code class="prettyprint">scanView</code> of the type of the module-specific view that you want to implement. </p>

<p>In this case: <code class="prettyprint">AnylineBarcodeModuleView scanView;</code></p></li>
<li><p>Have a look at the <code class="prettyprint">ViewDidLoad</code> method on how to setup the Scan View.</p>

<p>Basically, a new instance of our module-specific view (in this case: <em>AnylineBarcodeModuleView</em>) is created and a frame in which the view is rendered is delivered.</p></li>
<li><p><code class="prettyprint">SetupWithLicenseKey</code> is called with the following parameters:</p>

<ul>
<li>The license key of <strong>your</strong> personal bundle identifier</li>
<li>The delegate that will listen to the results (in this case: the <code class="prettyprint">RootViewController</code>, because we&rsquo;ll let it implement the delegate of our module-specific view)</li>
<li>An error which is filled with an error description if the setup fails (for example, when the license key is wrong).</li>
</ul>

<p>If anything goes wrong in the setup, the error description is presented to the user in form of an alert view.</p></li>
<li><p>Finally, the scan view is added as a subview of our <code class="prettyprint">RootViewController.View</code></p></li>
</ul>
<pre class="highlight csharp"><code><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ViewDidLoad</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">base</span><span class="p">.</span><span class="nf">ViewDidLoad</span><span class="p">();</span>

    <span class="c1">//initialize the scan view with a frame
</span>    <span class="n">scanView</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">AnylineBarcodeModuleView</span><span class="p">(</span><span class="n">UIScreen</span><span class="p">.</span><span class="n">MainScreen</span><span class="p">.</span><span class="n">Bounds</span><span class="p">);</span>

    <span class="c1">//setup the scan view with your license key, the delegate (this) that handles the results and store any possible error in a variable
</span>    <span class="n">NSError</span> <span class="n">error</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">success</span> <span class="p">=</span> <span class="n">scanView</span><span class="p">.</span><span class="nf">SetupWithLicenseKey</span><span class="p">(</span><span class="s">"YOUR LICENSE KEY HERE"</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="k">out</span> <span class="n">error</span><span class="p">);</span>

    <span class="c1">//show an alert if something went wrong
</span>    <span class="k">if</span> <span class="p">(!</span><span class="n">success</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">UIAlertView</span><span class="p">(</span><span class="s">"Error"</span><span class="p">,</span> <span class="n">error</span><span class="p">.</span><span class="n">DebugDescription</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s">"OK"</span><span class="p">,</span> <span class="k">null</span><span class="p">).</span><span class="nf">Show</span><span class="p">();</span>
    <span class="p">}</span>

    <span class="c1">// After the setup is done we add the module to the view of this view controller
</span>    <span class="n">View</span><span class="p">.</span><span class="nf">AddSubview</span><span class="p">(</span><span class="n">scanView</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<p>In the <code class="prettyprint">ViewDidAppear</code> method, we&rsquo;ll tell the SDK to start scanning</p>
<pre class="highlight csharp"><code><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ViewDidAppear</span><span class="p">(</span><span class="kt">bool</span> <span class="n">animated</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">base</span><span class="p">.</span><span class="nf">ViewDidAppear</span><span class="p">(</span><span class="n">animated</span><span class="p">);</span>
    <span class="cm">/*
     This is the place where we tell Anyline to start receiving and displaying images from the camera.
     Success/error tells us if everything went fine.
     */</span>
    <span class="n">NSError</span> <span class="n">error</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="n">success</span> <span class="p">=</span> <span class="n">scanView</span><span class="p">.</span><span class="nf">StartScanningAndReturnError</span><span class="p">(</span><span class="k">out</span> <span class="n">error</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(!</span><span class="n">success</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Something went wrong. The error object contains the error description
</span>        <span class="k">new</span> <span class="nf">UIAlertView</span><span class="p">(</span><span class="s">@"Start Scanning Error"</span><span class="p">,</span> <span class="n">error</span><span class="p">.</span><span class="n">DebugDescription</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s">"OK"</span><span class="p">,</span> <span class="k">null</span><span class="p">).</span><span class="nf">Show</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<h4 id="6-handle-scan-results">6. Handle Scan Results</h4>

<p>To handle scan results, our <code class="prettyprint">RootViewController</code> has to implement the interface of a module-specific view delegate. Simply modify the class header signature as shown in the code.</p>
<pre class="highlight csharp"><code><span class="c1">// for barcode scans, implement IAnylineBarcodeModuleDelegate
</span><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">RootViewController</span> <span class="p">:</span> <span class="n">UIViewController</span><span class="p">,</span> <span class="n">IAnylineBarcodeModuleDelegate</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="c1">// for energy meter scans, implement IAnylineEnergyModuleDelegate
</span><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">RootViewController</span> <span class="p">:</span> <span class="n">UIViewController</span><span class="p">,</span> <span class="n">IAnylineEnergyModuleDelegate</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>

<span class="c1">// for MRZ and passport scans, implement IAnylineMRZModuleDelegate
</span><span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">RootViewController</span> <span class="p">:</span> <span class="n">UIViewController</span><span class="p">,</span> <span class="n">IAnylineMRZModuleDelegate</span>
<span class="p">{</span>
    <span class="p">...</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<p>Right-click on the interface and choose <code class="prettyprint">Implement Interface</code> &gt; <code class="prettyprint">Implement Interface</code>.</p>

<p><img alt="XamariniOSInterface" src="images/xamariniOSInterface.png" /></p>

<p>Visual Studio automatically generates the <code class="prettyprint">DidFindScanResult</code> method of the module-specific delegate. This method is called every time a result is found.</p>

<p>The following code shows an implementation where the result is presented in an <code class="prettyprint">UIAlertView</code>.</p>
<pre class="highlight csharp"><code><span class="k">public</span> <span class="k">void</span> <span class="nf">DidFindScanResult</span><span class="p">(</span><span class="n">AnylineBarcodeModuleView</span> <span class="n">anylineBarcodeModuleView</span><span class="p">,</span> <span class="kt">string</span> <span class="n">scanResult</span><span class="p">,</span> <span class="n">UIImage</span> <span class="n">image</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">new</span> <span class="nf">UIAlertView</span><span class="p">(</span><span class="s">@"Result"</span><span class="p">,</span> <span class="n">scanResult</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s">"OK"</span><span class="p">,</span> <span class="k">null</span><span class="p">).</span><span class="nf">Show</span><span class="p">();</span>    
<span class="p">}</span>
</code></pre>

<aside class="notice">
Because barcode scanning is too fast, the <b>DidFindScanResult</b> event is not fired when the same barcode is scanned again, even if <b>scanView.CancelOnResult</b> is set to false.
</aside>

<h6 id="newline">&NewLine;</h6>

<h4 id="7-a-few-more-things-gotchas">7. A few more things / gotchas</h4>

<ul>
<li><p>Always make sure that scanning is stopped before the view appears.</p></li>
<li><p>If you use a <strong>community edition license</strong> you are not allowed to place any visual element over the Anyline watermark while scanning. We will give you a friendly exception if you try to do so. Please <a href="https://www.anyline.io/support-request/">contact</a> us, if you need to draw over the scanning view.</p></li>
<li><p>Xamarins Garbage Collector may not be able to collect all garbage, which means that there might be memory leaks if there are any dependencies left in the <code class="prettyprint">ViewController</code>. Therefore, make sure that all registered events are unregistered and all subviews are removed from the ViewController view and disposed.</p></li>
</ul>

<blockquote>
<p>ViewWillDisappear</p>
</blockquote>
<pre class="highlight csharp"><code><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ViewWillDisappear</span><span class="p">(</span><span class="kt">bool</span> <span class="n">animated</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">base</span><span class="p">.</span><span class="nf">ViewWillDisappear</span><span class="p">(</span><span class="n">animated</span><span class="p">);</span>

    <span class="c1">// We have to stop scanning before the view dissapears
</span>    <span class="n">error</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(!</span><span class="n">scanResult</span><span class="p">.</span><span class="nf">CancelScanningAndReturnError</span><span class="p">(</span><span class="k">out</span> <span class="n">error</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="p">(</span><span class="n">alert</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">UIAlertView</span><span class="p">(</span><span class="s">"Error"</span><span class="p">,</span> <span class="n">error</span><span class="p">.</span><span class="n">DebugDescription</span><span class="p">,</span> <span class="k">null</span><span class="p">,</span> <span class="s">"OK"</span><span class="p">,</span> <span class="k">null</span><span class="p">)).</span><span class="nf">Show</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p>ViewDidDisappear</p>
</blockquote>
<pre class="highlight csharp"><code><span class="k">public</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">ViewDidDisappear</span><span class="p">(</span><span class="kt">bool</span> <span class="n">animated</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">base</span><span class="p">.</span><span class="nf">ViewDidDisappear</span><span class="p">(</span><span class="n">animated</span><span class="p">);</span>

    <span class="c1">//un-register any event handlers here, if you have any
</span>
    <span class="c1">//we have to erase the scan view so that there are no dependencies for the viewcontroller left.
</span>    <span class="n">scanResult</span><span class="p">.</span><span class="nf">RemoveFromSuperview</span><span class="p">();</span>
    <span class="n">scanResult</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span>
    <span class="n">scanResult</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>

    <span class="k">base</span><span class="p">.</span><span class="nf">Dispose</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>

<h6 id="newline">&NewLine;</h6>

<h4 id="8-test-your-app-on-an-ios-device">8. Test your app on an iOS device</h4>

<p>Build your project and deploy your application on your iOS device. Make sure you choose your storyboard and an adequate deployment target in your Info.plist (&gt;= 7.1 - but not higher than your device target).</p>

<aside class="notice">
<b>Important: </b> Make sure that you added additional mtouch options <b>-gcc_flags -all_load</b> in the iOS Build settings! Also ensure that you have selected <b>Link all assemblies</b> in the Linker Options! Otherwise, the build will fail!
</aside>

<p>For module-specific documentation, please check <a href="#modules">this section</a> for more information. </p>

<h4 id="9-enjoy-scanning-and-have-fun">9. Enjoy scanning and have fun :)</h4>

<h6 id="newline">&NewLine;</h6>

<h2 id="xamarin-winphone">Xamarin.WinPhone</h2>

<p>Anyline will be available Windows Phone by the end of Q1 2016.</p>

          <p><a name="configuration"> </a></p>

<h1 id="configuration">Configuration</h1>

<p>This section describes how to configure the scan view using <a href="#anyline-config">AnylineConfig</a> files as well as how to <a href="#add-views">add views</a> without overlapping the scan cutout. </p>

<p><a name="anyline-config"> </a></p>

<h2 id="anyline-config">Anyline Config</h2>

<p>With the config file the views can be configured in regard of position and looks of the <em>cutout</em> used for scanning, as well as the behavior of flash and feedback mechanisms for scanning. This section contains a detailed description of the configurable items, as well as two distinct ways for each platform to set up and configure the view.</p>

<p><a name="configurable-parameters"> </a></p>

<h3 id="configurable-parameters">Configurable Parameters</h3>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
      </span><span class="nt">"captureResolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"720"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"pictureResolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1080"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cutout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">540</span><span class="p">,</span><span class="w">
          </span><span class="nt">"maxWidthPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80%"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"maxHeightPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80%"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"ratioFromSize"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">125</span><span class="p">,</span><span class="w">
              </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">85</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w">  
          </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
              </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"outerColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"outerAlpha"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w">
          </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FFFFFF"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"feedbackStrokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000066"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
          </span><span class="nt">"image"</span><span class="p">:</span><span class="s2">"Overlay"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"cropPadding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
              </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nt">"cropOffset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
              </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"flash"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bottom_right"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"imageOn"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ic_flash_on"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"imageOff"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ic_flash_off"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"imageAuto"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ic_flash_auto"</span><span class="p">,</span><span class="w">
          </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
                </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">-10</span><span class="w">
          </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nt">"beepOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nt">"vibrateOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"blinkAnimationOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"cancelOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nt">"visualFeedback"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RECT"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0099FF"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nt">"fillColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AA0099FF"</span><span class="p">,</span><span class="w">
            </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="nt">"redrawTimeout"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
            </span><span class="nt">"animationDuration"</span><span class="p">:</span><span class="w"> </span><span class="mi">75</span><span class="w">
      </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<ul>
<li><a href="#captureResolution">captureResolution</a>  <em>String</em></li>
<li><a href="#pictureResolution">pictureResolution</a>  <em>String</em></li>
<li><a href="#cutout">cutout</a> 

<ul>
<li><a href="#cutout_width">width</a> <em>int</em></li>
<li><a href="#cutout_maxWidthPercent">maxWidthPercent</a>  <em>String</em></li>
<li><a href="#cutout_maxHeightPercent">maxHeightPercent</a>  <em>String</em></li>
<li><a href="#cutout_ratioFromSize">ratioFromSize</a> 

<ul>
<li><a href="#cutout_ratioFromSize">width</a> <em>int</em></li>
<li><a href="#cutout_ratioFromSize">height</a>  <em>int</em><br></li>
</ul></li>
<li><a href="#cutout_alignment">alignment</a>  <em>String</em></li>
<li><a href="#cutout_offset">offset</a> 

<ul>
<li><a href="#cutout_offset">x</a>  <em>int</em></li>
<li><a href="#cutout_offset">y</a> <em>int</em></li>
</ul></li>
<li><a href="#cutout_outerColor">outerColor</a>  <em>Hex-String</em>  - format: RRGGBB</li>
<li><a href="#cutout_outerAlpha">outerAlpha</a>  <em>float</em></li>
<li><a href="#cutout_style">style</a>  <em>String</em> </li>
<li><a href="#cutout_strokeColor">strokeColor</a>  <em>Hex-String</em> - format: RRGGBB</li>
<li><a href="#cutout_feedbackStrokeColor">feedbackStrokeColor</a>  <em>Hex-String</em> - format: RRGGBB</li>
<li><a href="#cutout_strokeWidth">strokeWidth</a>  <em>int</em></li>
<li><a href="#cutout_cornerRadius">cornerRadius</a>  <em>int</em></li>
<li><a href="#cutout_image">image</a>  <em>String</em></li>
<li><a href="#cutout_cropPadding">cropPadding</a><br>

<ul>
<li><a href="#cutout_cropPadding">x</a>  <em>int</em></li>
<li><a href="#cutout_cropPadding">y</a> <em>int</em></li>
</ul></li>
<li><a href="#cutout_cropOffset">cropOffset</a><br>

<ul>
<li><a href="#cutout_cropOffset">x</a>  <em>int</em></li>
<li><a href="#cutout_cropOffset">y</a> <em>int</em></li>
</ul></li>
</ul></li>
<li><a href="#flash">flash</a> 

<ul>
<li><a href="#flash_mode">mode</a>  <em>String</em></li>
<li><a href="#flash_alignment">alignment</a>  <em>String</em></li>
<li><a href="#flash_imageOn">imageOn</a>  <em>String</em></li>
<li><a href="#flash_imageOff">imageOff</a>  <em>String</em></li>
<li><a href="#flash_imageAuto">imageAuto</a>  <em>String</em></li>
<li><a href="#flash_offset">offset</a>

<ul>
<li><a href="#cutout_cropOffset">x</a>  <em>int</em></li>
<li><a href="#cutout_cropOffset">y</a> <em>int</em></li>
</ul></li>
</ul></li>
<li><a href="#beepOnResult">beepOnResult</a>  <em>boolean</em></li>
<li><a href="#vibrateOnResult">vibrateOnResult</a>  <em>boolean</em></li>
<li><a href="#blinkAnimationOnResult">blinkAnimationOnResult</a>  <em>boolean</em></li>
<li><a href="#cancelOnResult">cancelOnResult</a>  <em>boolean</em></li>
<li><a href="#visualFeedback">visualFeedback</a>

<ul>
<li><a href="#visualFeedback_style">style</a> <em>String</em></li>
<li><a href="#visualFeedback_strokeColor">strokeColor</a> <em>Hex-String</em> - format: AARRGGBB</li>
<li><a href="#visualFeedback_strokeWidth">strokeWidth</a> <em>int</em></li>
<li><a href="#visualFeedback_fillColor">fillColor</a> <em>Hex-String</em> - format: AARRGGBB</li>
<li><a href="#visualFeedback_cornerRadius">cornerRadius</a> <em>int</em></li>
<li><a href="#visualFeedback_animation">animation</a> <em>String</em></li>
<li><a href="#visualFeedback_animationDuration">animationDuration</a> <em>int</em></li>
<li><a href="#visualFeedback_redrawTimeout">redrawTimeout</a> <em>int</em>  (DEPRECATED)</li>
</ul></li>
</ul>

<p><a name="captureResolution"> </a></p>

<h5 id="captureresolution">captureResolution</h5>

<p>The resolution of the preview frame.</p>

<p><strong>Possible values:</strong></p>

<table><thead>
<tr>
<th>value</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>1080p</td>
<td>use 1920x1080 as preferred preview size</td>
</tr>
<tr>
<td>720p</td>
<td>use 1280x720 as preferred preview size</td>
</tr>
<tr>
<td>480p</td>
<td>use 480x854 as preferred preview size</td>
</tr>
</tbody></table>

<ul>
<li>The p is optional. </li>
<li>The defined capture resolution is just the preferred resolution. If this resolution is not available the resolution that best fits inside the desired resolution should be used.</li>
</ul>

<aside class="notice">
<b>Android specific</b>
<br/>
The capture resolution is more like a suggestion, because the available preview resolutions vary from device to device. 
If the preferred resolution is available, it is used. Otherwise the highest available resolution smaller than the desired value is used.
</aside>

<p><a name="pictureResolution"> </a></p>

<h5 id="pictureresolution">pictureResolution</h5>

<p>The resolution of the full picture taken from the camera (optional). This parameter is only of interest when using the <a href="#document">Document</a> module.</p>

<p><strong>Possible values:</strong></p>

<table><thead>
<tr>
<th>value</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>1280</td>
<td>use 1280 as the minimum picture resolution</td>
</tr>
<tr>
<td>1080</td>
<td>use 1080 as the minumum picture resolution</td>
</tr>
<tr>
<td>&hellip;</td>
<td>and so on</td>
</tr>
</tbody></table>

<ul>
<li>The p is optional (and only accepted for convenience). </li>
<li>The defined picture resolution is just the preferred minimal picture resolution.<br></li>
</ul>

<aside class="notice">
<b>Android specific</b>
<br/>
The picture resolution is more like a suggestion, because the available picture resolutions vary from device to device. 
If the preferred resolution is available, it is used. Otherwise the lowest available resolution bigger than the desired value is used.
</aside>

<aside class="notice">
<b>iOS specific</b>
<br/>
The highest possible resolution for iOS is 1080. However if you specify a higher value for picture resolution we will return a high resolution photo of the found document as result. Therefore it is also possible to specify &ldquo;photo&rdquo; as value if you want to get a high resolution result.
</aside>

<p><a name="cutout"></a></p>

<h5 id="cutout">cutout</h5>

<p>This section contains all the settings for the overlay/cutout.</p>

<p><a name="cutout_width"></a></p>

<h5 id="width">width</h5>

<p>Specifies an exact desired pixel width (pixels in the frame, not on the display). If this is bigger than the width of the view, it will be limited to the view&rsquo;s width. </p>

<p>E.g. Android devices may have a 720p preview but only a 540p wide display. If a width of 600 is specified, the cutout will still only be 540. </p>

<ul>
<li><strong>Type:</strong>         int</li>
<li><strong>Default:</strong>      none</li>
</ul>

<p><a name="cutout_maxWidthPercent"></a></p>

<h5 id="maxwidthpercent">maxWidthPercent</h5>

<p>Specifies the maximum width of the cutout in percent.</p>

<p>This is the desired width if the &lsquo;width&rsquo; parameter is not used.</p>

<ul>
<li><strong>Type:</strong>         String</li>
<li><strong>Format:</strong>       ###%</li>
<li><strong>Range:</strong>        1% - 100%</li>
<li><strong>Default:</strong>      100%</li>
</ul>

<p><a name="cutout_maxHeightPercent"></a></p>

<h5 id="maxheightpercent">maxHeightPercent</h5>

<p>Specify the maximum height of the cutout in %.</p>

<ul>
<li><strong>Type:</strong>         String</li>
<li><strong>Format:</strong>       ###%</li>
<li><strong>Range:</strong>        1% - 100%</li>
<li><strong>Default:</strong>      100%</li>
</ul>

<aside class="notice">
<b>Why width, maxWidth and maxHeight but no height?</b>
<br/>
The form of the cutout can be defined by the ratio, so there is no direct need for width AND height parameter.
But if there is only one width parameter where % or pixel value is allowed, it is not possible to limit the height to a certain percentage.
That limits the usability in landscape mode quite a bit.
</aside>

<p><a name="cutout_ratioFromSize"></a></p>

<h5 id="ratiofromsize">ratioFromSize</h5>

<p>The ratio of the cutout can be defined by just setting this parameters width and height to the size of the real object that should be
scanned.</p>

<p>E.g. width = 100 height = 50 is the same as width = 200 height = 100, because only the ratio matters here.</p>

<ul>
<li><strong>Type of width and height:</strong> int</li>
<li><strong>Default ratio:</strong>            1 (width = 1, height = 1)</li>
</ul>

<p><a name="cutout_alignment"></a> </p>

<h5 id="alignment">alignment</h5>

<p>The alignment of the cutout.</p>

<p><strong>Possible values:</strong></p>

<table><thead>
<tr>
<th>value</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>top</td>
<td>upper border of the cutout is at the upper border of the view</td>
</tr>
<tr>
<td>top_half</td>
<td>offsetY = (viewHeight - cutoutHeight) / 3</td>
</tr>
<tr>
<td>center</td>
<td>cutout is centered in the view vertically and horizontally</td>
</tr>
<tr>
<td>bottom</td>
<td>lower border of the cutout is at the lower border of the view</td>
</tr>
<tr>
<td>bottom_half</td>
<td>the same as top half just from below: offsetY = (viewHeight - cutoutHeight) / 3 * 2</td>
</tr>
</tbody></table>

<p><a name="cutout_offset"></a></p>

<h5 id="offset">offset</h5>

<p>Move the cutout in x and y direction by the specified pixel value. </p>

<p>Put negative values to move left or up, positive values to move right or down.</p>

<p>The offset is limited to move the cutout to the start/end of the view.</p>

<ul>
<li><strong>Type:</strong> int (pixel value = pixels in the frame, not on the display)</li>
</ul>

<p><a name="cutout_outerColor"></a></p>

<h5 id="outercolor">outerColor</h5>

<p>The color of the area outside the cutout.</p>

<ul>
<li><strong>Type:</strong> Hex-String </li>
<li><strong>Format:</strong> RRGGBB</li>
</ul>

<p><a name="cutout_outerAlpha"></a></p>

<h5 id="outeralpha">outerAlpha</h5>

<p>The alpha value for the color outside of the cutout.</p>

<ul>
<li><strong>Type:</strong> float</li>
<li><strong>Range:</strong> 0-1 

<ul>
<li>0 = view is completely transparent</li>
<li>1 = view is completely opaque</li>
</ul></li>
</ul>

<p><a name="cutout_style"></a></p>

<h5 id="style">style</h5>

<p>The style parameter can either be rect or image. </p>

<p><em>rect</em></p>
<pre class="highlight java"><code><span class="s">"style"</span><span class="o">:</span> <span class="s">"rect"</span><span class="o">,</span>
<span class="s">"strokeWidth"</span><span class="o">:</span> <span class="mi">2</span><span class="o">,</span>
<span class="s">"strokeColor"</span><span class="o">:</span> <span class="s">"FFFFFF"</span><span class="o">,</span>
<span class="s">"cornerRadius"</span><span class="o">:</span> <span class="mi">4</span><span class="o">,</span>
</code></pre>

<p>In this case a rectangle is drawn around the cutout area. To customize the appearance of the rectangle utilize the parameters <a href="#cutout_strokeWidth">strokeWidth</a>, <a href="#cutout_strokeColor">strokeColor</a> and <a href="#cutout_cornerRadius">cornerRadius</a>.</p>

<h6 id="newline">&NewLine;</h6>

<p><em>image</em></p>
<pre class="highlight java"><code><span class="s">"style"</span><span class="o">:</span> <span class="s">"image"</span><span class="o">,</span>
<span class="s">"image"</span><span class="o">:</span> <span class="s">"image_name_without_extension"</span><span class="o">,</span>
</code></pre>

<p>With this option it is possible to display a custom image in the cutout area. Therefore it is necessary to provide an image file and place it within the <em>res/drawable</em> folder. Furthermore, you have to specify the image name without extension for the <a href="#cutout_image">image</a> parameter as can be seen in the example. </p>

<p><a name="cutout_strokeColor"> </a></p>

<h5 id="strokecolor">strokeColor</h5>

<p>The color of the stroke (used by rect or vector style).</p>

<ul>
<li><strong>Type:</strong> Hex-String </li>
<li><strong>Format:</strong> RRGGBB</li>
</ul>

<p><a name="cutout_feedbackStrokeColor"> </a></p>

<h5 id="feedbackstrokecolor">feedbackStrokeColor</h5>

<p>The color of the stroke when contours are found in the frame. When no contours are found the color of the cutout changes back to the <a href="#cutout_strokeColor">strokeColor</a>. This feedback option can be set in addition to a <a href="#visualFeedback">visualFeedback</a> style. </p>

<ul>
<li><strong>Type:</strong> Hex-String </li>
<li><strong>Format:</strong> RRGGBB</li>
</ul>

<p><a name="cutout_strokeWidth"> </a></p>

<h5 id="strokewidth">strokeWidth</h5>

<p>The thickness of the stroke in a display independent unit </p>

<ul>
<li><strong>Type:</strong> int (density-independent pixel dp)</li>
</ul>

<p><a name="cutout_cornerRadius"> </a></p>

<h5 id="cornerradius">cornerRadius</h5>

<p>The radius to round the corners of the rect (only used if type is rect).</p>

<ul>
<li><strong>Type:</strong> int (density-independent pixel dp)</li>
</ul>

<p><a name="cutout_image"> </a></p>

<h5 id="image">image</h5>

<p>The name of the image resource as string, without extension - only used if type is image.</p>

<ul>
<li><strong>Type:</strong> String</li>
</ul>

<p><a name="cutout_cropPadding"> </a></p>

<h5 id="croppadding">cropPadding</h5>

<p>Adapts the size of the cropped area from the frame. It changes the visible cutout width and height by the x or y padding.</p>

<p>Positive values mean that the crop will be smaller than the cutout.  Negative values mean that the crop will be bigger than the cutout.</p>

<p>The padding is all around the cutout so cropWidth = cutoutWidth - 2 * xPadding.</p>

<p>This should only be used in combination with a fixed width (which also fits on all supported devices), because this is a fixed value that will not be adjusted to anything.</p>

<ul>
<li><strong>Type:</strong> int (pixel value)</li>
</ul>

<p><a name="cutout_cropOffset"> </a></p>

<h5 id="cropoffset">cropOffset</h5>

<p>Move the part that is cropped out of the frame away from the visible cutout by the x and y.</p>

<p>Negative values to move left or up, positive values to move right or down.</p>

<p>This should only be used in combination with a fixed width (which also fits on all supported devices), because this is a fixed value that will not be adjusted to anything.</p>

<ul>
<li><strong>Type:</strong> int (pixel value)</li>
</ul>

<aside class="notice">
<b>Cutout and Focus</b>
<br/>
Please keep in mind that there is a relationship between the size of the cutout, and how close/far the user will hold the phone from the object. Choosing a cutout that is too large for a small object, will intuitively force the user to move closer with the phone to the object. This may result in an incorrectly set focus on some devices, as the minimal distance between the object and the camera needs to be up to ~12cm in auto-focus mode in some cases, and ~7.5cm in macro- or continuous focus mode.
</aside>

<p><a name="flash"> </a></p>

<h4 id="flash">flash</h4>

<p>Settings for a simple view that provides flash functionality. Default images for flash on/off/auto are provided, however you can use custom images as well. </p>

<aside class="notice">
<b>Epson specific</b>
<br/>
The Epson BT2000 has no flash integrated. Hence, all flash config settings will be ignored
</aside>

<p><a name="flash_mode"> </a></p>

<h5 id="mode">mode</h5>

<p>The following three possible flash modes are available:</p>

<p><strong>Possible values:</strong> </p>

<table><thead>
<tr>
<th>mode</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>none</td>
<td>flash view is not used and not visible</td>
</tr>
<tr>
<td>manual</td>
<td>flash can be toggled manually  (default is off)</td>
</tr>
<tr>
<td>auto</td>
<td>flash view also has an automatic option. But it is still required to tell the view when it should turn on the flash in auto mode. (Except for use-cases where additional abstraction is provided like the Energy-Module)</td>
</tr>
</tbody></table>

<p><a name="flash_alignment"> </a></p>

<h5 id="alignment">alignment</h5>

<p>The alignment of the flash view.</p>

<table><thead>
<tr>
<th>alignment</th>
<th>meaning</th>
</tr>
</thead><tbody>
<tr>
<td>top</td>
<td>at the top centered horizontally</td>
</tr>
<tr>
<td>top_left</td>
<td>at the top left corner</td>
</tr>
<tr>
<td>top_right</td>
<td>at the top right corner</td>
</tr>
<tr>
<td>bottom</td>
<td>at the bottom centered horizontally</td>
</tr>
<tr>
<td>bottom_left</td>
<td>at the bottom left corner</td>
</tr>
<tr>
<td>bottom_right</td>
<td>at the bottom right corner</td>
</tr>
</tbody></table>

<p><a name="flash_imageOn"> </a></p>

<h5 id="imageon">imageOn</h5>

<p>The name of the custom image resource to show when the flash is on.</p>

<p>The image will not be resized and should be provided in an appropriate size.</p>

<ul>
<li><strong>Type:</strong> String</li>
</ul>

<p><a name="flash_imageOff"> </a></p>

<h5 id="imageoff">imageOff</h5>

<p>The name of the custom image resource to show when the flash is off.</p>

<p>The image will not be resized and should be provided in an appropriate size.</p>

<ul>
<li><strong>Type:</strong> String</li>
</ul>

<p><a name="flash_imageAuto"> </a></p>

<h5 id="imageauto">imageAuto</h5>

<p>The name of the custom image resource to show when the flash is in auto mode.</p>

<p>The image will not be resized and should be provided in an appropriate size.</p>

<ul>
<li><strong>Type:</strong> String</li>
</ul>

<p><a name="flash_offset"></a></p>

<h5 id="offset">offset</h5>

<p>Move the flash button in x and y direction by the specified pixel value. </p>

<p>Positive values in x direction move the button to the right, negative values move the button to the left.
In y direction positive values move the flash button down, negative values move it up.</p>

<ul>
<li><strong>Type:</strong> int (pixel value = densitiy pixels on the display)</li>
</ul>

<h4 id="special-options-for-modules">Special options for Modules</h4>

<p>Modules can use these additional settings to configure some feedback options which should happen when a result was found.</p>

<p><a name="beepOnResult"> </a></p>

<h5 id="beeponresult">beepOnResult</h5>

<p>True, if there should be a beep when a result is found.</p>

<aside class="notice">
<b>Epson specific</b>
<br/>
The Epson BT2000 has no built-in speakers, therefore the beep will only be played when the headset is connected.
</aside>

<ul>
<li><strong>Type:</strong> boolean</li>
</ul>

<p><a name="vibrateOnResult"> </a></p>

<h5 id="vibrateonresult">vibrateOnResult</h5>

<p>True, if there should be a vibration alarm when a result is found.</p>

<aside class="notice">
<b>Epson specific</b>
<br/>
The Epson BT2000 has no vibration alarm integrated, therefore the 'vibrateOnResult&rsquo; setting will be ignored
</aside>

<ul>
<li><strong>Type:</strong> boolean</li>
</ul>

<p><a name="blinkAnimationOnResult"> </a></p>

<h5 id="blinkanimationonresult">blinkAnimationOnResult</h5>

<p>True, if the view should display a short flash of white when a result is found.</p>

<ul>
<li><strong>Type:</strong> boolean</li>
</ul>

<p><a name="cancelOnResult"> </a></p>

<h5 id="cancelonresult">cancelOnResult</h5>

<p>True, if the scanning process should be canceled when a result is found (=default setting).</p>

<p>Set to false if multiple things should be scanned immediately after each other.
If another scan may be required later, leave this value <em>true</em> and just restart the scanning process later</p>

<ul>
<li><strong>Type:</strong> boolean</li>
<li><strong>Default:</strong> true (cancel scanning when result is found)</li>
</ul>

<p><a name="visualFeedback"></a></p>

<h5 id="visualfeedback">visualFeedback</h5>

<p>This parameters define the behaviour of the visual feedback presented to the user in the cutout.
The feedback is used to present the detected symbols back to the user, which helps to improve the scanning experience and to ensure a correct positioning of the camera.</p>

<p><a name="visualFeedback_style"></a></p>

<h5 id="style">style</h5>

<p>This defines the style of visual user feedback to be used.</p>

<p>The possible values are:</p>

<table><thead>
<tr>
<th>style</th>
<th>description</th>
<th>example</th>
</tr>
</thead><tbody>
<tr>
<td>RECT</td>
<td>Displays one rectangle around all detected contours that are processed within this frame</td>
<td><img alt="RECT" src="images/visualFeedback/rect.png" /></td>
</tr>
<tr>
<td>CONTOUR_RECT</td>
<td>Draws a rectangle around each detected contour within the currently processed frame</td>
<td><img alt="CONTOUR_RECT" src="images/visualFeedback/contourrect.png" /></td>
</tr>
<tr>
<td>CONTOUR_POINT</td>
<td>Draws a point underneath each detected contour within the currently processed frame</td>
<td><img alt="CONTOUR_POINT" src="images/visualFeedback/contourpoint.png" /></td>
</tr>
<tr>
<td>CONTOUR_UNDERLINE</td>
<td>Underlines each detected contour within the currently processed frame</td>
<td><img alt="CONTOUR_UNDERLINE" src="images/visualFeedback/contourunderline.png" /></td>
</tr>
</tbody></table>

<aside class="warning">
For reasons of backward compatibility, this configuration correlates with the onTextOutlineDetected callback, as it can be seen in <a href="#anylineOcrExamples">AnylineOCR Examples</a>.<br/>If the callback returns true and no visual feedback was defined in the config, nothing will be drawn. If the callback returns true and a visualFeedback is defined, the feedback will be drawn anyways, since the feedback config was explicitly added. <br/>If the callback returns false and there is no visual feedback config, the standard RECT will be drawn. When there is a feedback config defined, the specified config will be drawn.
</aside>

<aside class="notice">
In the feedback styles <b>CONTOUR_POINT</b> and <b>CONTOUR_UNDERLINE</b> the settings for the <b><a  href="#visualFeedback_fillColor">fillColor</a></b> and <b><a href="#visualFeedback_cornerRadius">cornerRadius</a></b> will be ignored. 
 
In feedback style <b>CONTOUR_RECT</b> the setting for the <b><a href="#visualFeedback_cornerRadius">cornerRadius</a></b> will be ignored.
</aside>

<p><a name="visualFeedback_strokeColor"></a></p>

<h5 id="strokecolor">strokeColor</h5>

<p>This defines the stroke color that is used to draw the visual feedback.</p>

<ul>
<li><strong>Type:</strong> Hex-String</li>
<li><strong>Format:</strong> AARRGGBB</li>
<li><strong>Default:</strong> AA0099FF</li>
</ul>

<p><a name="visualFeedback_strokeWidth"></a></p>

<h5 id="strokewidth">strokeWidth</h5>

<p>This defines the width (in dip) of the stroke that is used to draw the visual feedback. </p>

<ul>
<li><strong>Type:</strong> int</li>
<li><strong>Default:</strong> 2</li>
</ul>

<p><a name="visualFeedback_fillColor"></a></p>

<h5 id="fillcolor">fillColor</h5>

<p>This defines the color the rectangle is filled with in <code class="prettyprint">RECT</code> and <code class="prettyprint">CONTOUR_RECT</code> style mode. This setting is ignored for feedback styles <code class="prettyprint">CONTOUR_POINT</code> and <code class="prettyprint">CONTOUR_UNDERLINE</code>.</p>

<ul>
<li><strong>Type:</strong> Hex-String </li>
<li><strong>Format:</strong> AARRGGBB</li>
<li><strong>Default:</strong> <em>Transparent</em></li>
</ul>

<p><a name="visualFeedback_cornerRadius"></a></p>

<h5 id="cornerradius">cornerRadius</h5>

<p>This defines the corner radius (in dip) of the rect in style <code class="prettyprint">RECT</code>. This setting will be ignored for all other feedback styles.</p>

<ul>
<li><strong>Type:</strong> int</li>
<li><strong>Default:</strong> The <a href="#cutout_cornerRadius">corner radius of the cutout</a></li>
</ul>

<p><a name="visualFeedback_animation"></a></p>

<h5 id="animation">animation</h5>

<aside class="notice">
This config parameter is so far Android only.
</aside>

<p><a name="visualFeedback_no_animation"></a></p>

<p>The following table shows examples for all possible animationsfor CONTOUR_POINT and CONTOUR_UNDERLINE. For all other styles this parameter will be ignored and results in a behaviour illustrated below in the <b><a href="#visualFeedback_no_animation">no animation specified</a></b> section.</p>

<blockquote>
<p>This is the example visualFeedback config for different styles and animations. Change the style/animation parameter to get the different results shown left.</p>
</blockquote>
<pre class="highlight json"><code><span class="w">  </span><span class="s2">"visualFeedback"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"animation"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pulse"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"contour_point"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"animationDuration"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0099FF"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>animation</th>
<th>CONTOUR_POINT</th>
<th>CONTOUR_UNDERLINE</th>
</tr>
</thead><tbody>
<tr>
<td>TRAVERSE_SINGLE</td>
<td><img alt="TRAVERSE_SINGLE" src="images/visualFeedback/traverse_single/contour_point.gif" /></td>
<td><img alt="TRAVERSE_SINGLE" src="images/visualFeedback/traverse_single/contour_underline.gif" /></td>
</tr>
<tr>
<td>TRAVERSE_MULTI</td>
<td><img alt="TRAVERSE_MULTI" src="images/visualFeedback/traverse_multi/contour_point.gif" /></td>
<td><img alt="TRAVERSE_MULTI" src="images/visualFeedback/traverse_multi/contour_underline.gif" /></td>
</tr>
<tr>
<td>KITT</td>
<td><img alt="KITT" src="images/visualFeedback/kitt/contour_point.gif" /></td>
<td><img alt="KITT" src="images/visualFeedback/kitt/contour_underline.gif" /></td>
</tr>
<tr>
<td>BLINK</td>
<td><img alt="BLINK" src="images/visualFeedback/blink/contour_point.gif" /></td>
<td><img alt="BLINK" src="images/visualFeedback/blink/contour_underline.gif" /></td>
</tr>
<tr>
<td>RESIZE</td>
<td><img alt="RESIZE" src="images/visualFeedback/resize/contour_point.gif" /></td>
<td><img alt="RESIZE" src="images/visualFeedback/resize/contour_underline.gif" /></td>
</tr>
<tr>
<td>PULSE</td>
<td><img alt="PULSE" src="images/visualFeedback/pulse/contour_point.gif" /></td>
<td><img alt="PULSE" src="images/visualFeedback/pulse/contour_underline.gif" /></td>
</tr>
<tr>
<td>PULSE_RANDOM</td>
<td><img alt="PULSE_RANDOM" src="images/visualFeedback/pulse_random/contour_point.gif" /></td>
<td><img alt="PULSE_RANDOM" src="images/visualFeedback/pulse_random/contour_underline.gif" /></td>
</tr>
</tbody></table>

<p><em>no animation specified</em></p>

<p>The following table illustrates an example behaviour if there is no animation specified for the four varying visual feedback styles.</p>

<blockquote>
<p>This is the example visualFeedback config for the default behaviour when no animation is specified. Change the style to get the different results shown left.</p>
</blockquote>
<pre class="highlight json"><code><span class="w">  </span><span class="s2">"visualFeedback"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"animationDuration"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0099FF"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"fillColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"440099FF"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span></code></pre>

<table><thead>
<tr>
<th>style</th>
<th>example</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>RECT</td>
<td><img alt="RECT" src="images/visualFeedback/default/rect.gif" /></td>
<td>The rect is animated from the cutout to the found text area within the specified animation time.</td>
</tr>
<tr>
<td>CONTOUR_RECT</td>
<td><img alt="CONTOUR_RECT" src="images/visualFeedback/default/contour_rect.gif" /></td>
<td>No animation. The found contour rects are drawn when found. The animation time specifies how often new contour rects are drawn. In this case the new found rects are only drawn every 100ms.</td>
</tr>
<tr>
<td>CONTOUR_POINT</td>
<td><img alt="CONTUR_POINT" src="images/visualFeedback/default/contour_point.gif" /></td>
<td>No animation. The contour points are drawn as soon as contours are found. The animation time specifies how often new contour points are drawn. In this case the new points are only drawn every 100ms.</td>
</tr>
<tr>
<td>CONTOUR_UNDERLINE</td>
<td><img alt="CONTOUR_UNDERLINE" src="images/visualFeedback/default/contour_underline.gif" /></td>
<td>No animation. The contours underlines are drawn as soon as contours are found. The animation time specifies how often new contour underlines are drawn. In this case the new underlines are only drawn every 100ms.</td>
</tr>
</tbody></table>

<p><a name="visualFeedback_animationDuration"></a></p>

<h5 id="animationduration">animationDuration</h5>

<p>Defines the duration of the animation when a rect is animated to the next detected rect. This is only used in style <code class="prettyprint">RECT</code>.</p>

<ul>
<li><strong>Type:</strong> int</li>
<li><strong>Default:</strong> 75</li>
</ul>

<p><a name="visualFeedback_redrawTimeout"></a></p>

<h5 id="redrawtimeout">redrawTimeout</h5>

<aside class="notice">
DEPRECATED: use animationDuration (with no animation specified) to get the same behaviour
</aside>

<p>Defines the timeout between redrawing the updated detected contours. This is only used in style <code class="prettyprint">CONTOUR_RECT</code>, <code class="prettyprint">CONTOUR_UNDERLINE</code> and <code class="prettyprint">CONTOUR_POINT</code>.</p>

<ul>
<li><strong>Type:</strong> int</li>
<li><strong>Default:</strong> 0</li>
</ul>

<p><a name="androidSpecifics"> </a></p>

<h3 id="android-config">Android Config</h3>

<p>There are two ways to configure the look and behavior of the scan view in Android.</p>

<h4 id="1-configuration-via-json">1. Configuration via json</h4>

<blockquote>
<p>JSON:<br/>in <code class="prettyprint">onCreate</code> or <code class="prettyprint">onActivityCreated</code> lifecycle methods of the Activity</p>
</blockquote>
<pre class="highlight java"><code><span class="n">scanView</span><span class="o">.</span><span class="na">setConfig</span><span class="o">(</span><span class="k">new</span> <span class="n">AnylineViewConfig</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"view_config.json"</span><span class="o">));</span>
</code></pre>

<p>The view can be configured using a json config file like seen above in the <a href="#configurable-parameters">Configurable Parameters</a>. This file must be located in the assets folder of your Android project, and can be loaded via the snippet on the right.</p>

<p><a name="configureViaXML"> </a></p>

<h4 id="2-configuration-via-xml">2. Configuration via XML</h4>

<p>The configuration can also be done via xml instead of json.</p>

<p>A list of of all available xml options can be found in the example.</p>

<blockquote>
<p>XML:<br/>Where app is xmlns:app=&ldquo;http://schemas.android.com/apk/res-auto&rdquo;</p>
</blockquote>
<pre class="highlight xml"><code>app:preferred_preview_width="720"
app:preferred_preview_height="1280"
app:cutout_alignment="top"
app:cutout_style="rect"
app:cutout_outside_color="#55000000"
app:cutout_offset_x="0"
app:cutout_offset_y="160"
app:cutout_crop_padding_x="0"
app:cutout_crop_padding_y="0"
app:cutout_crop_offset_x="0"
app:cutout_crop_offset_y="0"
app:cutout_width="540"
app:cutout_max_width_percent="90"
app:cutout_max_height_percent="90"
app:cutout_ratio_from_size_width="540"
app:cutout_ratio_from_size_height="98"
app:cutout_rect_corner_radius_in_dp="4"
app:cutout_stroke_width_in_dp="2"
app:cutout_stroke_color="#FFFFFF"
app:flash_mode="manual"
app:flash_alignment="bottom_right"
app:flash_image_on="@drawable/flash_icon"
app:flash_image_off="@drawable/flash_icon_off"
app:flash_image_auto="@drawable/flash_icon_auto"
app:beep_on_result="true"
app:vibrate_on_result="true"
app:blink_animation_on_result="true"
app:cancel_on_result="true"
app:visual_feedback_style="rect"
app:visual_feedback_stroke_color="#0099AA"
app:visual_feedback_stroke_width_in_dp="2"
app:visual_feedback_fill_color="#AA0099AA"
app:visual_feedback_corner_radius_in_dp="2"
app:visual_feedback_redraw_timeout="200"
app:visual_feedback_animation_duration="75"
</code></pre>

<p><a name="differencesToJson"> </a></p>

<h5 id="differences-to-json">Differences to json</h5>

<ul>
<li>tree is &ldquo;flattened&rdquo; and snake_case</li>
<li>captureResolution is defined by preferred_preview_width and preferred_preview_height</li>
<li>pictureResolution is defined by preferred_picture_width and preferred_picture_height</li>
<li>colors contain alpha value, so there is no extra option for alpha</li>
<li>color strings must include the &rsquo;#&rsquo; at the beginning. For example: <code class="prettyprint">app:cutout_stroke_color=&quot;#FFFFFFFF&quot;</code></li>
</ul>

<p><a name="iosConfig"> </a></p>

<h3 id="ios-config">iOS Config</h3>

<p>There are two ways to configure the look and behavior of the scan view in iOS.</p>

<h4 id="1-configuration-via-json">1. Configuration via json</h4>

<blockquote>
<p>JSON:<br/>in viewDidAppear</p>
</blockquote>
<pre class="highlight objective_c"><code>   <span class="n">NSString</span> <span class="o">*</span><span class="n">confPath</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSBundle</span> <span class="nf">mainBundle</span><span class="p">]</span> <span class="nf">pathForResource</span><span class="p">:</span><span class="s">@"view_config"</span> <span class="nf">ofType</span><span class="p">:</span><span class="s">@"json"</span><span class="p">];</span>
   <span class="n">ALUIConfiguration</span> <span class="o">*</span><span class="n">viewConf</span> <span class="o">=</span> <span class="p">[</span><span class="n">ALUIConfiguration</span> <span class="nf">cutoutConfigurationFromJsonFile</span><span class="p">:</span><span class="n">confPath</span><span class="p">];</span>
   <span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span><span class="p">.</span><span class="n">currentConfiguration</span> <span class="o">=</span> <span class="n">viewConf</span><span class="p">;</span>
</code></pre>

<p>The view can be configured using a json config file like seen above in the <a href="#configurable-parameters">Configurable Parameters</a>. </p>

<p>If you want to use the standard module-view-configs, you don&rsquo;t have to do anything, since it is loaded from the <strong>AnylineResources.bundle</strong> automatically.</p>

<p>However, if you would like to override this with your own configuration, you can do so with the snippet on the right.</p>

<h4 id="2-configure-on-the-view">2. Configure on the view</h4>

<p><a name="iosConfigModuleViewCode"> </a></p>

<h5 id="a-configure-in-code">a) Configure in code</h5>

<p>The view exposes the following properties, which can be set in the code:</p>

<table><thead>
<tr>
<th>value</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>strokeWidth</td>
<td>sets the width of the views border</td>
</tr>
<tr>
<td>strokeColor</td>
<td>sets the color of the views border</td>
</tr>
<tr>
<td>cornerRadius</td>
<td>sets the corner radius of the views border</td>
</tr>
<tr>
<td>outerColor</td>
<td>sets the color of the space surrounding the view</td>
</tr>
<tr>
<td>outerAlpha</td>
<td>sets the alpha of the space surrounding the view</td>
</tr>
<tr>
<td>flashImage</td>
<td>sets image used to toggle the flash</td>
</tr>
<tr>
<td>flashButtonAlignment</td>
<td>sets the alignment of the flash button</td>
</tr>
<tr>
<td>flashStatus</td>
<td>flag to check the status of the flash</td>
</tr>
<tr>
<td>cancelOnResult</td>
<td>true, if Anyline should stop scanning once a result was found</td>
</tr>
<tr>
<td>beepOnResult</td>
<td>true, if there should be a beep when a result was found</td>
</tr>
<tr>
<td>blinkOnResult</td>
<td>true, if there should be a blinking alarm when a result was found</td>
</tr>
<tr>
<td>vibrateOnResult</td>
<td>true, if there should be a vibration alarm when a result was found</td>
</tr>
</tbody></table>

<h6 id="flashbuttonalignment">flashButtonAlignment</h6>

<p>specifies the alignment of the flash button</p>

<p><strong>Possible values:</strong></p>

<table><thead>
<tr>
<th>alignment</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>ALFlashAlignmentTop</td>
<td>aligned at top, centered horizontally</td>
</tr>
<tr>
<td>ALFlashAlignmentTopLeft</td>
<td>aligned at top left corner</td>
</tr>
<tr>
<td>ALFlashAlignmentTopRight</td>
<td>aligned at top right corner</td>
</tr>
<tr>
<td>ALFlashAlignmentBottom</td>
<td>aligned at bottom, centered horizontally</td>
</tr>
<tr>
<td>ALFlashAlignmentBottomLeft</td>
<td>aligned at bottom left corner</td>
</tr>
<tr>
<td>ALFlashAlignmentBottomRight</td>
<td>aligned at bottom right corner</td>
</tr>
</tbody></table>

<p><a name="iosConfigModuleViewStoryboard"> </a></p>

<h5 id="b-configure-with-storyboards">b) Configure with Storyboards</h5>

<ol>
<li>Select <em>View</em> from the object library</li>
<li>Drag it onto the view of your view controller</li>
<li>Change the class to the name of the module you want to use (AnylineBarcodeModuleView, AnylineMRZModuleView, AnylineEnergyModuleView)</li>
</ol>

<p><img alt="AddView" src="images/docAddView.jpg" /></p>

<h6 id="changing-the-appearance">Changing the appearance</h6>

<p>The appearance of the view can be changed in the attributes inspector.</p>

<p><img alt="ConfigView" src="images/docConfigView.jpg" /></p>

<h6 id="creating-the-property">Creating the property</h6>

<blockquote>
<p>Module Outlet</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="k">@interface</span> <span class="nc">MainViewController</span> <span class="p">:</span> <span class="nc">UIViewController</span>

<span class="k">@property</span> <span class="p">(</span><span class="n">weak</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">IBOutlet</span> <span class="n">AnylineBarcodeModuleView</span> <span class="o">*</span><span class="n">moduleView</span><span class="p">;</span>

<span class="k">@end</span>
</code></pre>

<p>Define the outlet of the view in the interface of the view controller.</p>

<h6 id="connecting-the-module-view-to-your-view-controller">Connecting the module view to your view controller</h6>

<p>Drag the connector of you property to the newly created view. </p>

<p><img alt="Connect" src="images/docConnect.jpg" /></p>

<h3 id="cordova-plugin-config">Cordova Plugin Config</h3>

<p>The configuration for the anyline-sdk plugin is part of the AnylineSDK call. The config is just passed as a json-array, see also the <a href="#cordova-example">example</a> in the Quick Start.</p>

<p><a name="add-views"> </a></p>

<h2 id="add-views">Add Views</h2>

<p>The SDK provides a function to determine the position and outline of the cutout view. This function should be used when placing views on top of the module ScanView in order to avoid an overlap with the cutout.
In the Community Edition of the SDK a watermark is displayed. Depending on the cutout size, this watermark will either be displayed within the cutout, or with respect to the cutout position, directly underneath or above the cutout. In the second case, the watermark view has to be considered when adding other views, since an overlap of the watermark will result in an exception. </p>

<h3 id="android">Android</h3>
<pre class="highlight java"><code><span class="n">RelativeLayout</span> <span class="n">rl</span> <span class="o">=</span>  <span class="o">(</span><span class="n">RelativeLayout</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">layout</span><span class="o">);</span>

<span class="c1">// get the cutout rect from the scan view</span>
<span class="n">Rect</span> <span class="n">cutoutRect</span> <span class="o">=</span> <span class="n">scanView</span><span class="o">.</span><span class="na">getCutoutRect</span><span class="o">();</span>

<span class="c1">// create a view</span>
<span class="n">TextView</span> <span class="n">textView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextView</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"Result"</span><span class="o">);</span>

<span class="c1">// set layout parameters</span>
<span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">TypedValue</span><span class="o">.</span><span class="na">applyDimension</span><span class="o">(</span><span class="n">TypedValue</span><span class="o">.</span><span class="na">COMPLEX_UNIT_SP</span><span class="o">,</span> <span class="mi">28</span><span class="o">,</span> <span class="n">getResources</span><span class="o">().</span><span class="na">getDisplayMetrics</span><span class="o">());</span>
<span class="n">LayoutParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LayoutParams</span><span class="o">(</span><span class="n">LayoutParams</span><span class="o">.</span><span class="na">WRAP_CONTENT</span><span class="o">,</span> <span class="n">height</span><span class="o">);</span>
<span class="n">params</span><span class="o">.</span><span class="na">leftMargin</span> <span class="o">=</span> <span class="n">cutoutRect</span><span class="o">.</span><span class="na">left</span><span class="o">;</span>

<span class="c1">// Converting dps to pixels</span>
<span class="kt">float</span> <span class="n">dp</span> <span class="o">=</span> <span class="mi">40</span><span class="n">f</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">scale</span> <span class="o">=</span> <span class="n">getContext</span><span class="o">().</span><span class="na">getResources</span><span class="o">().</span><span class="na">getDisplayMetrics</span><span class="o">().</span><span class="na">density</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">pixels</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="n">dp</span> <span class="o">*</span> <span class="n">scale</span><span class="o">);</span>
<span class="n">params</span><span class="o">.</span><span class="na">topMargin</span> <span class="o">=</span> <span class="n">cutoutRect</span><span class="o">.</span><span class="na">top</span><span class="o">-</span><span class="n">pixels</span><span class="o">;</span>

<span class="c1">// add view to layout</span>
<span class="n">rl</span><span class="o">.</span><span class="na">addView</span><span class="o">(</span><span class="n">textView</span><span class="o">,</span> <span class="n">params</span><span class="o">);</span>
</code></pre>

<p>This example shows how to add a view above the cutout. With the function getCutoutRect you get a Rect representing the four corners (left, top, right, bottom) of the cutout. </p>

<p>We add a TextView where the left margin of the view will be the same as the left margin of the cutout. The top border of the TextView will be 40 pixels above the cutout. It is important to consider the height of the TextView and reduce this height value from the top value of the cutout rect. Furthermore it is recommended to work with density independent pixels to avoid large differences when displayed on devices with various display densities. </p>

<h6 id="consider-the-watermark-in-community-edition">Consider the Watermark in Community Edition</h6>
<pre class="highlight java"><code><span class="n">Rect</span> <span class="n">watermarkRect</span> <span class="o">=</span> <span class="n">scanView</span><span class="o">.</span><span class="na">getWatermarkRect</span><span class="o">();</span>

<span class="c1">// create a view</span>
<span class="n">TextView</span> <span class="n">textView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">TextView</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="kc">null</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"Result"</span><span class="o">);</span>

<span class="c1">// set layout parameters</span>
<span class="n">LayoutParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LayoutParams</span><span class="o">(</span><span class="n">LayoutParams</span><span class="o">.</span><span class="na">WRAP_CONTENT</span><span class="o">,</span> <span class="n">LayoutParams</span><span class="o">.</span><span class="na">WRAP_CONTENT</span><span class="o">);</span>

<span class="c1">// Converting dps to pixels</span>
<span class="kt">float</span> <span class="n">dp</span> <span class="o">=</span> <span class="mi">8</span><span class="n">f</span><span class="o">;</span>
<span class="kt">float</span> <span class="n">scale</span> <span class="o">=</span> <span class="n">getContext</span><span class="o">().</span><span class="na">getResources</span><span class="o">().</span><span class="na">getDisplayMetrics</span><span class="o">().</span><span class="na">density</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">marginPx</span> <span class="o">=</span> <span class="n">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="n">dp</span> <span class="o">*</span> <span class="n">scale</span><span class="o">);</span>

<span class="n">params</span><span class="o">.</span><span class="na">topMargin</span> <span class="o">=</span> <span class="n">watermarkRect</span><span class="o">.</span><span class="na">bottom</span> <span class="o">+</span> <span class="n">marginPx</span><span class="o">;</span>
<span class="n">params</span><span class="o">.</span><span class="na">gravity</span> <span class="o">=</span> <span class="n">Gravity</span><span class="o">.</span><span class="na">CENTER_HORIZONTAL</span><span class="o">;</span>

<span class="c1">// add view to layout</span>
<span class="n">rl</span><span class="o">.</span><span class="na">addView</span><span class="o">(</span><span class="n">textView</span><span class="o">,</span> <span class="n">params</span><span class="o">);</span>
</code></pre>

<p>When working with the community edition and small cutouts the watermark will usually be placed underneath the cutout and not included in the cutout view itself. In this case you have to consider the watermark as well when placing a view under the cutout. In case the cutout is placed on the bottom of the view, the watermark will be displayed above the the cutout and you have to be careful when placing views above the cutout. </p>

<p>The example shows how to use the getWatermarkRect function to add a TextView with a top margin of 8dp under the watermark view</p>

<h6 id="how-to-know-when-the-rectangles-are-available">How to know when the rectangles are available?</h6>

<p>Both, the position of the cutout, and the position of the watermark, can only be used after the ScanView is drawn. Otherwise the corresponding rects will not be known yet and be null.
An OnGlobalLayoutListener can be used to add the custom views after the rects are available.</p>
<pre class="highlight plaintext"><code>scanView.getViewTreeObserver().addOnGlobalLayoutListener(
        new ViewTreeObserver.OnGlobalLayoutListener() {
            @Override
            public void onGlobalLayout() {

                if (scanView.getCutoutRect() != null) {
                    // layout your views around the cutout here
                }

            }
        });
</code></pre>

<h3 id="ios">iOS</h3>
<pre class="highlight objective_c"><code><span class="c1">// get the cutout rect from the scan view
</span><span class="n">CGRect</span> <span class="n">cutOutRect</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">moduleView</span> <span class="nf">cutoutRect</span><span class="p">];</span>
<span class="n">CGFloat</span> <span class="n">lowerBorder</span> <span class="o">=</span> <span class="n">CGRectGetMaxY</span><span class="p">(</span><span class="n">cutOutRect</span><span class="p">);</span>

<span class="c1">// create a view
</span><span class="n">UILabel</span> <span class="o">*</span> <span class="n">label</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UILabel</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="n">cutOutRect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
                                                            <span class="n">lowerBorder</span><span class="p">,</span>
                                                            <span class="n">cutOutRect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span>
                                                            <span class="n">cutOutRect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)];</span>
<span class="n">label</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="nf">grayColor</span><span class="p">];</span>

<span class="c1">// add view to layout
</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">moduleView</span> <span class="nf">addSubview</span><span class="p">:</span><span class="n">label</span><span class="p">];</span>
</code></pre>

<p>This example shows how to add a view below the cutout view. With the function <code class="prettyprint">cutoutRect</code> you get a CGRect representing the cutout. <code class="prettyprint">CGRectGetMaxY</code> adds its y origin and its height to get the lower border of the cutout.</p>

<h6 id="consider-the-watermark-in-community-edition">Consider the Watermark in Community Edition</h6>
<pre class="highlight objective_c"><code><span class="c1">// get the cutout rect from the scan view
</span><span class="n">CGRect</span> <span class="n">cutOutRect</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span> <span class="nf">cutoutRect</span><span class="p">];</span>
<span class="n">CGRect</span> <span class="n">watermarkRect</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span> <span class="nf">watermarkRect</span><span class="p">];</span>    

<span class="n">CGFloat</span> <span class="n">lowerBorder</span> <span class="o">=</span> <span class="n">MAX</span><span class="p">(</span><span class="n">CGRectGetMaxY</span><span class="p">(</span><span class="n">cutOutRect</span><span class="p">),</span> <span class="n">CGRectGetMaxY</span><span class="p">(</span><span class="n">watermarkRect</span><span class="p">));</span>

<span class="c1">// create a view
</span><span class="n">UILabel</span> <span class="o">*</span> <span class="n">label</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UILabel</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="n">cutOutRect</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
                                                            <span class="n">lowerBorder</span><span class="p">,</span>
                                                            <span class="n">cutOutRect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span>
                                                            <span class="n">cutOutRect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)];</span>
<span class="n">label</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="nf">grayColor</span><span class="p">];</span>

<span class="c1">// add view to layout
</span><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span> <span class="nf">addSubview</span><span class="p">:</span><span class="n">label</span><span class="p">];</span>
</code></pre>

<p>Notice that you will get an exception when you overlay the watermark. Since the watermark will be displayed outside the cutout when the cutout size is to small, you have to consider both views when placing custom views around the cutout. 
In this example we add a view below the watermark. Therefore, we have to check which view has the largest y coordinate to avoid an overlap. With the function <code class="prettyprint">cutoutRect</code> you get a CGRect representing the cutout. The function <code class="prettyprint">watermarkRect</code> returns the bounding rect of the watermark. <code class="prettyprint">CGRectGetMaxY</code> determines the y origin plus height to get the lower border of the view. With <code class="prettyprint">MAX</code> you then get the maximum y coordinate of both rects and can use this value to place your view below both views. In case a small cutout is placed at the bottom edge of the display the watermark will be placed above the cutout. Please also consider this edge case when placing your views around the cutout.</p>

          <h1 id="modules">Modules</h1>

<p>The Anyline modules are use-case specific abstractions for Anyline. Each module is designed to serve a specific purpose. Currently, the following modules are available:</p>

<ul>
<li><a href="#anylineOcrModule">AnylineOCR</a></li>
<li><a href="#barcodeModule">Barcode</a></li>
<li><a href="#energyModule">Energy</a></li>
<li><a href="#mrzModule">MRZ (Machine Readable Zone)</a></li>
<li><a href="#documentModule">Document</a></li>
<li><a href="#ordercodeModule">Order Code</a> - only available for smart glasses (on request)</li>
</ul>

          <p><a name="anylineOcrModule"> </a></p>

<h2 id="anyline-ocr">Anyline OCR</h2>

<p>With the Anyline OCR Module it is possible to set up scanning for custom use-cases.</p>

<p>There are two different modes for this module: <strong>LINE</strong> and <strong>GRID</strong>.
The LINE mode is optimal for scanning one or more lines of variable length and/or font (like IBANs or addresses).
The GRID mode is optimal for characters with equal size laid out in a grid, with a constant font, background and character count (like loyalty codes inside bottle caps).</p>

<p>If the provided settings are not enough to achieve great results, feel free to
<a href="https://www.anyline.io/support-request/">contact us</a> and we will create a command file that is optimized
for your use-case. This script can then be set as a parameter to this module, so minimal changes are required to your app. See section <a href="#OcrConig_customScript">Setting a Custom Script</a> for more details.</p>

<p>Furthermore, it is possible to specify a custom traineddata file, which can improve results if you use a specific font for your use-case. See <a href="#OcrConig_customTraineddata">Setting custom traineddata files</a> for details.</p>

<h4 id="settings-common">Settings Common</h4>

<table><thead>
<tr>
<th>property</th>
<th>type<br/>[range]</th>
<th>description</th>
<th>comment</th>
</tr>
</thead><tbody>
<tr>
<td>scanMode</td>
<td>Enum<br/>[LINE, GRID]</td>
<td>The general scan mode</td>
<td>See the introduction for the description of the modes</td>
</tr>
<tr>
<td>customCmdFile</td>
<td>String</td>
<td>An optional custom command file</td>
<td>If the custom command file is set, all other parameters are ignored</td>
</tr>
<tr>
<td>minCharHeight</td>
<td>Integer</td>
<td>The minimum height of a character to scan in pixels</td>
<td></td>
</tr>
<tr>
<td>maxCharHeight</td>
<td>Integer</td>
<td>The maximum height of a character to scan in pixels</td>
<td></td>
</tr>
<tr>
<td>tesseractLanguages</td>
<td>String&hellip;</td>
<td>The languages to use for the OCR (e.g. to use custom.traineddata set this value &ldquo;custom&rdquo;)</td>
<td>On Android, the languages must be copied first via <a href="#setting-traineddata-files">Setting Traineddata Files</a></td>
</tr>
<tr>
<td>charWhitelist</td>
<td>String</td>
<td>Filter the recognized characters to only allow the ones included in this list (e.g. <code class="prettyprint">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890&quot;</code> for capital letters and numbers only)</td>
<td>If symbols are scanned that are not in the <code class="prettyprint">charWhitelist</code>, the performance of the scan may suffer</td>
</tr>
<tr>
<td>validationRegex</td>
<td>String</td>
<td>A regex string to validate the result. Invalid results will not be returned</td>
<td>Regex is in <a href="http://www.cplusplus.com/reference/regex/ECMAScript/">ECMAScript regular expressions pattern syntax</a></td>
</tr>
<tr>
<td>minConfidence</td>
<td>Integer<br/>[0-100]</td>
<td>The minimum confidence required to return a result, a value between 0 and 100</td>
<td>A higher confidence means it may take longer to get a result but it is more likely to be accurate</td>
</tr>
</tbody></table>

<h4 id="settings-line-mode-only">Settings LINE mode only</h4>

<table><thead>
<tr>
<th>property</th>
<th>type<br/>[range]</th>
<th>description</th>
<th>comment</th>
</tr>
</thead><tbody>
<tr>
<td>removeSmallContours</td>
<td>boolean</td>
<td>If this is <code class="prettyprint">true</code>, small contours will be ignored</td>
<td>This is useful for latin capital letters and numbers. This is unfavorable if details are relevant, like the dot above the letter <em>i</em></td>
</tr>
<tr>
<td>minSharpness <br/><em>experimental</em></td>
<td>Integer<br/>[0-100]</td>
<td>The minimum sharpness required to further process an image with a value between 0 and 100 (0 to turn off sharpness detection)</td>
<td>It is used to avoid processing of blurry images which are unlikley to return a result in order to avoid the time consuming ocr step. It is recommended to set an initial sharpness of 50 and gradually increase the value to a threshold where you get satisfying results. This parameter is in alpha stage.</td>
</tr>
<tr>
<td>removeWhitespaces</td>
<td>boolean</td>
<td>If set to <code class="prettyprint">true</code>, whitespaces will be removed in the returned result. Default is <code class="prettyprint">false</code></td>
<td>If you want the result not to contain any whitespaces, as in an IBAN for example, set this parameter to true</td>
</tr>
</tbody></table>

<h4 id="settings-grid-mode-only">Settings GRID mode only</h4>

<table><thead>
<tr>
<th>property</th>
<th>type<br/>[range]</th>
<th>description</th>
<th>comment</th>
</tr>
</thead><tbody>
<tr>
<td>charCountX</td>
<td>Integer</td>
<td>The number of horizontal characters</td>
<td>E.g. if a code to scan consists of 2 rows with 4 symbols each, this would be set to 4</td>
</tr>
<tr>
<td>charCountY</td>
<td>Integer</td>
<td>The number of vertical characters</td>
<td>E.g. if a code to scan consists of 2 rows with 4 symbols each, this would be set to 2</td>
</tr>
<tr>
<td>charPaddingXFactor</td>
<td>Double</td>
<td>The average horizontal distance between two characters, measured in percentage of the characters width</td>
<td></td>
</tr>
<tr>
<td>charPaddingYFactor</td>
<td>Double</td>
<td>The average vertical distance between two characters, measured in percentage of the character height</td>
<td></td>
</tr>
<tr>
<td>isBrightTextOnDark</td>
<td>boolean</td>
<td>If <code class="prettyprint">true</code>, this scans bright text on dark background. <br> If <code class="prettyprint">false</code>, this scans dark text on bright background</td>
<td></td>
</tr>
</tbody></table>

<aside class="notice">
<code class="prettyprint">removeWhitespace</code> is set to true in GRID mode. This cannot be changed.
</aside>

<p><a name="OcrConig_customScript"> </a></p>

<h4 id="setting-a-custom-script">Setting a Custom Script</h4>

<p>As described above it is possible to set a custom command file which is optimized for your use-case scenario. This command file is provided to you by Anyline. The following snippets demonstrate how to load the custom command file.</p>

<aside class="warning">
Notice that the custom script will override all settings made to the Anyline OCR Config, so you don&rsquo;t have to set the parameters manually as they are optimized for your use-case.
</aside>

<h5 id="android">Android</h5>

<p><em>setCustomCmdFile</em></p>
<pre class="highlight java"><code><span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setCustomCmdFile</span><span class="o">(</span><span class="s">"custom_script_filename.ale"</span><span class="o">);</span>
</code></pre>

<p>In this case we provide an <em>.ale</em> file which contains the encrypted script. Place this file in the assets folder and use the method <code class="prettyprint">setCustomCmdFile</code> to specify the name of the custom script including the extension (see the code snippet above). </p>

<h5 id="ios">iOS</h5>

<p><em>customCmdFilePath</em></p>
<pre class="highlight objective_c"><code><span class="n">config</span><span class="p">.</span><span class="n">customCmdFilePath</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSBundle</span> <span class="nf">mainBundle</span><span class="p">]</span> <span class="nf">pathForResource</span><span class="p">:</span><span class="s">@"custom_script_filename"</span> <span class="nf">ofType</span><span class="p">:</span><span class="s">@"ale"</span><span class="p">];</span>
</code></pre>

<p><a name="OcrConig_customTraineddata"> </a></p>

<h4 id="setting-traineddata-files">Setting traineddata files</h4>

<p>In case you use a specific font it can improve results if you train this font and use the resulting traineddata files for the scanning process. To train your font you can either use the website <a href="http://ocr7.com/">ocr7.com</a> or feel free to <a href="https://www.anyline.io/support-request/">contact us</a>. </p>

<h5 id="android">Android</h5>
<pre class="highlight java"><code><span class="n">scanView</span><span class="o">.</span><span class="na">copyTrainedData</span><span class="o">(</span><span class="s">"tessdata/eng.traineddata"</span><span class="o">,</span> <span class="s">"f4b86e0b7eb03c682f0e5e6519e02d32"</span><span class="o">);</span>
<span class="n">scanView</span><span class="o">.</span><span class="na">copyTrainedData</span><span class="o">(</span><span class="s">"tessdata/deu.traineddata"</span><span class="o">,</span> <span class="s">"2d5190b9b62e28fa6d17b728ca195776"</span><span class="o">);</span>
</code></pre>

<p>Once you have the traineddata file copy it to the assets directory. Place it either in the assets directory directly or in the sub directory <em>tessdata</em>. Other sub folders are not allowed. 
In the <em>copyTrainedData</em> method specify the path of the file from <strong>relative to the assets folder</strong>. Additionally you can provide a md5 hash of the file or specify <em>null</em> as second parameter.
If the hash is null, it will be calculated automatically, but this is slow and is therefore not recommended.</p>

<aside class="notice">
Important! If you have multiple traineddata files, this method must be called for every traineddata file before startScanning is called.
</aside>

<h5 id="ios">iOS</h5>

<p>On iOS, copying the traineddata files first is not necessary, since they are usually added to the target automatically.</p>

<p><a name="anylineOcrExamples"> </a></p>

<h3 id="anylineocr-examples">AnylineOCR Examples</h3>

<h4 id="android">Android</h4>

<p>The following example illustrates an IBAN scanner use-case realized with the Anyline OCR module.</p>

<h6 id="example-activity-for-the-iban-use-case">Example Activity for the IBAN use case</h6>

<blockquote>
<p>in <code class="prettyprint">onCreate</code> or <code class="prettyprint">onActivityCreated</code> lifecycle methods</p>
</blockquote>
<pre class="highlight java"><code><span class="c1">// Get the view from the layout</span>
<span class="n">scanView</span> <span class="o">=</span> <span class="o">(</span><span class="n">AnylineOcrScanView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">scan_view</span><span class="o">);</span>
<span class="c1">// Configure the view (cutout, the camera resolution, etc.) via json (can also be done in xml in the layout)</span>
<span class="n">scanView</span><span class="o">.</span><span class="na">setConfig</span><span class="o">(</span><span class="k">new</span> <span class="n">AnylineViewConfig</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"iban_view_config.json"</span><span class="o">));</span>

<span class="c1">// Copies given traineddata-file to a place where the core can access it.</span>
<span class="c1">// This MUST be called for every traineddata file that is used (before startScanning() is called).</span>
<span class="c1">// The file must be located directly in the assets directory (or in tessdata/ but no other folders are allowed)</span>
<span class="n">scanView</span><span class="o">.</span><span class="na">copyTrainedData</span><span class="o">(</span><span class="s">"tessdata/eng.traineddata"</span><span class="o">,</span> <span class="s">"f4b86e0b7eb03c682f0e5e6519e02d32"</span><span class="o">);</span>
<span class="n">scanView</span><span class="o">.</span><span class="na">copyTrainedData</span><span class="o">(</span><span class="s">"tessdata/deu.traineddata"</span><span class="o">,</span> <span class="s">"2d5190b9b62e28fa6d17b728ca195776"</span><span class="o">);</span>

<span class="c1">//Configure the OCR for IBANs</span>
<span class="n">AnylineOcrConfig</span> <span class="n">anylineOcrConfig</span> <span class="o">=</span> <span class="k">new</span> <span class="n">AnylineOcrConfig</span><span class="o">();</span>
<span class="c1">// use the line mode (line length and font may vary)</span>
<span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setScanMode</span><span class="o">(</span><span class="n">AnylineOcrConfig</span><span class="o">.</span><span class="na">ScanMode</span><span class="o">.</span><span class="na">LINE</span><span class="o">);</span>
<span class="c1">// set the languages used for OCR</span>
<span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setTesseractLanguages</span><span class="o">(</span><span class="s">"eng"</span><span class="o">,</span> <span class="s">"deu"</span><span class="o">);</span>
<span class="c1">// allow only capital letters and numbers</span>
<span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setCharWhitelist</span><span class="o">(</span><span class="s">"ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890"</span><span class="o">);</span>
<span class="c1">// set the height range the text can have</span>
<span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setMinCharHeight</span><span class="o">(</span><span class="mi">30</span><span class="o">);</span>
<span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setMaxCharHeight</span><span class="o">(</span><span class="mi">60</span><span class="o">);</span>
<span class="c1">// The minimum confidence required to return a result, a value between 0 and 100.</span>
<span class="c1">// (higher confidence means less likely to get a wrong result, but may be slower to get a result)</span>
<span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setMinConfidence</span><span class="o">(</span><span class="mi">65</span><span class="o">);</span>
<span class="c1">// a simple regex for a basic validation of the IBAN, results that don't match this, will not be returned</span>
<span class="c1">// (full validation is more complex, as different countries have different formats)</span>
<span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setValidationRegex</span><span class="o">(</span><span class="s">"^[A-Z]{2}([0-9A-Z]\\s*){13,32}$"</span><span class="o">);</span>
<span class="c1">// removes small contours (helpful in this case as no letters with small artifacts are allowed, like i)</span>
<span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setRemoveSmallContours</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="c1">// removes possible whitespaces in the result</span>
<span class="n">anylineOcrConfig</span><span class="o">.</span><span class="na">setRemoveWhitespaces</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

<span class="c1">// set the ocr config</span>
<span class="n">scanView</span><span class="o">.</span><span class="na">setAnylineOcrConfig</span><span class="o">(</span><span class="n">anylineOcrConfig</span><span class="o">);</span>

<span class="c1">// initialize with the license and a listener</span>
<span class="n">scanView</span><span class="o">.</span><span class="na">initAnyline</span><span class="o">(</span><span class="n">license</span><span class="o">,</span> <span class="k">new</span> <span class="n">AnylineOcrListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onReport</span><span class="o">(</span><span class="n">String</span> <span class="n">identifier</span><span class="o">,</span> <span class="n">Object</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Called with interesting values, that arise during processing.</span>
        <span class="c1">// Some possibly reported values:</span>
        <span class="c1">//</span>
        <span class="c1">// $brightness - the brightness of the center region of the cutout as a float value</span>
        <span class="c1">// $confidence - the confidence, an Integer value between 0 and 100</span>
        <span class="c1">// $thresholdedImage - the current image transformed into black and white</span>
        <span class="c1">// $sharpness - the detected sharpness value (only reported if minSharpness &gt; 0)</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">onTextOutlineDetected</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">PointF</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Called when the outline of a possible text is detected.</span>
        <span class="c1">// If false is returned, the outline is drawn automatically.</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onResult</span><span class="o">(</span><span class="n">AnylineOcrResult</span> <span class="n">result</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Called when a result is found (minimum confidence is exceeded and validation with regex was ok)</span>
        <span class="n">ibanResultView</span><span class="o">.</span><span class="na">setResult</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span>
        <span class="n">ibanResultView</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onAbortRun</span><span class="o">(</span><span class="n">AnylineOcrError</span> <span class="n">code</span><span class="o">,</span> <span class="n">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Is called when no result was found for the current image.</span>
        <span class="c1">// E.g. if no text was found or the result is not valid.</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>

<blockquote>
<p>in <code class="prettyprint">onResume()</code></p>
</blockquote>
<pre class="highlight java"><code><span class="n">scanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
</code></pre>

<blockquote>
<p>in <code class="prettyprint">onPause()</code></p>
</blockquote>
<pre class="highlight java"><code><span class="n">scanView</span><span class="o">.</span><span class="na">cancelScanning</span><span class="o">();</span>
<span class="c1">//IMPORTANT: always release the camera in onPause</span>
<span class="n">scanView</span><span class="o">.</span><span class="na">releaseCameraInBackground</span><span class="o">();</span>
</code></pre>

<p>There are five simple steps necessary to get started:</p>

<ol>
<li>Set the view config with <code class="prettyprint">setConfig</code> (or in the layout XML)</li>
<li>Set OCR parameters with <code class="prettyprint">setOcrConfig</code></li>
<li>Initialize the module with a license and a listener. The listener is called with the result (and other information) using <code class="prettyprint">initAnyline</code></li>
<li>Call <code class="prettyprint">startScanning()</code></li>
<li>When you are done, call <code class="prettyprint">cancelScanning()</code> and <code class="prettyprint">releaseCameraInBackground()</code> or <code class="prettyprint">releaseCamera()</code></li>
</ol>

<h6 id="example-activity-layout">Example Activity Layout</h6>
<pre class="highlight xml"><code><span class="nt">&lt;RelativeLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;at.nineyards.anyline.modules.ocr.AnylineOcrScanView</span>
        <span class="na">android:id=</span><span class="s">"@+id/scan_view"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span>
</code></pre>

<p>The AnylineOcrScanView can simply be included in the activity layout file, just like any other view. The view can be either configured via <a href="#configureViaXML">XML</a> or with a config json.</p>

<p><a name="ibanViewConfig"> </a></p>

<h6 id="example-view-config-for-the-iban-use-case">Example view config for the IBAN use case</h6>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"captureResolution"</span><span class="p">:</span><span class="s2">"1080"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cutout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"maxWidthPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80%"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"maxHeightPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80%"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"top_half"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">870</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ratioFromSize"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FFFFFF"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outerColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outerAlpha"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"flash"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bottom_right"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"beepOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"vibrateOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"blinkAnimationOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cancelOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>A detailed description of all available config items can be found in the section <a href="#anyline-config">Anyline Config</a>.</p>

<h6 id="newline">&NewLine;</h6>

<h5 id="other-examples">Other Examples</h5>

<p>For more example use cases of the Anyline OCR module, check out the Examples app in the download package, available here: <a href="https://www.anyline.io/download/">https://www.anyline.io/download/</a></p>

<h6 id="reporting">Reporting</h6>
<pre class="highlight java"><code><span class="n">scanView</span><span class="o">.</span><span class="na">setReportingEnabled</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
</code></pre>

<p>The reporting of results in the Community Edition (including an image)
helps us to improve our product, and the customer experience.
It is possible to turn off that feature by calling <em>setReportingEnabled(false)</em> on the AnylineOcrScanView.</p>

<h4 id="ios">iOS</h4>

<p>The following example illustrates an ISBN scanner use-case, realized with the Anyline OCR module.</p>

<p>There are three simple steps necessary to get started:</p>

<h6 id="1-initialize-the-module-in-viewdidload">1. Initialize the module in viewDidLoad</h6>

<blockquote>
<p>in <code class="prettyprint">viewDidLoad</code> lifecycle method</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="c1">// The controller has to conform to &lt;AnylineOCRModuleDelegate&gt; to be able to receive results
</span><span class="k">@interface</span> <span class="nc">ALISBNScanViewController</span> <span class="p">()</span><span class="o">&lt;</span><span class="n">AnylineOCRModuleDelegate</span><span class="o">&gt;</span>
<span class="c1">// The Anyline module used for OCR
</span><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">strong</span><span class="p">)</span> <span class="n">AnylineOCRModuleView</span> <span class="o">*</span><span class="n">ocrModuleView</span><span class="p">;</span>

<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">ALISBNScanViewController</span>
<span class="cm">/*
 We will do our main setup in viewDidLoad. Its called once the view controller is getting ready to be displayed.
 */</span>
<span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">super</span> <span class="nf">viewDidLoad</span><span class="p">];</span>

    <span class="c1">// Initializing the module. Its a UIView subclass. We set the frame to fill the whole screen
</span>    <span class="n">CGRect</span> <span class="n">frame</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIScreen</span> <span class="nf">mainScreen</span><span class="p">]</span> <span class="nf">applicationFrame</span><span class="p">];</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">.</span><span class="n">navigationBar</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">.</span><span class="n">navigationBar</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>
    <span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">AnylineOCRModuleView</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:</span><span class="n">frame</span><span class="p">];</span>

    <span class="n">ALOCRConfig</span> <span class="o">*</span><span class="n">config</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ALOCRConfig</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">init</span><span class="p">];</span>
    <span class="n">config</span><span class="p">.</span><span class="n">charHeight</span> <span class="o">=</span> <span class="n">ALRangeMake</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">70</span><span class="p">);</span>
    <span class="n">config</span><span class="p">.</span><span class="n">tesseractLanguages</span> <span class="o">=</span> <span class="p">@[</span><span class="s">@"eng"</span><span class="p">,</span> <span class="s">@"deu"</span><span class="p">];</span>
    <span class="n">config</span><span class="p">.</span><span class="n">charWhiteList</span> <span class="o">=</span> <span class="s">@"ISBN0123456789&lt;&gt;-X"</span><span class="p">;</span>
    <span class="n">config</span><span class="p">.</span><span class="n">minConfidence</span> <span class="o">=</span> <span class="mi">65</span><span class="p">;</span>
    <span class="n">config</span><span class="p">.</span><span class="n">validationRegex</span> <span class="o">=</span> <span class="s">@"^ISBN</span><span class="se">\\</span><span class="s">s*((978|979){1}-?</span><span class="se">\\</span><span class="s">s*)*[0-9]{1,5}-?</span><span class="se">\\</span><span class="s">s*[0-9]{2,7}-?</span><span class="se">\\</span><span class="s">s*[0-9]{2,7}-?</span><span class="se">\\</span><span class="s">s*[0-9X]$"</span><span class="p">;</span>
    <span class="n">config</span><span class="p">.</span><span class="n">removeSmallContours</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
    <span class="n">config</span><span class="p">.</span><span class="n">removeWhitespaces</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
    <span class="n">config</span><span class="p">.</span><span class="n">scanMode</span> <span class="o">=</span> <span class="n">ALLine</span><span class="p">;</span>

    <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="c1">// We tell the module to bootstrap itself with the license key and delegate. The delegate will later get called
</span>    <span class="c1">// by the module once we start receiving results.
</span>    <span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span> <span class="nf">setupWithLicenseKey</span><span class="p">:</span><span class="n">kISBNLicenseKey</span>
                                                  <span class="nf">delegate</span><span class="p">:</span><span class="n">self</span>
                                                 <span class="nf">ocrConfig</span><span class="p">:</span><span class="n">config</span>
                                                     <span class="nf">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
    <span class="c1">// setupWithLicenseKey:delegate:error returns true if everything went fine. In the case something wrong
</span>    <span class="c1">// we have to check the error object for the error message.
</span>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Something went wrong. The error object contains the error description
</span>        <span class="n">NSAssert</span><span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="s">@"Setup Error: %@"</span><span class="p">,</span> <span class="n">error</span><span class="p">.</span><span class="n">debugDescription</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// Load the UI Configuration from a json file
</span>    <span class="n">NSString</span> <span class="o">*</span><span class="n">confPath</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSBundle</span> <span class="nf">mainBundle</span><span class="p">]</span> <span class="nf">pathForResource</span><span class="p">:</span><span class="s">@"isbn_config"</span> <span class="nf">ofType</span><span class="p">:</span><span class="s">@"json"</span><span class="p">];</span>
    <span class="n">ALUIConfiguration</span> <span class="o">*</span><span class="n">ibanConf</span> <span class="o">=</span> <span class="p">[</span><span class="n">ALUIConfiguration</span> <span class="nf">cutoutConfigurationFromJsonFile</span><span class="p">:</span><span class="n">confPath</span><span class="p">];</span>
    <span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span><span class="p">.</span><span class="n">currentConfiguration</span> <span class="o">=</span> <span class="n">ibanConf</span><span class="p">;</span>

    <span class="c1">// After setup is complete we add the module to the view of this view controller
</span>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nf">addSubview</span><span class="p">:</span><span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span><span class="p">];</span>
<span class="p">}</span>

<span class="cm">/*
 This is the main delegate method Anyline uses to report its results
 */</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">anylineOCRModuleView</span><span class="o">:</span><span class="p">(</span><span class="n">AnylineOCRModuleView</span> <span class="o">*</span><span class="p">)</span><span class="n">anylineOCRModuleView</span>
               <span class="n">didFindResult</span><span class="o">:</span><span class="p">(</span><span class="n">ALOCRResult</span> <span class="o">*</span><span class="p">)</span><span class="n">result</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Anyline reports result:"</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">text</span><span class="p">);</span>
<span class="p">}</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">anylineOCRModuleView</span><span class="o">:</span><span class="p">(</span><span class="n">AnylineOCRModuleView</span> <span class="o">*</span><span class="p">)</span><span class="n">anylineOCRModuleView</span>
             <span class="n">reportsVariable</span><span class="o">:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">variableName</span>
                       <span class="n">value</span><span class="o">:</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="n">value</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Anyline reports varaible: %@ with value: %@"</span><span class="p">,</span> <span class="n">variableName</span><span class="p">,</span> <span class="n">value</span><span class="p">);</span>
<span class="p">}</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">anylineOCRModuleView</span><span class="o">:</span><span class="p">(</span><span class="n">AnylineOCRModuleView</span> <span class="o">*</span><span class="p">)</span><span class="n">anylineOCRModuleView</span>
           <span class="n">reportsRunFailure</span><span class="o">:</span><span class="p">(</span><span class="n">ALOCRError</span><span class="p">)</span><span class="n">error</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Anyline reports varaible an error: %@"</span><span class="p">,</span> <span class="n">error</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">@end</span>
</code></pre>

<ul>
<li>Create a <code class="prettyprint">ALUIConfiguration</code> object and use its properties to configure the user interface, or load a layout file.</li>
<li>Create a <code class="prettyprint">ALOCRConfig</code> object and use its properties to configure the module.</li>
<li>Initialize the module with a license key, a delegate and the <code class="prettyprint">ALOCRConfig</code> object. The delegate will be called once there is a result.</li>
</ul>

<h6 id="2-start-scanning-process-in-viewdidappear">2. Start scanning process in viewDidAppear</h6>

<blockquote>
<p>in viewDidAppear()</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span> <span class="nf">startScanningAndReturnError</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
</code></pre>

<p>Call <code class="prettyprint">startScanningAndReturnError</code> in <code class="prettyprint">viewDidAppear</code>. If there is a problem while starting the scanning process, an error object will be set so the error can be handled.</p>

<h6 id="3-implement-the-delegate-method-and-receive-results">3. Implement the delegate method and receive results</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">anylineOCRModuleView</span><span class="p">:(</span><span class="n">AnylineOCRModuleView</span> <span class="o">*</span><span class="p">)</span><span class="nv">anylineOCRModuleView</span> <span class="nf">didFindResult</span><span class="p">:(</span><span class="n">ALOCRResult</span> <span class="o">*</span><span class="p">)</span><span class="nv">result</span> <span class="p">{</span>
   <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Anyline has a result"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p>To receive results implement the delegate method as can be seen in the example.</p>

<h6 id="newline">&NewLine;</h6>

<blockquote>
<p>in viewWillDisappear()</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">ocrModuleView</span> <span class="nf">cancelScanningAndReturnError</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
</code></pre>

<p>After you received a result, call <code class="prettyprint">cancelScanningAndReturnError</code>. This also has to be called in <code class="prettyprint">viewWillDisappear</code> to clean up the module.</p>

<p><a name="isbnViewConfig"> </a></p>

<h6 id="example-view-config-for-the-iban-use-case">Example view config for the IBAN use case</h6>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"captureResolution"</span><span class="p">:</span><span class="s2">"1080"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cutout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"maxWidthPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80%"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"maxHeightPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80%"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"top_half"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">540</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ratioFromSize"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
        </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FFFFFF"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"outerColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"outerAlpha"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"flash"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bottom_right"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"beepOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"vibrateOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"blinkAnimationOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cancelOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The OCR module can simply be added as a subview, just like any other view. The view can be either configured via <code class="prettyprint">ALUIConfiguration</code> or with a config json file.</p>

<p>A detailed description of all available config items can be found in the section <a href="#anyline-config">Anyline Config</a></p>

<h6 id="newline">&NewLine;</h6>

<h5 id="other-examples">Other Examples</h5>

<p>For more example use cases of the Anyline OCR Module, check out the Examples app in the download package, available here: <a href="https://www.anyline.io/download/">https://www.anyline.io/download/</a></p>

<h4 id="cordova-plugin">Cordova Plugin</h4>

<p>Cordova has two special options in the OCR-config:</p>

<ul>
<li>traineddataFiles: contains an array of traineddata files with path relative to the <em>www</em> directory. (This should be used instead of <em>tesseractLanguages</em>)</li>
<li>drawTextOutline: true (default) if a visual feedback should be given in case a text area has been identified, false otherwise.</li>
</ul>

<h6 id="example-call-for-iban-scanning">Example call for IBAN scanning</h6>
<pre class="highlight plaintext"><code>cordova.exec(onResult, onError, "AnylineSDK", "ANYLINE_OCR",
    [
        "YOUR_LICENSE_KEY",
      {
        "captureResolution": "1080",
        "cutout": {
            "style": "rect",
            "maxWidthPercent": "80%",
            "maxHeightPercent": "80%",
            "alignment": "top_half",
            "width": 870,
            "ratioFromSize": {
                "width": 5,
                "height": 1
            },
            "strokeWidth": 2,
            "cornerRadius": 10,
            "strokeColor": "FFFFFF",
            "outerColor": "000000",
            "outerAlpha": 0.3
        },
        "flash": {
            "mode": "manual",
            "alignment": "bottom_right"
        },
        "beepOnResult": true,
        "vibrateOnResult": true,
        "blinkAnimationOnResult": true,
        "cancelOnResult": true
     },{
        "scanMode": "LINE",
        "minCharHeight": 30,
        "maxCharHeight": 60,
        "traineddataFiles": ["assets/eng_no_dict.traineddata"],
        "charWhitelist": "ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",
        "validationRegex": "^[A-Z]{2}([0-9A-Z]\\s*){13,32}$",
        "minConfidence": 65,
        "removeSmallContours": true,
        "charCountX": 4,
        "charCountY": 2,
        "charPaddingXFactor": 1.0,
        "charPaddingYFactor": 1.0,
        "isBrightTextOnDark": false,
        "drawTextOutline": true
     }
   ]
);
</code></pre>

<p>For more detailed information about the config parameters, see the <a href="#cordova-example">example</a> in section Quick Start.</p>

<h6 id="reporting">Reporting</h6>
<pre class="highlight plaintext"><code>//...
            "blinkAnimationOnResult": true,
            "cancelOnResult": true,
            "reportingEnabled": false
        }
    ]
</code></pre>

<p>The reporting of  results in the Community Edition (including an image) helps us to improve our product, and the customer experience.
It is possible to turn off this feature by adding <em>&ldquo;reportingEnabled&rdquo;: false</em> to the above config.</p>

          <p><a name="barcodeModule"> </a></p>

<h2 id="barcode">Barcode</h2>

<p>With the Anyline Barcode-Module 23 different types of bar- and QR-codes can be scanned. The result will simply be a <em>string</em> representation of the code.</p>

<h4 id="restrictions-for-the-barcode-module-config">Restrictions for the Barcode-Module Config:</h4>

<ul>
<li>Flash mode <em>auto</em> is still in alpha stage therefore <em>manual</em> mode is preferred</li>
</ul>

<h4 id="available-barcode-formats">Available Barcode Formats:</h4>

<h6 id="fully-supported">Fully Supported</h6>

<ul>
<li>UPC A</li>
<li>UPC E</li>
<li>EAN-8</li>
<li>EAN-13</li>
<li>EAN-14</li>
<li>EAN-18</li>
<li>EAN-99</li>
<li>EAN-128</li>
<li>Identcode</li>
<li>Leitcode</li>
<li>ISBN-13</li>
<li>ISBN-10</li>
<li>ISSN</li>
<li>ISMN</li>
<li>ITF-14</li>
<li>Data Matrix</li>
<li>Aztec [not vCard - see below]</li>
<li>Codabar</li>
<li>QR-Code</li>
</ul>

<h6 id="experimental-support">Experimental Support:</h6>

<ul>
<li>Code 39</li>
<li>Code 93</li>
<li>Code-128 [without rotation]</li>
<li>PDF 417</li>
<li>Aztec vCard</li>
</ul>

<h6 id="currently-not-supported">Currently not supported</h6>

<ul>
<li>RSS 14</li>
<li>RSS Expanded</li>
<li>MSI/Plessey</li>
<li>Code 93 Extended</li>
</ul>

<h3 id="android">Android</h3>

<h4 id="example">Example</h4>

<p>The following example files illustrate a simple use-case of the Barcode module.</p>

<h6 id="example-activity">Example  Activity</h6>

<blockquote>
<p>in onCreate or onActivityCreated lifecycle methods</p>
</blockquote>
<pre class="highlight java"><code><span class="n">barcodeScanView</span> <span class="o">=</span> <span class="o">(</span><span class="n">BarcodeScanView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">barcode_scan_view</span><span class="o">);</span>
<span class="n">barcodeScanView</span><span class="o">.</span><span class="na">setConfigFromAsset</span><span class="o">(</span><span class="s">"barcode_view_config.json"</span><span class="o">);</span>

<span class="c1">// initialize Anyline with your license key and a Listener that is called if a result is found</span>
<span class="n">barcodeScanView</span><span class="o">.</span><span class="na">initAnyline</span><span class="o">(</span><span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">anyline_license_key</span><span class="o">),</span> <span class="k">new</span> <span class="n">BarcodeResultListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onResult</span><span class="o">(</span><span class="n">String</span> <span class="n">result</span><span class="o">,</span> <span class="n">BarcodeScanView</span><span class="o">.</span><span class="na">BarcodeFormat</span> <span class="n">format</span><span class="o">,</span> <span class="n">AnylineImage</span> <span class="n">image</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// This is called when a result is found.</span>
    <span class="o">}</span>
<span class="o">});</span>
</code></pre>

<blockquote>
<p>in onResume()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">barcodeScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
</code></pre>

<blockquote>
<p>in onPause()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">barcodeScanView</span><span class="o">.</span><span class="na">cancelScanning</span><span class="o">();</span>
<span class="c1">//IMPORTANT: always release the camera in onPause</span>
<span class="n">barcodeScanView</span><span class="o">.</span><span class="na">releaseCameraInBackground</span><span class="o">();</span>
</code></pre>

<p>There are four simple steps necessary to get started:</p>

<ol>
<li>If you do not use XML configuration set the <a href="#barcodeConfig">config-file</a> to your BarcodeScanView using the <em>setConfigFromAsset</em> method and make sure that the json config-file is located in the Android assets folder.</li>
<li>Call initAnyline with your valid license key and a new instance of BarcodeResultListener, which can be used to handle the bar/QR code results.</li>
<li>Call <em>startScanning()</em></li>
<li>When done call <em>cancelScanning()</em> and <em>releaseCameraInBackground()</em> or <em>releaseCamera()</em></li>
</ol>

<h6 id="newline">&NewLine;</h6>
<pre class="highlight java"><code><span class="c1">// limit the barcode scanner to QR codes or CODE_128 codes</span>
<span class="n">barcodeScanView</span><span class="o">.</span><span class="na">setBarcodeFormats</span><span class="o">(</span><span class="n">BarcodeScanView</span><span class="o">.</span><span class="na">BarcodeFormat</span><span class="o">.</span><span class="na">QR_CODE</span><span class="o">,</span> <span class="n">BarcodeScanView</span><span class="o">.</span><span class="na">BarcodeFormat</span><span class="o">.</span><span class="na">CODE_128</span><span class="o">);</span>
</code></pre>

<p>In an optional step, you can limit the barcode scanning to one or multiple barcode formats with setBarcodeFormats(BarcodeScanView.BarcodeFormat&hellip;);</p>

<h6 id="example-activity-layout">Example Activity Layout</h6>
<pre class="highlight xml"><code><span class="nt">&lt;RelativeLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

 <span class="nt">&lt;at.nineyards.anyline.modules.barcode.BarcodeScanView</span>
    <span class="na">android:id=</span><span class="s">"@+id/barcode_scan_view"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span>
</code></pre>

<p>The BarcodeScanView can simply be included in the activity layout file, just like any other view. The view can be either configured via XML or otherwise a config json file can be used to adapt the scan view.</p>

<p><a name="barcodeConfig"> </a></p>

<h6 id="example-config-for-the-barcode-module">Example config for the Barcode Module</h6>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"captureResolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"720p"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cutout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"maxWidthPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80%"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"ratioFromSize"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
            </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FFFFFF"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"outerColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"outerAlpha"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"flash"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bottom_right"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"beepOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"vibrateOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"blinkAnimationOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cancelOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The config file enables a quick and easy adaption of the scan view.</p>

<p>Some of the most important config options may be:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>captureResolution</td>
<td>the preferred camera preview size</td>
</tr>
<tr>
<td>cutout</td>
<td>defining which area of the preview will be &ldquo;cutout&rdquo; (analyzed to find bar/QR code)</td>
</tr>
<tr>
<td>flash</td>
<td>defines the flash mode, where to place the flash symbol, etc.</td>
</tr>
<tr>
<td>beepOnResult</td>
<td>enables acoustic feedback on successful scan</td>
</tr>
<tr>
<td>vibrateOnResult</td>
<td>haptic feedback on successful scan</td>
</tr>
<tr>
<td>blinkOnResult</td>
<td>visual feedback on successful scan</td>
</tr>
<tr>
<td>cancelOnResult</td>
<td>true, if the scanning process should be stopped after one result; needs manual restart for additional scans</td>
</tr>
</tbody></table>

<p>A detailed description of all available config items can be found in <a href="#anyline-config">Anyline Config</a></p>

<p>It is also possible to use xml-attributes instead of the json config file. For more detailed information see <a href="#configureViaXML">XML Configuration</a></p>

<h3 id="ios">iOS</h3>

<p>There are three steps necessary to get a scan result:</p>

<h6 id="1-initialize-the-module-in-viewdidload">1. Initialize the module in viewDidLoad</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
    <span class="n">self</span><span class="p">.</span><span class="n">barcodeModule</span> <span class="o">=</span> <span class="p">[[</span><span class="n">AnylineBarcodeModuleView</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="mi">640</span><span class="p">)];</span>
   <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nf">addSubview</span><span class="p">:</span><span class="n">self</span><span class="p">.</span><span class="n">barcodeModule</span><span class="p">];</span>
    <span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">barcodeModule</span> <span class="nf">setupWithLicenseKey</span><span class="p">:</span><span class="n">kMyLicenseKey</span> <span class="nf">delegate</span><span class="p">:</span><span class="n">self</span> <span class="nf">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">success</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle the error here
</span>    <span class="p">}</span>
    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">barcodeModule</span> <span class="nf">setBarcodeFormats</span><span class="p">:@[</span><span class="n">kCodeTypeEAN8</span><span class="p">,</span> <span class="n">kCodeTypeEAN13</span><span class="p">,</span> <span class="n">kCodeTypeQR</span><span class="p">]]</span>
<span class="p">}</span>
</code></pre>

<ul>
<li>Create a property, initialize the module in the viewDidLoad method and add it to the view of the ViewController.</li>
<li>Supply the license key and set the delegate, which will receive a call once a result is found. The boolean returned by the setup routine notifies you if the Anyline setup was successful. If an error occurred the error needs to be handled.</li>
<li>After the succesful setup, set the barcode types that should be scanned.</li>
</ul>

<p>Valid types are:</p>

<ul>
<li>kCodeTypeAztec</li>
<li>kCodeTypeCodabar</li>
<li>kCodeTypeCode39</li>
<li>kCodeTypeCode93</li>
<li>kCodeTypeCode128</li>
<li>kCodeTypeDataMatrix</li>
<li>kCodeTypeEAN8</li>
<li>kCodeTypeEAN13</li>
<li>kCodeTypeITF</li>
<li>kCodeTypePDF417</li>
<li>kCodeTypeQR</li>
<li>kCodeTypeRSS14</li>
<li>kCodeTypeRSSExpanded</li>
<li>kCodeTypeUPCA</li>
<li>kCodeTypeUPCE</li>
<li>kCodeTypeUPCEANExtension</li>
</ul>

<h6 id="2-start-the-scanning-process-in-viewdidappear">2. Start the scanning process in viewDidAppear</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidAppear</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">animated</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">super</span> <span class="nf">viewDidAppear</span><span class="p">:</span><span class="n">animated</span><span class="p">];</span>
    <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">;</span>
    <span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">barcodeModule</span> <span class="nf">startScanningAndReturnError</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
    <span class="n">NSAssert</span><span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="s">@"Start failed: %@"</span><span class="p">,</span><span class="n">error</span><span class="p">.</span><span class="n">debugDescription</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">success</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle the error here
</span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Once Anyline is set up successful, start the scanning process in viewDidAppear.
If there is a problem starting the scanning process an error object will be set, so the error can be handled.</p>

<h6 id="3-implement-the-delegate-method-and-receive-results">3. Implement the delegate method and receive results</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">anylineBarcodeModuleView</span><span class="p">:(</span><span class="n">AnylineBarcodeModuleView</span> <span class="o">*</span><span class="p">)</span><span class="nv">anylineBarcodeModuleView</span>
               <span class="nf">didFindScanResult</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">scanResult</span>
                   <span class="nf">barcodeFormat</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">barcodeFormat</span>
                         <span class="nf">atImage</span><span class="p">:(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nv">image</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">"Scan result: %@"</span><span class="p">,</span> <span class="n">scanResult</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p>When a valid result is found, the delegate will be called and you get the following values:  </p>

<ul>
<li><strong>scanResult:</strong> a <em>string</em> containing the scanned code</li>
<li><strong>barcodeFormat:</strong> a <em>string</em> representing the format of the scanned barcode</li>
<li><strong>image</strong>: the cropped image which was used to scan the value</li>
</ul>

<h3 id="cordova-plugin">Cordova Plugin</h3>

<h6 id="example-call-for-the-barcode-module">Example call for the Barcode Module</h6>

<p>Call the exec method with <em>BARCODE</em>. For a more detailed description of the config parameters used, see the <a href="#cordova-example">example</a> in Quick Start.</p>
<pre class="highlight plaintext"><code>cordova.exec(onResult, onError, "AnylineSDK", "BARCODE",
    [
        "YOUR_LICENSE_KEY",
        {
            "captureResolution": "720p",
            "cutout": {
                "style": "rect",
                "maxWidthPercent": "80%",
                "maxHeightPercent": "80%",
                "alignment": "center",
                "ratioFromSize": {
                    "width": 100,
                    "height": 80
                },
                "strokeWidth": 4,
                "cornerRadius": 10,
                "strokeColor": "FFFFFF",
                "outerColor": "000000",
                "outerAlpha": 0.3
            },
            "flash": {
                "mode": "manual",
                "alignment": "bottom_right"
            },
            "beepOnResult": true,
            "vibrateOnResult": true,
            "blinkAnimationOnResult": true,
            "cancelOnResult": false
        }
    ]
);
</code></pre>

          <p><a name="energyModule"> </a></p>

<h2 id="energy">Energy</h2>

<p>The Anyline Energy module is capable of scanning analog electric-, gas- and water-meter readings.
It is also possible to scan bar- and QR-codes, which is useful for identifying meters.
Common digital meters and heat meters can also be scanned (but this is ALPHA).</p>

<h4 id="all-the-possible-scan-modes">All the possible scan modes</h4>

<p>All analog meters where this is not mentioned specifically assume white digits on black background.</p>

<p><strong>Electric Meter</strong><br/>
Android and Cordova: <em>ELECTRIC_METER</em>, iOS: <em>ALElectricMeter</em><br/>
Scan analog electric meters with 5 or 6 pre-decimal places.
The digit count is detected automatically. No decimal places are included in the result.
The auto-detection requires the decimal area to be highlighted in red.</p>

<p><strong>Electric Meter 5 pre-decimal places (ALPHA)</strong><br/>
Android and Cordova: <em>ELECTRIC_METER_5_1</em>, iOS: <em>ALElectricMeter5_1</em><br/>
Scan analog electric meters with 5 pre-decimal places. If it can be detected, up to one decimal place is included in the result, otherwise the decimal places will be omitted.
The decimal is represented by a dot in the result, not a comma.
This mode is useful if there is no red marking for the decimal place or if the first decimal place is relevant.</p>

<p>This mode may be removed in the future, if the same can be achieved with the automatic mode.</p>

<p><strong>Electric Meter 6 pre-decimal places (ALPHA)</strong><br/>
Android and Cordova: <em>ELECTRIC_METER_6_1</em>, iOS: <em>ALElectricMeter6_1</em><br/>
Same as above with 6 pre-decimal places.</p>

<p><strong>Gas Meter</strong><br/>
Android and Cordova: <em>GAS_METER</em>, iOS: <em>ALGasMeter</em><br/>
Scan analog gas meters with 5 digits before the point. The decimal places are ignored.</p>

<p><strong>Gas Meter 6 pre-decimal places</strong><br/>
Android and Cordova: <em>GAS_METER_6</em>, iOS: <em>ALGasMeter6</em><br/>
Scan analog gas meters with 6 digits before the point. The decimal places are ignored.</p>

<p><strong>Water Meter White (ALPHA)</strong><br/>
Android and Cordova: <em>WATER_METER_WHITE</em>, iOS: <em>ALWaterMeterWhite</em><br/>
Scan analog water meters with white background (black digits) with 5 digits before the point.
The decimal places are ignored.</p>

<p><strong>Water Meter Black (ALPHA)</strong><br/>
Android and Cordova: <em>WATER_METER_BLACK</em>, iOS: <em>ALWaterMeterBlack</em><br/>
Scan analog water meters with black background (white digits) with 5 digits before the point.
The decimal places are ignored.</p>

<p><strong>Analog Meter White (ALPHA)</strong><br/>
Android and Cordova: <em>ANALOG_METER_WHITE</em>, iOS: <em>ALAnalogMeterWhite</em><br/>
Scan any analog meters with white background (black digits) with 5 or 6 digits before the point.
The decimal places are ignored.</p>

<p><strong>Analog Meter with 4 pre-decimal places (ALPHA)</strong><br/>
Android and Cordova: <em>ANALOG_METER_4</em>, iOS: <em>ALAnalogMeter4</em><br/>
Scan any analog meters with 4 digits before the point.
The decimal places are ignored.</p>

<p><strong>Analog Meter with 7 pre-decimal places (ALPHA)</strong><br/>
Android and Cordova: <em>ANALOG_METER_7</em>, iOS: <em>ALAnalogMeter7</em><br/>
Scan any analog meters with 7 digits before the point.
The decimal places are ignored.</p>

<p><strong>Digital Meter (ALPHA)</strong><br/>
Android and Cordova: <em>DIGITAL_METER</em>, iOS: <em>ALDigitalMeter</em><br/>
Is a general scanner for digital meters with at least 5 digits. It will try to find the highest number of connected digits and return the result without decimal marker.</p>

<p><strong>Heat Meter with 4 pre-decimal (up to 3 decimal) places (ALPHA)</strong><br/>
Android and Cordova: <em>HEAT_METER_4</em>, iOS: <em>ALHeatMeter4</em><br/>
Scan digital heat meters with 4 pre-decimal and up to 3 decimal places. If detected, the decimal digits are included in the result, otherwise they are omitted.</p>

<p>This mode may be replaced in the future with a mode that automatically detects the amount of digits.</p>

<p><strong>Heat Meter with 5 pre-decimal (up to 3 decimal) places (ALPHA)</strong><br/>
Android and Cordova: <em>HEAT_METER_5</em>, iOS: <em>ALHeatMeter5</em><br/>
Same as above with 5 digits before the point.</p>

<p><strong>Heat Meter with 6 pre-decimal (up to 3 decimal) places (ALPHA)</strong><br/>
Android and Cordova: <em>HEAT_METER_6</em>, iOS: <em>ALHeatMeter6</em><br/>
Same as above with 6 digits before the point.</p>

<p><strong>Bar- and QR-Codes</strong><br/>
Android and Cordova: <em>BARCODE</em>, iOS: <em>ALBarcode</em><br/>
Scan bar and QR codes. This mode can be used to identify a meter. See the <a href="#available-barcode-formats">barcode module</a> for supported types.</p>

<p><strong>Serial Numbers (ALPHA)</strong><br/>
Android and Cordova: <em>SERIAL_NUMBER</em>, iOS: <em>ALSerialNumber</em><br/>
Scan serial numbers that are engraved or printed onto a meter (consisting of numbers 0-9).</p>

<h3 id="android">Android</h3>

<p><a name="energyModuleRestrictions"> </a></p>

<h4 id="restrictions-for-the-energy-module-config">Restrictions for the Energy-Module Config</h4>

<ul>
<li>Capture resolution is currently fixed to 720p on Android (optimized for good results on as many devices as possible).</li>
<li><b>The size and ratio of the cutout is predefined and cannot be changed </b>(sizes are optimized for best results)</li>
<li>The cutout should be placed fairly high (use alignment top and a small y offset), because this reduces reflections considerably when used with flash.</li>
<li>Flash mode <em>auto</em> is still in alpha stage therefore <em>manual</em> mode is preferred</li>
</ul>

<h4 id="example">Example</h4>

<p>The following example files illustrate a simple use-case of the energy module.</p>

<h6 id="example-activity">Example  Activity</h6>

<blockquote>
<p>in onCreate or onActivityCreated lifecycle methods</p>
</blockquote>
<pre class="highlight java"><code><span class="n">energyScanView</span> <span class="o">=</span> <span class="o">(</span><span class="n">EnergyScanView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">energy_scan_view</span><span class="o">);</span>

<span class="c1">// set the scan mode to start with</span>
<span class="n">energyScanView</span><span class="o">.</span><span class="na">setScanMode</span><span class="o">(</span><span class="n">EnergyScanView</span><span class="o">.</span><span class="na">ScanMode</span><span class="o">.</span><span class="na">ELECTRIC_METER</span><span class="o">);</span>

<span class="c1">// initialize Anyline with your license key and a Listener that is called if a result is found</span>
<span class="n">energyScanView</span><span class="o">.</span><span class="na">initAnyline</span><span class="o">(</span><span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">anyline_license_key</span><span class="o">),</span> <span class="k">new</span> <span class="n">EnergyResultListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onResult</span><span class="o">(</span><span class="n">EnergyScanView</span><span class="o">.</span><span class="na">ScanMode</span> <span class="n">scanMode</span><span class="o">,</span> <span class="n">String</span> <span class="n">result</span><span class="o">,</span>
                         <span class="n">AnylineImage</span> <span class="n">resultImage</span><span class="o">,</span> <span class="n">AnylineImage</span> <span class="n">fullImage</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">// This is called when a result is found.</span>
        <span class="c1">// The scanMode is the mode the result was found for. The result is the actual result.</span>
        <span class="c1">// If the a meter reading was scanned two images are provided as well, one shows the targeted area only</span>
        <span class="c1">// the other shows the full image. (Images are null in barcode mode)</span>
        <span class="c1">// The result for meter readings is a String with leading zeros (if any) and no decimals.</span>

    <span class="o">}</span>
<span class="o">});</span>
</code></pre>

<blockquote>
<p>in onResume()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">energyScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
</code></pre>

<blockquote>
<p>in onPause()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">energyScanView</span><span class="o">.</span><span class="na">cancelScanning</span><span class="o">();</span>
<span class="c1">//IMPORTANT: always release the camera in onPause</span>
<span class="n">energyScanView</span><span class="o">.</span><span class="na">releaseCameraInBackground</span><span class="o">();</span>
</code></pre>

<p>In order to start the scan process, perform the following steps:</p>

<ol>
<li>If you prefer a json-file for configuration, use the <em>setConfigFromAsset</em> method and place the json-config in the Android assets folder, otherwise configure the view using the xml attributes in the activity layout file.</li>
<li>Set the scan mode.</li>
<li>Call <em>initAnyline</em> with your valid license key and a new instance of EnergyResultListener, which is the callback for handling the results</li>
<li>Call <em>startScanning()</em></li>
<li>When done call <em>cancelScanning()</em> and <em>releaseCameraInBackground()</em> or <em>releaseCamera()</em></li>
</ol>

<p>For each successful scan, you will receive four result-attributes:</p>

<ul>
<li><strong>scanMode:</strong> the mode the result was found in</li>
<li><strong>result</strong>: the detected value as a String</li>
<li><strong>resultImage</strong>:

<ul>
<li>the cropped image that has been used to scan the value</li>
</ul></li>
<li><strong>fullImage</strong>:

<ul>
<li>the full image (before cropping) (null in scan mode BAR_CODE and SERIAL_NUMBER)</li>
</ul></li>
</ul>

<h6 id="example-switching-the-scan-mode">Example: switching the scan mode</h6>

<p>It is possible to switch the scan mode at any time, but you have to call <em>startScanning()</em> again when you switch the mode!
The example shows how switching could be implemented with a radio group selection.</p>
<pre class="highlight java"><code> <span class="c1">// switch the scan mode depending on user selection</span>
        <span class="n">radioGroup</span><span class="o">.</span><span class="na">setOnCheckedChangeListener</span><span class="o">(</span><span class="k">new</span> <span class="n">RadioGroup</span><span class="o">.</span><span class="na">OnCheckedChangeListener</span><span class="o">()</span> <span class="o">{</span>
            <span class="nd">@Override</span>
            <span class="kd">public</span> <span class="kt">void</span> <span class="n">onCheckedChanged</span><span class="o">(</span><span class="n">RadioGroup</span> <span class="n">group</span><span class="o">,</span> <span class="kt">int</span> <span class="n">checkedId</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">radio_electric</span> <span class="o">==</span> <span class="n">checkedId</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">setScanMode</span><span class="o">(</span><span class="n">EnergyScanView</span><span class="o">.</span><span class="na">ScanMode</span><span class="o">.</span><span class="na">ELECTRIC_METER</span><span class="o">);</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">radio_electric_6</span> <span class="o">==</span> <span class="n">checkedId</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">setScanMode</span><span class="o">(</span><span class="n">EnergyScanView</span><span class="o">.</span><span class="na">ScanMode</span><span class="o">.</span><span class="na">ELECTRIC_METER_5_1</span><span class="o">);</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">radio_electric_7</span> <span class="o">==</span> <span class="n">checkedId</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">setScanMode</span><span class="o">(</span><span class="n">EnergyScanView</span><span class="o">.</span><span class="na">ScanMode</span><span class="o">.</span><span class="na">ELECTRIC_METER_6_1</span><span class="o">);</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">radio_gas</span> <span class="o">==</span> <span class="n">checkedId</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">setScanMode</span><span class="o">(</span><span class="n">EnergyScanView</span><span class="o">.</span><span class="na">ScanMode</span><span class="o">.</span><span class="na">GAS_METER</span><span class="o">);</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">radio_water_white</span> <span class="o">==</span> <span class="n">checkedId</span><span class="o">){</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">setScanMode</span><span class="o">(</span><span class="n">EnergyScanView</span><span class="o">.</span><span class="na">ScanMode</span><span class="o">.</span><span class="na">WATER_METER_WHITE</span><span class="o">);</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
                <span class="o">}</span> <span class="k">else</span><span class="o">{</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">setScanMode</span><span class="o">(</span><span class="n">EnergyScanView</span><span class="o">.</span><span class="na">ScanMode</span><span class="o">.</span><span class="na">WATER_METER_BLACK</span><span class="o">);</span>
                    <span class="n">energyScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
                <span class="o">}</span>
            <span class="o">}</span>

</code></pre>

<h6 id="example-activity-layout">Example Activity Layout</h6>
<pre class="highlight xml"><code><span class="nt">&lt;RelativeLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

<span class="nt">&lt;at.nineyards.anyline.modules.energy.EnergyScanView</span>
    <span class="na">android:id=</span><span class="s">"@+id/energy_scan_view"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="na">app:cutout_alignment=</span><span class="s">"top"</span>
    <span class="na">app:cutout_style=</span><span class="s">"rect"</span>
    <span class="na">app:cutout_outside_color=</span><span class="s">"#55000000"</span>
    <span class="na">app:cutout_offset_y=</span><span class="s">"120"</span>
    <span class="na">app:cutout_rect_corner_radius_in_dp=</span><span class="s">"4"</span>
    <span class="na">app:cutout_stroke_width_in_dp=</span><span class="s">"2"</span>
    <span class="na">app:cutout_stroke_color=</span><span class="s">"#FFFFFF"</span>
    <span class="na">app:flash_mode=</span><span class="s">"manual"</span>
    <span class="na">app:flash_alignment=</span><span class="s">"bottom_right"</span>
    <span class="na">app:beep_on_result=</span><span class="s">"true"</span>
    <span class="na">app:vibrate_on_result=</span><span class="s">"true"</span>
    <span class="na">app:blink_animation_on_result=</span><span class="s">"true"</span>
    <span class="na">app:cancel_on_result=</span><span class="s">"true"</span>
    <span class="nt">/&gt;</span>

<span class="nt">&lt;/RelativeLayout&gt;</span>
</code></pre>

<p>The EnergyScanView can simply be included in the activity layout.</p>

<p>For custom configuration (e.g. cutout, flash, feedback on successful scan, etc.) you can either use a json-file or XML-attributes like in the example. If you need more detailed information about all available config items see <a href="#anyline-config">Anyline Config</a>. Please consider the <a href="#energyModuleRestrictions">config restrictions</a> mentioned above when configuring the EnergyScanView.  </p>

<h6 id="reporting">Reporting</h6>
<pre class="highlight java"><code><span class="n">energyScanView</span><span class="o">.</span><span class="na">setReportingEnabled</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
</code></pre>

<p>The reporting of analog meter results in the Community Edition (including an image of the scanned meter) helps us to improve our product, and the customer experience.
It is possible to turn off this feature by calling <em>setReportingEnabled(false)</em> on the EnergyScanView.</p>

<h3 id="ios">iOS</h3>

<h4 id="restrictions-for-the-energy-module-config">Restrictions for the Energy-Module Config:</h4>

<ul>
<li>Flash mode <em>auto</em> is still in alpha stage therefore <em>manual</em> mode is preferred</li>
</ul>

<h4 id="example">Example</h4>

<p>In order to get scan results, it is necessary to perform the following three steps:</p>

<h6 id="1-initialize-the-module-in-viewdidload">1. Initialize the module in viewDidLoad</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
    <span class="n">self</span><span class="p">.</span><span class="n">energyModule</span> <span class="o">=</span> <span class="p">[[</span><span class="n">AnylineEnergyModuleView</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="mi">640</span><span class="p">)];</span>
   <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nf">addSubview</span><span class="p">:</span><span class="n">self</span><span class="p">.</span><span class="n">energyModule</span><span class="p">];</span>
    <span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">energyModule</span> <span class="nf">setupWithLicenseKey</span><span class="p">:</span><span class="n">kMyLicenseKey</span> <span class="nf">delegate</span><span class="p">:</span><span class="n">self</span> <span class="nf">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">success</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle the error here
</span>    <span class="p">}</span>
    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">energyModule</span> <span class="nf">setScanMode</span><span class="p">:</span><span class="n">ALElectricMeter</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>

<ul>
<li>Create a property, initialize the module in the viewDidLoad method and add it to the view of the ViewController.</li>
<li>Supply the license key and set the delegate, which will receive a call once a result is found. The boolean returned by the setup routine notifies you if the Anyline setup was successful. If an error occurred the error needs to be handled</li>
<li>After the successful setup, set the scan mode utilizing <em>setScanMode</em></li>
</ul>

<h6 id="2-start-the-scanning-process-in-viewdidappear">2. Start the scanning process in viewDidAppear</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidAppear</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">animated</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">super</span> <span class="nf">viewDidAppear</span><span class="p">:</span><span class="n">animated</span><span class="p">];</span>
    <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">;</span>
    <span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">energyModule</span> <span class="nf">startScanningAndReturnError</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
    <span class="n">NSAssert</span><span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="s">@"Start failed: %@"</span><span class="p">,</span><span class="n">error</span><span class="p">.</span><span class="n">debugDescription</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">success</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle the error here
</span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>If there is an error staring the scanning process the error object will be set and you can handle the error.</p>

<h6 id="3-implement-the-delegate-method-and-receive-results">3. Implement the delegate method and receive results</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">anylineEnergyModuleView</span><span class="p">:(</span><span class="n">AnylineEnergyModuleView</span> <span class="o">*</span><span class="p">)</span><span class="nv">anylineEnergyModuleView</span>
              <span class="nf">didFindScanResult</span><span class="p">:(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">scanResult</span>
                      <span class="nf">cropImage</span><span class="p">:(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nv">image</span>
                      <span class="nf">fullImage</span><span class="p">:(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nv">fullImage</span>
                         <span class="nf">inMode</span><span class="p">:(</span><span class="n">ALScanMode</span><span class="p">)</span><span class="nv">scanMode</span><span class="p">;</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">"Scan result: %@"</span><span class="p">,</span> <span class="n">scanResult</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p>Once Anyline has found a valid result the delegate is called and you get an result object with four result attributes.</p>

<ul>
<li><strong>scanMode:</strong> the mode the result belongs to</li>
<li><strong>scanResult</strong>: the detected value as <em>string</em></li>
<li><strong>image</strong>:

<ul>
<li>scanMode = meter: the cropped image that has been used to scan the meter value</li>
<li>scanMode = code: null</li>
</ul></li>
<li><strong>fullImage</strong>:

<ul>
<li>scanMode = meter: the full image (before cropping)</li>
<li>scanMode = code: null</li>
</ul></li>
</ul>

<h6 id="reporting">Reporting</h6>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">anylineEnergyView</span> <span class="nf">enableReporting</span><span class="p">:</span><span class="nb">NO</span><span class="p">];</span>
</code></pre>

<p>The reporting of analog meter results in the Community Edition (including an image of the scanned meter) helps us to improve our product, and the customer experience.
It is possible to turn off this feature by calling
 <em>-(void)enableReporting:(BOOL)enable</em> on the AnylineEnergyModuleView.</p>

<h3 id="cordova-plugin">Cordova Plugin</h3>

<h6 id="example-call-for-the-energy-module">Example call for the Energy Module</h6>
<pre class="highlight plaintext"><code>cordova.exec(onResult, onError, "AnylineSDK", "ELECTRIC_METER",
    [
        "YOUR_LICENSE_KEY",
        {
            "captureResolution": "720p",
            "cutout": {
                "style": "rect",
                "alignment": "top",
                "offset": {
                    "x": 0,
                    "y": 120
                },
                "strokeWidth": 2,
                "cornerRadius": 4,
                "strokeColor": "FFFFFF",
                "outerColor": "000000",
                "outerAlpha": 0.3
            },
            "flash": {
                "mode": "manual",
                "alignment": "bottom_right"
            },
            "beepOnResult": true,
            "vibrateOnResult": true,
            "blinkAnimationOnResult": true,
            "cancelOnResult": true
        }
    ]
);
</code></pre>

<p>For all possible scan modes see <a href="#energyModule">above</a>.
For more information about the config parameters see the <a href="#cordova-example">example</a> in section Quick Start.</p>

<h6 id="reporting">Reporting</h6>
<pre class="highlight plaintext"><code>//...
            "blinkAnimationOnResult": true,
            "cancelOnResult": true,
            "reportingEnabled": false
        }
    ]
</code></pre>

<p>The reporting of analog meter results in the Community Edition (including an image of the scanned meter) helps us to improve our product, and the customer experience.
It is possible to turn off this feature by adding <em>&ldquo;reportingEnabled&rdquo;: false</em> to the above config.</p>

          <p><a name="mrzModule"> </a></p>

<h2 id="mrz">MRZ</h2>

<p>The Anyline MRZ module provides the functionality to scan passports and other IDs using the MRZ (Machine Readable Zone).</p>

<p>For each scan result the module generates an identification object, containing all relevant information as well as the image of the scanned document.</p>

<p><a name="scannedInfo"> </a>
<strong>Information scanned:</strong></p>

<table><thead>
<tr>
<th>value</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td>expirationDate</td>
<td>expiration date of the document</td>
</tr>
<tr>
<td>dayOfBirth</td>
<td>date of birth</td>
</tr>
<tr>
<td>checkDigitDayOfBirth</td>
<td>check digit for the date of birth</td>
</tr>
<tr>
<td>checkDigitExpirationDate</td>
<td>check digit for the expiration date</td>
</tr>
<tr>
<td>issuingCountryCode</td>
<td>issuing country code</td>
</tr>
<tr>
<td>nationalityCountryCode</td>
<td>nationality country code</td>
</tr>
<tr>
<td>countryCode</td>
<td>country code (Deprecated since 3.2.1. Use issuingCountryCode and nationalityCountryCode instead)</td>
</tr>
<tr>
<td>surNames</td>
<td>surnames</td>
</tr>
<tr>
<td>givenNames</td>
<td>all given first names</td>
</tr>
<tr>
<td>personalNumber</td>
<td>personal number</td>
</tr>
<tr>
<td>personalNumber2</td>
<td>2nd personal number on TD1 sized MROTDs</td>
</tr>
<tr>
<td>checkDigitPersonalNumber</td>
<td>check digit for personal number</td>
</tr>
<tr>
<td>checkDigitDates</td>
<td>check digit for both dates</td>
</tr>
<tr>
<td>documentType</td>
<td>type of the document that was read. (ID/P/IT)</td>
</tr>
<tr>
<td>documentNumber</td>
<td>document number</td>
</tr>
<tr>
<td>checkDigitNumber</td>
<td>check digit for the document number</td>
</tr>
<tr>
<td>checkDigitFinal</td>
<td>check digit</td>
</tr>
<tr>
<td>sex</td>
<td>gender of the person</td>
</tr>
<tr>
<td>allCheckDigitsValid</td>
<td>flag indicating if all check digits are valid</td>
</tr>
</tbody></table>

<aside class="notice">
Please be aware that not every property is filled for every document type (e.g. some ID MRZs do not contain a sex information).
<p></p>
Furthermore its important to know, that the names may not be printed completely as the machine readable zone has a limited amount of characters.
</aside>

<h3 id="android">Android</h3>

<h5 id="restrictions-for-the-mrz-module-config">Restrictions for the MRZ module config:</h5>

<ul>
<li>The ratio of the cutout can not be changed and is predefined to fit well for passports and IDs.</li>
<li>Flash mode <em>auto</em> is still in alpha stage therefore <em>manual</em> mode is preferred.</li>
</ul>

<h4 id="example">Example</h4>

<p>The following example files illustrate a simple use-case of the MRZ module.</p>

<h6 id="example-activity">Example Activity</h6>

<blockquote>
<p>in onCreate or onActivityCreated lifecycle methods</p>
</blockquote>
<pre class="highlight java"><code><span class="n">mrzResultView</span> <span class="o">=</span> <span class="o">(</span><span class="n">MrzScanView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">mrz_result</span><span class="o">);</span>
<span class="n">mrzScanView</span><span class="o">.</span><span class="na">setConfigFromAsset</span><span class="o">(</span><span class="s">"mrz_view_config.json"</span><span class="o">);</span>

<span class="c1">// initialize Anyline with your license key and a Listener that is called if a result is found</span>
<span class="n">mrzScanView</span><span class="o">.</span><span class="na">initAnyline</span><span class="o">(</span><span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">anyline_license_key</span><span class="o">),</span> <span class="k">new</span> <span class="n">MrzResultListener</span><span class="o">()</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onResult</span><span class="o">(</span><span class="n">Identification</span> <span class="n">mrzResult</span><span class="o">,</span> <span class="n">AnylineImage</span> <span class="n">anylineImage</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">// This is called when a result is found.</span>
        <span class="c1">// The Identification includes all the data read from the MRZ</span>
        <span class="c1">// as scanned and the given image shows the scanned ID/Passport</span>
    <span class="o">}</span>
<span class="o">});</span>
<span class="n">mrzScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
</code></pre>

<blockquote>
<p>in onResume()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">mrzScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
</code></pre>

<blockquote>
<p>in onPause()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">mrzScanView</span><span class="o">.</span><span class="na">cancelScanning</span><span class="o">();</span>
<span class="c1">//IMPORTANT: always release the camera in onPause</span>
<span class="n">mrzScanView</span><span class="o">.</span><span class="na">releaseCameraInBackground</span><span class="o">();</span>
</code></pre>

<p>There are four simple steps necessary to get started:</p>

<ol>
<li>If you do not use XML configuration set the <a href="#mrzConfig">config-file</a> to your MrzScanView using the <em>setConfigFromAsset</em> method and make sure that the json config-file is located in the Android assets folder</li>
<li>Call <em>initAnyline</em> with your valid license key and a new instance of MrzResultListener, which will be used as callback for each successful scan.</li>
<li>Call <em>startScanning()</em></li>
<li>When done, call <em>cancelScanning()</em> and <em>releaseCameraInBackground()</em> or <em>releaseCamera()</em></li>
</ol>

<h6 id="example-activity-layout">Example Activity Layout</h6>
<pre class="highlight xml"><code><span class="nt">&lt;RelativeLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:tools=</span><span class="s">"http://schemas.android.com/tools"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

    <span class="nt">&lt;at.nineyards.anyline.modules.mrz.MrzScanView</span>
        <span class="na">android:id=</span><span class="s">"@+id/mrz_view"</span>
        <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span>
</code></pre>

<p>The MrzScanView can simply be included in the activity layout file, just like any other view. The view can be either configured via XML or with a config json.</p>

<p><a name="mrzConfig"> </a></p>

<h6 id="example-config-for-the-mrz-module">Example config for the MRZ Module</h6>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"captureResolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1080p"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cutout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"maxWidthPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90%"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"maxHeightPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"90%"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"top_half"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FFFFFF"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"outerColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"outerAlpha"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"flash"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"manual"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bottom_right"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"beepOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"vibrateOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"blinkAnimationOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cancelOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>A detailed description of all available config items can be found in <a href="#anyline-config">Anyline Config</a>.</p>

<p>It is also possible to use xml-attributes instead of the json config file. For more detailed information see <a href="#configureViaXML">XML Configuration</a></p>

<h3 id="ios">iOS</h3>

<h5 id="restrictions-for-the-mrz-module-config">Restrictions for the MRZ-Module Config:</h5>

<ul>
<li>Flash mode <em>auto</em> is still in alpha stage therefore <em>manual</em> mode is preferred</li>
</ul>

<h4 id="example">Example</h4>

<p>There are three steps necessary to get a scan result:</p>

<h6 id="1-initialize-the-module-in-viewdidload">1. Initialize the module in viewDidLoad</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">viewDidLoad</span> <span class="p">{</span>
    <span class="n">self</span><span class="p">.</span><span class="n">mrzModule</span> <span class="o">=</span> <span class="p">[[</span><span class="n">AnylineMRZModuleView</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">640</span><span class="p">,</span> <span class="mi">640</span><span class="p">)];</span>
   <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nf">addSubview</span><span class="p">:</span><span class="n">self</span><span class="p">.</span><span class="n">mrzModule</span><span class="p">];</span>
    <span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">mrzModule</span> <span class="nf">setupWithLicenseKey</span><span class="p">:</span><span class="n">kMyLicenseKey</span> <span class="nf">delegate</span><span class="p">:</span><span class="n">self</span> <span class="nf">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">success</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle the error here
</span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Create a property, initialize the module in the viewDidLoad method and add it to the view of the ViewController. Supply the license key and set the delegate, which will receive a call once a result is found. The boolean returned by the setup routine notifies you if the Anyline setup was successful. If an error occurred the error needs to be handled.</p>

<h6 id="2-start-scanning-process-in-viewdidappear">2. Start scanning process in viewDidAppear</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidAppear</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">animated</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">super</span> <span class="nf">viewDidAppear</span><span class="p">:</span><span class="n">animated</span><span class="p">];</span>
    <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">;</span>
    <span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">mrzModule</span> <span class="nf">startScanningAndReturnError</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
    <span class="n">NSAssert</span><span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="s">@"Start failed: %@"</span><span class="p">,</span><span class="n">error</span><span class="p">.</span><span class="n">debugDescription</span><span class="p">);</span>
    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">success</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Handle the error here
</span>    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>If there is a problem while starting the scanning process, an error object will be set so the error can be handled.</p>

<h6 id="3-implement-the-delegate-method-and-receive-results">3. Implement the delegate method and receive results</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">anylineMRZModuleView</span><span class="p">:(</span><span class="n">AnylineMRZModuleView</span> <span class="o">*</span><span class="p">)</span><span class="nv">anylineMRZModuleView</span>
           <span class="nf">didFindScanResult</span><span class="p">:(</span><span class="n">ALIdentification</span> <span class="o">*</span><span class="p">)</span><span class="nv">scanResult</span>
          <span class="nf">allCheckDigitsValid</span><span class="p">:(</span><span class="n">BOOL</span><span class="p">)</span><span class="nv">allCheckDigitsValid</span>
                     <span class="nf">atImage</span><span class="p">:(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nv">image</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">"Scan result: %@"</span><span class="p">,</span> <span class="n">scanResult</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p>When a valid result is found, it will call the delegate. ScanResult is an object of type ALIdentification containing the <a href="#scannedInfo">scanned information.</a></p>

<h3 id="cordova-plugin">Cordova Plugin</h3>

<h6 id="example-call-for-the-mrz-module">Example call for the MRZ Module</h6>
<pre class="highlight plaintext"><code>cordova.exec(onResult, onError, "AnylineSDK", "MRZ",
    [
        "YOUR_LICENSE_KEY",
        {
            "captureResolution": "1080p",
            "cutout": {
                "style": "rect",
                "maxWidthPercent": "90%",
                "maxHeightPercent": "90%",
                "alignment": "top_half",
                "strokeWidth": 2,
                "cornerRadius": 4,
                "strokeColor": "FFFFFF",
                "outerColor": "000000",
                "outerAlpha": 0.3
            },
            "flash": {
                "mode": "manual",
                "alignment": "bottom_right"
            },
            "beepOnResult": true,
            "vibrateOnResult": true,
            "blinkAnimationOnResult": true,
            "cancelOnResult": true
        }
    ]
);
</code></pre>

<p>Call the exec method with <i><b>MRZ</b></i>. For more detailed information about the config parameters, see the <a href="#cordova-example">example</a> in section Quick Start.</p>

          <p><a name="documentModule"> </a></p>

<h2 id="document">Document</h2>

<p>The Anyline Document module detects document outlines, validates the interior angles to ensure the document is not skewed, detects the sharpness of the text and rectifies the document.</p>

<p>In the first step the preview frames are analyzed. Once a valid and sharp document is detected, a high resolution image is taken from the camera, analyzed, and, if valid and sharp, rectified and cropped.</p>

<p>The module does not perform the OCR step, but provides a high resolution, rectified, cropped document image, which is ensured to hold sharp text.</p>

<aside class="notice">
The sharpness detection is robust in the face of text contrast, which means that sharpness detection works on gray text as well as on black text on a white background.
</aside>

<p><a name="addtionalConfiguration"> </a>
<strong>Additional Configuration:</strong></p>

<p>The resolution of the final high resolution image can be set in the <a href="#anyline-config">Configuration</a>.
The additional configuration fields is:</p>

<table><thead>
<tr>
<th>field</th>
<th>description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#pictureResolution">pictureResolution</a></td>
<td>Resolution of the high resolution document image</td>
</tr>
</tbody></table>

<p><a name="documentModuleRestrictions"> </a></p>

<h3 id="restrictions-hints-for-the-document-module-config">Restrictions/hints for the Document-Module Config</h3>

<ul>
<li>The bigger the cutout, the better</li>
<li>It is advised to hide the cutout via setting the <a href="#cutout_strokeColor">strokeColor</a> to #00000000</li>
<li>It is that the <a href="#cutout_width">cutoutWidth</a> matches the <a href="#captureResolution">captureResolution</a></li>
<li>At this stage, the document scanner is limited to upright rectangular documents (like DIN-A4). Because of that, the <a href="#cutout_ratioFromSize">ratioFromSize</a> should be set at around 10:15</li>
</ul>

<h3 id="android">Android</h3>

<h4 id="example">Example</h4>

<p>The following example files illustrate a simple use-case of the document module.</p>

<h6 id="example-activity">Example Activity</h6>

<blockquote>
<p>in onCreate or onActivityCreated lifecycle methods</p>
</blockquote>
<pre class="highlight java"><code><span class="n">documentScanView</span> <span class="o">=</span> <span class="o">(</span><span class="n">DocumentScanView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">document_scan_view</span><span class="o">);</span>

<span class="c1">// initialize Anyline with your license key and a Listener that is called if a result is found</span>
<span class="n">documentScanView</span><span class="o">.</span><span class="na">initAnyline</span><span class="o">(</span><span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">anyline_license_key</span><span class="o">),</span> <span class="k">new</span> <span class="n">DocumentResultListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onResult</span><span class="o">(</span><span class="n">AnylineImage</span> <span class="n">transformedImage</span><span class="o">,</span> <span class="n">AnylineImage</span> <span class="n">fullFrame</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">// This is called once a result (a valid document containing sharp text) is found.</span>
        <span class="c1">// The transformedImage contains the rectified and cropped document image,</span>
        <span class="c1">// the fullFrame contains the full picture that was taken</span>

        <span class="cm">/**
         * IMPORTANT: cache provided frames here, and release them at the end of this callback. Because
         * keeping them in memory (e.g. setting the full frame to an ImageView)
         * could result in a OutOfMemoryError (depending on the chosen pictureResoultion)). This error is reported in {@link #onTakePictureError
         * (Throwable)}
         *
         * Use a DiskCache http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html#disk-cache
         * for example
         *
         */</span>

    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onPictureProcessingFailure</span><span class="o">(</span><span class="n">DocumentScanView</span><span class="o">.</span><span class="na">DocumentError</span> <span class="n">documentError</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// handle an error while processing the full picture here</span>
        <span class="c1">// the preview will be restarted automatically</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onPreviewProcessingSuccess</span><span class="o">(</span><span class="n">AnylineImage</span> <span class="n">anylineImage</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// this is called after the preview of the document is completed, and a full picture will be</span>
        <span class="c1">// processed automatically</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onPreviewProcessingFailure</span><span class="o">(</span><span class="n">DocumentScanView</span><span class="o">.</span><span class="na">DocumentError</span> <span class="n">documentError</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// this is called on any error while processing the document image</span>
        <span class="c1">// Note: this is called every time an error occurs in a run, so that might be quite often</span>
        <span class="c1">// An error message should only be presented to the user after some time</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="n">onDocumentOutlineDetected</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">PointF</span><span class="o">&gt;</span> <span class="n">list</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">anglesValid</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// is called when the outline of the document is detected. return true if the outline is consumed by</span>
        <span class="c1">// the implementation here, false if the outline should be drawn by the DocumentScanView</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onTakePictureSuccess</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// this is called after the image has been captured from the camera and is about to be processed</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onTakePictureError</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">throwable</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// This is called if the image could not be captured from the camera (most probably because of an</span>
        <span class="c1">// OutOfMemoryError)</span>
    <span class="o">}</span>
<span class="o">});</span>

<span class="c1">// optionally stop the scan once a valid result was returned</span>
<span class="c1">// documentScanView.cancelOnResult(true);       </span>
</code></pre>

<blockquote>
<p>in onResume()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">documentScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
</code></pre>

<blockquote>
<p>in onPause()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">documentScanView</span><span class="o">.</span><span class="na">cancelScanning</span><span class="o">();</span>
<span class="c1">//IMPORTANT: always release the camera in onPause</span>
<span class="n">documentScanView</span><span class="o">.</span><span class="na">releaseCameraInBackground</span><span class="o">();</span>
</code></pre>

<p>In order to start the scan process, perform the following steps:</p>

<ol>
<li>If you prefer a json-file for configuration, use the <em>setConfigFromAsset</em> method and place the json-config in the Android assets folder, otherwise configure the view using the XML attributes in the activity layout file</li>
<li>Call <em>initAnyline</em> with your valid license key and a new instance of DocumentResultListener, which is the callback for handling the results</li>
<li>Call <em>startScanning()</em></li>
<li>When done call <em>cancelScanning()</em> and <em>releaseCameraInBackground()</em> or <em>releaseCamera()</em></li>
</ol>

<p>For each successful scan, you will receive two result attributes:</p>

<ul>
<li><strong>transformedImage:</strong> the rectified document image</li>
<li><strong>fullFrame</strong>: the full frame the document was analysed from</li>
</ul>

<h6 id="example-activity-layout">Example Activity Layout</h6>
<pre class="highlight xml"><code><span class="nt">&lt;RelativeLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">xmlns:app=</span><span class="s">"http://schemas.android.com/apk/res-auto"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

<span class="nt">&lt;at.nineyards.anyline.modules.document.DocumentScanView</span>
    <span class="na">android:id=</span><span class="s">"@+id/document_scan_view"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span>
    <span class="nt">/&gt;</span>

<span class="nt">&lt;/RelativeLayout&gt;</span>
</code></pre>

<p>The DocumentScanView can simply be included in the activity layout.</p>

<p>For custom configuration (e.g. cutout, flash, feedback on successful scan, etc.) you can either use a json-file or XML-attributes like in the example. If you need more detailed information about all available config items see <a href="#anyline-config">Anyline Config</a>. Please consider the <a href="#documentModuleRestrictions">config restrictions</a> when configuring the DocumentScanView.</p>

<h3 id="ios">iOS</h3>

<h4 id="example">Example</h4>

<p>The following example illustrates a simple use-case of the document module.</p>

<p>In order to start the scan process, perform the following steps:</p>

<h6 id="1-initialize-the-module-in-viewdidload">1. Initialize the module in viewDidLoad</h6>

<blockquote>
<p>in viewDidLoad</p>
</blockquote>
<pre class="highlight objective_c"><code>    <span class="n">CGRect</span> <span class="n">frame</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIScreen</span> <span class="nf">mainScreen</span><span class="p">]</span> <span class="nf">applicationFrame</span><span class="p">];</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">.</span><span class="n">navigationBar</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">-</span> <span class="n">self</span><span class="p">.</span><span class="n">navigationController</span><span class="p">.</span><span class="n">navigationBar</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>
    <span class="n">self</span><span class="p">.</span><span class="n">documentModuleView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">AnylineDocumentModuleView</span> <span class="nf">alloc</span><span class="p">]</span> <span class="nf">initWithFrame</span><span class="p">:</span><span class="n">frame</span><span class="p">];</span>

    <span class="n">NSError</span> <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="c1">// We tell the module to bootstrap itself with the license key and delegate. The delegate will later get called
</span>    <span class="c1">// by the module once we start receiving results.
</span>    <span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">documentModuleView</span> <span class="nf">setupWithLicenseKey</span><span class="p">:</span><span class="n">kDocumentScanLicenseKey</span> <span class="nf">delegate</span><span class="p">:</span><span class="n">self</span> <span class="nf">error</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
    <span class="c1">// setupWithLicenseKey:delegate:error returns true if everything went fine. In the case something wrong
</span>    <span class="c1">// we have to check the error object for the error message.
</span>    <span class="k">if</span><span class="p">(</span> <span class="o">!</span><span class="n">success</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Something went wrong. The error object contains the error description
</span>        <span class="n">NSAssert</span><span class="p">(</span><span class="n">success</span><span class="p">,</span> <span class="s">@"Setup Error: %@"</span><span class="p">,</span> <span class="n">error</span><span class="p">.</span><span class="n">debugDescription</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// After setup is complete we add the module to the view of this view controller
</span>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nf">addSubview</span><span class="p">:</span><span class="n">self</span><span class="p">.</span><span class="n">documentModuleView</span><span class="p">];</span>

</code></pre>

<ul>
<li>Create a <code class="prettyprint">ALUIConfiguration</code> object and use its properties to configure the user interface, or load a layout file.</li>
<li>Initialize the module with a license key and delegate, which will receive a call once a result is found. The boolean returned by the setup routine notifies you if the Anyline setup was successful. If an error occurred the error needs to be handled.</li>
</ul>

<h6 id="2-start-scanning-process-in-viewdidappear">2. Start scanning process in viewDidAppear</h6>

<blockquote>
<p>in viewDidAppear()</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">documentModuleView</span> <span class="nf">startScanningAndReturnError</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
</code></pre>

<p>Call <code class="prettyprint">startScanningAndReturnError</code> in <code class="prettyprint">viewDidAppear</code>. If there is a problem while starting the scanning process, an error object will be set so the error can be handled.</p>

<h6 id="3-implement-the-delegate-method-and-receive-results">3. Implement the delegate method and receive results</h6>
<pre class="highlight objective_c"><code><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">anylineDocumentModuleView</span><span class="p">:(</span><span class="n">AnylineDocumentModuleView</span> <span class="o">*</span><span class="p">)</span><span class="nv">anylineEnergyModuleView</span> <span class="nf">hasResult</span><span class="p">:(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nv">transformedImage</span> <span class="nf">fullImage</span><span class="p">:(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nv">fullFrame</span> <span class="p">{</span>
   <span class="n">NSLog</span><span class="p">(</span><span class="s">@"Anyline has a result"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre>

<p>To receive results implement the delegate method as can be seen in the example.</p>

<h6 id="newline">&NewLine;</h6>

<blockquote>
<p>in viewWillDisappear()</p>
</blockquote>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">documentModuleView</span> <span class="nf">cancelScanningAndReturnError</span><span class="p">:</span><span class="o">&amp;</span><span class="n">error</span><span class="p">];</span>
</code></pre>

<p>After you received a result, call <code class="prettyprint">cancelScanningAndReturnError</code>. This also has to be called in <code class="prettyprint">viewWillDisappear</code> to clean up the module.</p>

<h6 id="newline">&NewLine;</h6>

<p>For each successful scan, you will receive two objects:</p>

<ul>
<li><strong>transformedImage:</strong> the cropped and transformed image of the document</li>
<li><strong>fullFrame</strong>: the full image taken by the camera</li>
</ul>

<p>The AnylineDocumentModuleView can simply be added as a subview.</p>

<p>For custom configuration (e.g. cutout, flash, feedback on successful scan, etc.) you can either use a json-file or configure it by accessing the properties of the module. If you need more detailed information about all available config items see <a href="#anyline-config">Anyline Config</a>.</p>

<h3 id="cordova-plugin">Cordova Plugin</h3>

<p>This is in ALPHA stage and usage may change in the future.</p>

<h4 id="example">Example</h4>
<pre class="highlight plaintext"><code>cordova.exec(onResult, onError, "AnylineSDK", "DOCUMENT",
    [
        "YOUR_LICENSE_KEY",
        {
            "captureResolution":"720p",
            "pictureResolution":"1080p",
            "cutout": {
                "style": "rect",
                "maxWidthPercent": "100%",
                "maxHeightPercent": "100%",
                "width": 720,
                "ratioFromSize": {
                    "width": 10,
                    "height": 15
                },
                "alignment": "center",
                "strokeWidth": 2,
                "cornerRadius": 0,
                "strokeColor": "00000000"
            },
            "flash": {
                "mode": "manual",
                "alignment": "bottom_left",
                "offset": {
                    "x": 10,
                    "y": 0
                }
            },
            "beepOnResult": true,
            "vibrateOnResult": true,
            "blinkAnimationOnResult": true,
            "cancelOnResult": true
        }
    ]
);
</code></pre>

<p>The result returned in onResult contains an attribute &ldquo;imagePath&rdquo; that holds the path to the cropped and transformed image.</p>

          <p><a name="ordercodeModule"> </a></p>

<h2 id="order-code">Order Code</h2>

<aside class="notice">
<b>A first version of the Order Code Module for smart glasses is available on request. For a valid license please <a href="https://www.anyline.io/support-request/">contact</a> us </b>
</aside>

<p>With the Anyline Order Code Module it is possible to scan a specific type of Ordercode.
The code consists of 11 alphanumeric characters in different font sizes. The result will simply be a <em>string</em> representation of the code.</p>

<h4 id="example">Example</h4>

<p>The following example files illustrate a simple use-case of the order code module.</p>

<h6 id="example-activity">Example Activity</h6>

<blockquote>
<p>in onCreate or onActivityCreated lifecycle methods</p>
</blockquote>
<pre class="highlight java"><code><span class="n">ordercodeScanView</span> <span class="o">=</span> <span class="o">(</span><span class="n">OrdercodeScanView</span><span class="o">)</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">order_code_scan_view</span><span class="o">);</span>
<span class="n">ordercodeScanView</span><span class="o">.</span><span class="na">setConfigFromAsset</span><span class="o">(</span><span class="s">"order_code_view_config.json"</span><span class="o">);</span>

<span class="c1">// initialize Anyline with your license key and a Listener that is called if a result is found</span>
<span class="n">ordercodeScanView</span><span class="o">.</span><span class="na">initAnyline</span><span class="o">(</span><span class="n">getString</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">string</span><span class="o">.</span><span class="na">anyline_license_key</span><span class="o">),</span> <span class="k">new</span> <span class="n">OrdercodeResultListener</span><span class="o">()</span> <span class="o">{</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="n">onResult</span><span class="o">(</span><span class="n">String</span> <span class="n">result</span><span class="o">,</span> <span class="n">AnylineImage</span> <span class="n">image</span><span class="o">)</span> <span class="o">{</span>

        <span class="c1">// This is called when a result is found.</span>
    <span class="o">}</span>
<span class="o">});</span>
<span class="n">ordercodeScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
</code></pre>

<blockquote>
<p>in onResume()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">ordercodeScanView</span><span class="o">.</span><span class="na">startScanning</span><span class="o">();</span>
</code></pre>

<blockquote>
<p>in onPause()</p>
</blockquote>
<pre class="highlight java"><code><span class="n">ordercodeScanView</span><span class="o">.</span><span class="na">cancelScanning</span><span class="o">();</span>
<span class="c1">//IMPORTANT: always release the camera in onPause</span>
<span class="n">ordercodeScanView</span><span class="o">.</span><span class="na">releaseCameraInBackground</span><span class="o">();</span>
</code></pre>

<p>There are four simple steps necessary to get started:</p>

<ol>
<li>If you do not use XML configuration set the <a href="#ordercodeConfig">config-file</a> to your OrdercodeScanView using the <em>setConfigFromAsset</em> method and make sure that the json config-file is located in the Android assets folder.</li>
<li>Call initAnyline with your valid license key and a new instance of OrdercodeResultListener, which can be used to handle the results.</li>
<li>Call <em>startScanning()</em></li>
<li>When done call <em>cancelScanning()</em> and <em>releaseCameraInBackground()</em> or <em>releaseCamera()</em></li>
</ol>

<h6 id="newline">&NewLine;</h6>

<h6 id="example-activity-layout">Example Activity Layout</h6>
<pre class="highlight xml"><code><span class="nt">&lt;RelativeLayout</span>
    <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">&gt;</span>

 <span class="nt">&lt;at.nineyards.anyline.modules.ordercode.OrdercodeScanView</span>
    <span class="na">android:id=</span><span class="s">"@+id/ordercode_scan_view"</span>
    <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"match_parent"</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span>
</code></pre>

<p>The OrdercodeScanView can simply be included in the activity layout file, just like any other view. The view can be either configured here via XML or otherwise a config json file can be used to adapt the scan view.</p>

<p><a name="ordercodeConfig"> </a></p>

<h6 id="example-config-for-the-barcode-module">Example config for the Barcode Module</h6>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"captureResolution"</span><span class="p">:</span><span class="s2">"1080p"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cutout"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"rect"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"maxWidthPercent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40%"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"alignment"</span><span class="p">:</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"ratioFromSize"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"width"</span><span class="p">:</span><span class="w"> </span><span class="mi">340</span><span class="p">,</span><span class="w">
      </span><span class="nt">"height"</span><span class="p">:</span><span class="w"> </span><span class="mi">76</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"offset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cropPadding"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"cropOffset"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nt">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="nt">"y"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nt">"strokeWidth"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="nt">"cornerRadius"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="nt">"strokeColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"FFFFFF"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outerColor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"000000"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"outerAlpha"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.3</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nt">"beepOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nt">"blinkAnimationOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nt">"cancelOnResult"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>The config file enables a quick and easy adaption of the scan view.</p>

<p>Some of the most important config options may be:</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>captureResolution</td>
<td>the preferred camera preview size</td>
</tr>
<tr>
<td>cutout</td>
<td>defining which area of the preview will be &ldquo;cutout&rdquo; (analyzed to find bar/QR code)</td>
</tr>
<tr>
<td>beepOnResult</td>
<td>enables acoustic feedback on successful scan - only available when headset is connected</td>
</tr>
<tr>
<td>blinkOnResult</td>
<td>visual feedback on successful scan</td>
</tr>
<tr>
<td>cancelOnResult</td>
<td>true, if the scanning process should be stopped after one result; needs manual restart for additional scans</td>
</tr>
</tbody></table>

<p>A detailed description of all available config items can be found in <a href="#anyline-config">Anyline Config</a></p>

<p>It is also possible to use xml-attributes instead of the json config file. For more detailed information see <a href="#configureViaXML">XML Configuration</a></p>

          <h1 id="android-advanced-setup">Android Advanced Setup</h1>

<h2 id="how-to-split-apk-into-several-smaller-ones">How to Split APK into several smaller ones</h2>

<p>This is outdated as Anyline only ships with tow ABIS (x86 and armv7) by default now
and there has been a new method introduced recently:
http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits</p>

<h4 id="old-method">Old Method</h4>

<p>It is possible to split your app into multiple APKs and upload them all to the playstore.
The playstore will pick the correct APK to download.
This is currently not recommended by Google unless the APK is bigger than 50MB. (see: <a href="http://developer.android.com/google/play/publishing/multiple-apks.html">Google developer page on multiple APKs</a>)
The following can be added in the android section of the build.gradle
to generate a separate APK for every supported CPU architecture (ABI).</p>
<pre class="highlight groovy"><code>    <span class="c1">//at the end of the android section
</span>    <span class="n">productFlavors</span> <span class="o">{</span>
        <span class="n">x86</span> <span class="o">{</span>
            <span class="n">flavorDimension</span> <span class="s2">"abi"</span>
            <span class="n">ndkConfig</span><span class="o">.</span><span class="na">abiFilters</span> <span class="s2">"x86"</span>
            <span class="c1">// this is the flavor part of the version code.
</span>            <span class="c1">// It must be higher than the arm one for devices supporting
</span>            <span class="c1">// both, as x86 is preferred.
</span>            <span class="n">versionCode</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="o">}</span>
        <span class="n">armv7</span> <span class="o">{</span>
            <span class="n">flavorDimension</span> <span class="s2">"abi"</span>
            <span class="n">ndkConfig</span><span class="o">.</span><span class="na">abiFilters</span> <span class="s2">"armeabi-v7a"</span>
            <span class="n">versionCode</span> <span class="o">=</span> <span class="mi">3</span>
        <span class="o">}</span>

        <span class="n">arm</span> <span class="o">{</span>
            <span class="n">flavorDimension</span> <span class="s2">"abi"</span>
            <span class="n">ndkConfig</span><span class="o">.</span><span class="na">abiFilters</span> <span class="s2">"armeabi"</span>
            <span class="n">versionCode</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="o">}</span>

        <span class="n">mips</span> <span class="o">{</span>
            <span class="n">flavorDimension</span> <span class="s2">"abi"</span>
            <span class="n">ndkConfig</span><span class="o">.</span><span class="na">abiFilters</span> <span class="s2">"mips"</span>
            <span class="n">versionCode</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="o">}</span>
        <span class="n">fat</span> <span class="o">{</span>
            <span class="n">flavorDimension</span> <span class="s2">"abi"</span>
            <span class="c1">// fat binary, lowest version code to be
</span>            <span class="c1">// the last option
</span>            <span class="n">versionCode</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="o">}</span>

        <span class="c1">// make per-variant version code
</span>        <span class="n">applicationVariants</span><span class="o">.</span><span class="na">all</span> <span class="o">{</span> <span class="n">variant</span> <span class="o">-&gt;</span>
            <span class="c1">// get the version code of each flavor
</span>            <span class="kt">def</span> <span class="n">abiVersion</span> <span class="o">=</span> <span class="n">variant</span><span class="o">.</span><span class="na">productFlavors</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">versionCode</span>

            <span class="c1">// set the composite code
</span>            <span class="n">variant</span><span class="o">.</span><span class="na">mergedFlavor</span><span class="o">.</span><span class="na">versionCode</span> <span class="o">=</span> <span class="n">defaultConfig</span><span class="o">.</span><span class="na">versionCode</span> <span class="o">*</span> <span class="mi">10</span> <span class="o">+</span> <span class="n">abiVersion</span>
        <span class="o">}</span>
    <span class="o">}</span>
</code></pre>

<p>This example will generate 5 APKs. 4 for every supported ABI and 1 big APK with everything.
The APKs need to have a different version, for the playstore to be able to deliver the correct one.
The playstore chooses the highest compatible version so <em>armeabi-v7a</em> must be higher than <em>armeabi</em>
and <em>x86</em> must be higher than <em>armeabi-v7a</em> (because x86 devices can usually also use <em>armeabi</em> libraries).</p>

<p>The versioning in this example is a bit different than the one suggested on different places like <a href="https://software.intel.com/en-us/android/articles/google-play-supports-cpu-architecture-filtering-for-multiple-APK">this site from Intel</a>.
Because it is not optimal that an old x86 version has a higher number than any newer other version,
this could be problematic if you change from multiple APKs to a single APK later on.</p>

<p>The example shows one possibility, you can also use 3 APKs: <em>x86</em>, <em>armeabi-v7a</em>, and one with <em>mips</em> + <em>armeabi</em>.</p>

<p>The splitting has advantages during development, because you can chose the product flavor you want to use
and that reduces the build and upload time a bit.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
